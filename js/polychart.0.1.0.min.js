/*
 Copyright 2012 Beta Cubed. All rights reserved.
 Polychart.js charting library. 
 This library uses the following projects.

 JSON2.js
 d3.js
 underscore.js
 underscore.string.js
 raphael.js
*/
var gg=function(){function Gf(a){for(var b=-1,c=a.length,d=[];++b<c;)d.push(a[b]);return d}function Tb(){}function Hf(a,b,c){return function(){var d=c.apply(b,arguments);return arguments.length?a:d}}function Oc(a){return null!=a&&!isNaN(a)}function If(a){return a.length}function Jf(a){return null==a}function Vd(){}function Kf(a){function b(){for(var b=c,d=-1,g=b.length,i;++d<g;)(i=b[d].on)&&i.apply(this,arguments);return a}var c=[],d=new Tb;b.on=function(b,f){var g=d.get(b),i;if(2>arguments.length)return g&&
g.on;g&&(g.on=null,c=c.slice(0,i=c.indexOf(g)).concat(c.slice(i+1)),d.remove(b));f&&c.push(d.set(b,{on:f}));return a};return b}function Wd(a,b){return b-(a?1+Math.floor(Math.log(a+Math.pow(10,1+Math.floor(Math.log(a)/Math.LN10)-b))/Math.LN10):1)}function Lf(a){return a+""}function Xd(a){for(var b=a.lastIndexOf("."),c=0<=b?a.substring(b):(b=a.length,""),d=[];0<b;)d.push(a.substring(b-=3,b+3));return d.reverse().join(",")+c}function Yd(a){return function(b){return 1-a(1-b)}}function Zd(a){return function(b){return 0.5*
(0.5>b?a(2*b):2-a(2-2*b))}}function Pc(a){return a}function Qc(a){return function(b){return Math.pow(b,a)}}function Mf(a){return 1-Math.cos(a*Math.PI/2)}function Nf(a){return Math.pow(2,10*(a-1))}function Of(a){return 1-Math.sqrt(1-a*a)}function Pf(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375}function Qf(a,b){b=b-(a=+a)?1/(b-a):0;return function(c){return(c-a)*b}}function Rf(a,b){b=b-(a=+a)?1/(b-a):0;
return function(c){return Math.max(0,Math.min(1,(c-a)*b))}}function eb(a,b,c){return new qb(a,b,c)}function qb(a,b,c){this.r=a;this.g=b;this.b=c}function Hb(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function Rc(a,b,c){var d=0,e=0,f=0,g,i;if(g=/([a-z]+)\((.*)\)/i.exec(a))switch(i=g[2].split(","),g[1]){case "hsl":return c(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case "rgb":return b(Sc(i[0]),Sc(i[1]),Sc(i[2]))}if(c=kc.get(a))return b(c.r,c.g,c.b);null!=
a&&"#"===a.charAt(0)&&(4===a.length?(d=a.charAt(1),d+=d,e=a.charAt(2),e+=e,f=a.charAt(3),f+=f):7===a.length&&(d=a.substring(1,3),e=a.substring(3,5),f=a.substring(5,7)),d=parseInt(d,16),e=parseInt(e,16),f=parseInt(f,16));return b(d,e,f)}function $d(a,b,c){var d=Math.min(a/=255,b/=255,c/=255),e=Math.max(a,b,c),f=e-d,g=(e+d)/2;f?(d=0.5>g?f/(e+d):f/(2-e-d),a=60*(a==e?(b-c)/f+(b<c?6:0):b==e?(c-a)/f+2:(a-b)/f+4)):d=a=0;return Ib(a,d,g)}function Sc(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?
Math.round(2.55*b):b}function Ib(a,b,c){return new rb(a,b,c)}function rb(a,b,c){this.h=a;this.s=b;this.l=c}function lc(a,b,c){function d(a){360<a?a-=360:0>a&&(a+=360);return 60>a?e+(f-e)*a/60:180>a?f:240>a?e+(f-e)*(240-a)/60:e}var e,f,a=a%360;0>a&&(a+=360);b=0>b?0:1<b?1:b;c=0>c?0:1<c?1:c;f=0.5>=c?c*(1+b):c+b-c*b;e=2*c-f;return eb(Math.round(255*d(a+120)),Math.round(255*d(a)),Math.round(255*d(a-120)))}function Sf(a){return a.map(Tf).join(",")}function Tf(a){return/[",\n]/.test(a)?'"'+a.replace(/\"/g,
'""')+'"':a}function Tc(a){var b=a[0],a=a[a.length-1];return b<a?[b,a]:[a,b]}function Uc(a,b){var c=0,d=a.length-1,e=a[c],f=a[d],g;f<e&&(g=c,c=d,d=g,g=e,e=f,f=g);if(g=f-e)b=b(g),a[c]=b.floor(e),a[d]=b.ceil(f);return a}function Uf(){return Math}function ae(a,b,c,d){function e(){var e=2<Math.min(a.length,b.length)?Vf:Wf,Q=d?Rf:Qf;g=e(a,b,Q,c);i=e(b,a,Q,j.interpolate);return f}function f(a){return g(a)}var g,i;f.invert=function(a){return i(a)};f.domain=function(b){if(!arguments.length)return a;a=b.map(Number);
return e()};f.range=function(a){if(!arguments.length)return b;b=a;return e()};f.rangeRound=function(a){return f.range(a).interpolate(j.interpolateRound)};f.clamp=function(a){if(!arguments.length)return d;d=a;return e()};f.interpolate=function(a){if(!arguments.length)return c;c=a;return e()};f.ticks=function(b){return Vc(a,b)};f.tickFormat=function(b){return Wc(a,b)};f.nice=function(){Uc(a,be);return e()};f.copy=function(){return ae(a,b,c,d)};return e()}function ce(a,b){return j.rebind(a,b,"range",
"rangeRound","interpolate","clamp")}function be(a){a=Math.pow(10,Math.round(Math.log(a)/Math.LN10)-1);return{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}}function de(a,b){var c=Tc(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),d=b/d*e;0.15>=d?e*=10:0.35>=d?e*=5:0.75>=d&&(e*=2);c[0]=Math.ceil(c[0]/e)*e;c[1]=Math.floor(c[1]/e)*e+0.5*e;c[2]=e;return c}function Vc(a,b){return j.range.apply(j,de(a,b))}function Wc(a,b){return j.format(",."+Math.max(0,
-Math.floor(Math.log(de(a,b)[2])/Math.LN10+0.01))+"f")}function Wf(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function Vf(a,b,c,d){var e=[],f=[],g=0,i=Math.min(a.length,b.length)-1;a[i]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());for(;++g<=i;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=j.bisect(a,b,1,i)-1;return f[c](e[c](b))}}function ee(a,b){function c(c){return a(b(c))}var d=b.pow;c.invert=function(b){return d(a.invert(b))};
c.domain=function(e){if(!arguments.length)return a.domain().map(d);b=0>e[0]?mc:Xc;d=b.pow;a.domain(e.map(b));return c};c.nice=function(){a.domain(Uc(a.domain(),Uf));return c};c.ticks=function(){var c=Tc(a.domain()),f=[];if(c.every(isFinite)){var g=Math.floor(c[0]),i=Math.ceil(c[1]),m=d(c[0]),c=d(c[1]);if(b===mc)for(f.push(d(g));g++<i;)for(var Q=9;0<Q;Q--)f.push(d(g)*Q);else{for(;g<i;g++)for(Q=1;10>Q;Q++)f.push(d(g)*Q);f.push(d(g))}for(g=0;f[g]<m;g++);for(i=f.length;f[i-1]>c;i--);f=f.slice(g,i)}return f};
c.tickFormat=function(a,f){2>arguments.length&&(f=Xf);if(1>arguments.length)return f;var g=a/c.ticks().length,i=b===mc?(m=-1E-12,Math.floor):(m=1E-12,Math.ceil),m;return function(a){return a/d(i(b(a)+m))<g?f(a):""}};c.copy=function(){return ee(a.copy(),b)};return ce(c,a)}function Xc(a){return Math.log(0>a?0:a)/Math.LN10}function mc(a){return-Math.log(0<a?0:-a)/Math.LN10}function fe(a,b){function c(b){return a(d(b))}var d=nc(b),e=nc(1/b);c.invert=function(b){return e(a.invert(b))};c.domain=function(b){if(!arguments.length)return a.domain().map(e);
a.domain(b.map(d));return c};c.ticks=function(a){return Vc(c.domain(),a)};c.tickFormat=function(a){return Wc(c.domain(),a)};c.nice=function(){return c.domain(Uc(c.domain(),be))};c.exponent=function(a){if(!arguments.length)return b;var g=c.domain();d=nc(b=a);e=nc(1/b);return c.domain(g)};c.copy=function(){return fe(a.copy(),b)};return ce(c,a)}function nc(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function ge(a,b){function c(b){return f[((e.get(b)||e.set(b,a.push(b)))-1)%f.length]}
function d(b,c){return j.range(a.length).map(function(a){return b+c*a})}var e,f,g;c.domain=function(d){if(!arguments.length)return a;a=[];e=new Tb;for(var f=-1,g=d.length,h;++f<g;)e.has(h=d[f])||e.set(h,a.push(h));return c[b.t](b.x,b.p)};c.range=function(a){if(!arguments.length)return f;f=a;g=0;b={t:"range",x:a};return c};c.rangePoints=function(e,m){2>arguments.length&&(m=0);var Q=e[0],h=e[1],n=(h-Q)/(a.length-1+m);f=d(2>a.length?(Q+h)/2:Q+n*m/2,n);g=0;b={t:"rangePoints",x:e,p:m};return c};c.rangeBands=
function(e,m){2>arguments.length&&(m=0);var Q=e[1]<e[0],h=e[Q-0],n=(e[1-Q]-h)/(a.length+m);f=d(h+n*m,n);Q&&f.reverse();g=n*(1-m);b={t:"rangeBands",x:e,p:m};return c};c.rangeRoundBands=function(e,m){2>arguments.length&&(m=0);var Q=e[1]<e[0],h=e[Q-0],n=e[1-Q],j=Math.floor((n-h)/(a.length+m));f=d(h+Math.round((n-h-(a.length-m)*j)/2),j);Q&&f.reverse();g=Math.round(j*(1-m));b={t:"rangeRoundBands",x:e,p:m};return c};c.rangeBand=function(){return g};c.rangeExtent=function(){return Tc(b.x)};c.copy=function(){return ge(a,
b)};return c.domain(a)}function he(a,b){function c(){var c=0,g=b.length;for(e=[];++c<g;)e[c-1]=j.quantile(a,c/g);return d}function d(a){return isNaN(a=+a)?NaN:b[j.bisect(e,a)]}var e;d.domain=function(b){if(!arguments.length)return a;a=b.filter(function(a){return!isNaN(a)}).sort(j.ascending);return c()};d.range=function(a){if(!arguments.length)return b;b=a;return c()};d.quantiles=function(){return e};d.copy=function(){return he(a,b)};return c()}function ie(a,b,c){function d(b){return c[Math.max(0,
Math.min(g,Math.floor(f*(b-a))))]}function e(){f=c.length/(b-a);g=c.length-1;return d}var f,g;d.domain=function(c){if(!arguments.length)return[a,b];a=+c[0];b=+c[c.length-1];return e()};d.range=function(a){if(!arguments.length)return c;c=a;return e()};d.copy=function(){return ie(a,b,c)};return e()}function je(a){function b(a){return+a}b.invert=b;b.domain=b.range=function(c){if(!arguments.length)return a;a=c.map(b);return b};b.ticks=function(b){return Vc(a,b)};b.tickFormat=function(b){return Wc(a,b)};
b.copy=function(){return je(a)};return b}function sb(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function oc(a,b,c,d){for(var e,f=0,g=b.length,i=c.length;f<g;){if(d>=i)return-1;e=b.charCodeAt(f++);if(37==e){if(e=Yf[b.charAt(f++)],!e||0>(d=e(a,c,d)))return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function ke(a,b,c){ma.lastIndex=0;return(b=ma.exec(b.substring(c,c+2)))?(a.d=+b[0],c+b[0].length):-1}function le(a,b,c){ma.lastIndex=0;return(b=ma.exec(b.substring(c,
c+2)))?(a.H=+b[0],c+b[0].length):-1}function Yc(a){return a.toISOString()}function tb(a,b,c){function d(b){var c=a(b),d=f(c,1);return b-c<d-b?c:d}function e(c){b(c=a(new da(c-1)),1);return c}function f(a,c){b(a=new da(+a),c);return a}function g(a,d,f){var a=e(a),g=[];if(1<f)for(;a<d;)c(a)%f||g.push(new Date(+a)),b(a,1);else for(;a<d;)g.push(new Date(+a)),b(a,1);return g}a.floor=a;a.round=d;a.ceil=e;a.offset=f;a.range=g;var i=a.utc=pc(a);i.floor=i;i.round=pc(d);i.ceil=pc(e);i.offset=pc(f);i.range=
function(a,b,c){try{da=sb;var d=new sb;d._=a;return g(d,b,c)}finally{da=Date}};return a}function pc(a){return function(b,c){try{da=sb;var d=new sb;d._=b;return a(d,c)._}finally{da=Date}}}function Zc(a,b,c){function d(b){return a(b)}d.invert=function(b){return $c(a.invert(b))};d.domain=function(b){if(!arguments.length)return a.domain().map($c);a.domain(b);return d};d.nice=function(a){var b=me(d.domain());return d.domain([a.floor(b[0]),a.ceil(b[1])])};d.ticks=function(c,f){var g=me(d.domain());if("function"!==
typeof c){var i=(g[1]-g[0])/c,m=j.bisect(qc,i);if(m==qc.length)return b.year(g,c);if(!m)return a.ticks(c).map($c);Math.log(i/qc[m-1])<Math.log(qc[m]/i)&&--m;c=b[m];f=c[1];c=c[0].range}return c(g[0],new Date(+g[1]+1),f)};d.tickFormat=function(){return c};d.copy=function(){return Zc(a.copy(),b,c)};return j.rebind(d,a,"range","rangeRound","interpolate","clamp")}function me(a){var b=a[0],a=a[a.length-1];return b<a?[b,a]:[a,b]}function $c(a){return new Date(a)}function ne(a){return function(b){for(var c=
a.length-1,d=a[c];!d[1](b);)d=a[--c];return d[0](b)}}function ad(a){var b=new Date(a,0,1);b.setFullYear(a);return b}function Zf(a){var b=a.getFullYear(),c=ad(b),d=ad(b+1);return b+(a-c)/(d-c)}function bd(a){var b=new Date(Date.UTC(a,0,1));b.setUTCFullYear(a);return b}function $f(a){var b=a.getUTCFullYear(),c=bd(b),d=bd(b+1);return b+(a-c)/(d-c)}var ea;ea||(ea={});(function(){function a(a){return 10>a?"0"+a:a}function b(a){e.lastIndex=0;return e.test(a)?'"'+a.replace(e,function(a){var b=i[a];return"string"===
typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(a,d){var e,i,h,j,k=f,l,v=d[a];v&&("object"===typeof v&&"function"===typeof v.toJSON)&&(v=v.toJSON(a));"function"===typeof m&&(v=m.call(d,a,v));switch(typeof v){case "string":return b(v);case "number":return isFinite(v)?String(v):"null";case "boolean":case "null":return String(v);case "object":if(!v)return"null";f+=g;l=[];if("[object Array]"===Object.prototype.toString.apply(v)){j=v.length;for(e=0;e<j;e+=1)l[e]=
c(e,v)||"null";h=0===l.length?"[]":f?"[\n"+f+l.join(",\n"+f)+"\n"+k+"]":"["+l.join(",")+"]";f=k;return h}if(m&&"object"===typeof m){j=m.length;for(e=0;e<j;e+=1)"string"===typeof m[e]&&(i=m[e],(h=c(i,v))&&l.push(b(i)+(f?": ":":")+h))}else for(i in v)Object.prototype.hasOwnProperty.call(v,i)&&(h=c(i,v))&&l.push(b(i)+(f?": ":":")+h);h=0===l.length?"{}":f?"{\n"+f+l.join(",\n"+f)+"\n"+k+"}":"{"+l.join(",")+"}";f=k;return h}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?
this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
f,g,i={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},m;"function"!==typeof ea.stringify&&(ea.stringify=function(a,b,d){var e;g=f="";if(typeof d==="number")for(e=0;e<d;e=e+1)g=g+" ";else typeof d==="string"&&(g=d);if((m=b)&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number"))throw Error("JSON.stringify");return c("",{"":a})});"function"!==typeof ea.parse&&(ea.parse=function(a,b){function c(a,d){var e,f,g=a[d];if(g&&typeof g==="object")for(e in g)if(Object.prototype.hasOwnProperty.call(g,
e)){f=c(g,e);f!==void 0?g[e]=f:delete g[e]}return b.call(a,d,g)}var e,a=String(a);d.lastIndex=0;d.test(a)&&(a=a.replace(d,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){e=eval("("+a+")");return typeof b==="function"?c({"":e},""):e}throw new SyntaxError("JSON.parse");})})();Date.now||
(Date.now=function(){return+new Date});var rc,cd,oe=Array.prototype,pe=oe.forEach,dd=oe.map,qe={};rc=function(a,b,c){var d=[];if(a==null)return d;if(dd&&a.map===dd)return a.map(b,c);cd(a,function(a,f,g){d[d.length]=b.call(c,a,f,g)});if(a.length===+a.length)d.length=a.length;return d};cd=function(a,b,c){if(a!=null)if(pe&&a.forEach===pe)a.forEach(b,c);else if(a.length===+a.length)for(var d=0,e=a.length;d<e;d++){if(d in a&&b.call(c,a[d],d,a)===qe)break}else for(d in a)if(h.has(a,d)&&b.call(c,a[d],d,
a)===qe)break};dd||(Array.prototype.map=function(a){return rc(this,a)});document.createElement("div");var j;j={version:"2.8.1"};window?window.d3=j:this.d3=j;var re=function(a){return Array.prototype.slice.call(a)};try{re(document.documentElement.childNodes)[0].nodeType}catch(Rh){re=Gf}j.map=function(a){var b=new Tb,c;for(c in a)b.set(c,a[c]);return b};var se=Tb,ed={has:function(a){return Ub+a in this},get:function(a){return this[Ub+a]},set:function(a,b){return this[Ub+a]=b},remove:function(a){a=Ub+
a;return a in this&&delete this[a]},keys:function(){var a=[];this.forEach(function(b){a.push(b)});return a},values:function(){var a=[];this.forEach(function(b,c){a.push(c)});return a},entries:function(){var a=[];this.forEach(function(b,c){a.push({key:b,value:c})});return a},forEach:function(a){for(var b in this)b.charCodeAt(0)===ag&&a.call(this,b.substring(1),this[b])}};try{for(var te in ed)Object.defineProperty(se.prototype,te,{value:ed[te],enumerable:!1})}catch(Sh){se.prototype=ed}var Ub="\x00",
ag=Ub.charCodeAt(0);j.functor=function(a){return typeof a==="function"?a:function(){return a}};j.rebind=function(a,b){for(var c=1,d=arguments.length,e;++c<d;)a[e=arguments[c]]=Hf(a,b,b[e]);return a};j.ascending=function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN};j.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN};j.mean=function(a,b){var c=a.length,d,e=0,f=-1,g=0;if(arguments.length===1)for(;++f<c;){if(Oc(d=a[f]))e=e+(d-e)/++g}else for(;++f<c;)if(Oc(d=b.call(a,a[f],f)))e=e+(d-e)/++g;return g?e:void 0};
j.median=function(a,b){arguments.length>1&&(a=a.map(b));a=a.filter(Oc);return a.length?j.quantile(a.sort(j.ascending),0.5):void 0};j.min=function(a,b){var c=-1,d=a.length,e,f;if(arguments.length===1){for(;++c<d&&((e=a[c])==null||e!=e);)e=void 0;for(;++c<d;)if((f=a[c])!=null&&e>f)e=f}else{for(;++c<d&&((e=b.call(a,a[c],c))==null||e!=e);)e=void 0;for(;++c<d;)if((f=b.call(a,a[c],c))!=null&&e>f)e=f}return e};j.max=function(a,b){var c=-1,d=a.length,e,f;if(arguments.length===1){for(;++c<d&&((e=a[c])==null||
e!=e);)e=void 0;for(;++c<d;)if((f=a[c])!=null&&f>e)e=f}else{for(;++c<d&&((e=b.call(a,a[c],c))==null||e!=e);)e=void 0;for(;++c<d;)if((f=b.call(a,a[c],c))!=null&&f>e)e=f}return e};j.extent=function(a,b){var c=-1,d=a.length,e,f,g;if(arguments.length===1){for(;++c<d&&((e=g=a[c])==null||e!=e);)e=g=void 0;for(;++c<d;)if((f=a[c])!=null){e>f&&(e=f);g<f&&(g=f)}}else{for(;++c<d&&((e=g=b.call(a,a[c],c))==null||e!=e);)e=void 0;for(;++c<d;)if((f=b.call(a,a[c],c))!=null){e>f&&(e=f);g<f&&(g=f)}}return[e,g]};j.random=
{normal:function(a,b){arguments.length<2&&(b=1);arguments.length<1&&(a=0);return function(){var c,d;do{c=Math.random()*2-1;d=Math.random()*2-1;d=c*c+d*d}while(!d||d>1);return a+b*c*Math.sqrt(-2*Math.log(d)/d)}}};j.sum=function(a,b){var c=0,d=a.length,e,f=-1;if(arguments.length===1)for(;++f<d;){if(!isNaN(e=+a[f]))c=c+e}else for(;++f<d;)if(!isNaN(e=+b.call(a,a[f],f)))c=c+e;return c};j.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=a[d-1];return(c=c-d)?e+c*(a[d]-e):e};j.transpose=function(a){return j.zip.apply(j,
a)};j.zip=function(){if(!(e=arguments.length))return[];for(var a=-1,b=j.min(arguments,If),c=Array(b);++a<b;)for(var d=-1,e,f=c[a]=Array(e);++d<e;)f[d]=arguments[d][a];return c};j.bisector=function(a){return{left:function(b,c,d,e){arguments.length<3&&(d=0);if(arguments.length<4)e=b.length;for(;d<e;){var f=d+e>>1;a.call(b,b[f],f)<c?d=f+1:e=f}return d},right:function(b,c,d,e){arguments.length<3&&(d=0);if(arguments.length<4)e=b.length;for(;d<e;){var f=d+e>>1;c<a.call(b,b[f],f)?e=f:d=f+1}return d}}};var ue=
j.bisector(function(a){return a});j.bisectLeft=ue.left;j.bisect=j.bisectRight=ue.right;j.first=function(a,b){var c=0,d=a.length,e=a[0],f;if(arguments.length===1)b=j.ascending;for(;++c<d;)if(b.call(a,e,f=a[c])>0)e=f;return e};j.last=function(a,b){var c=0,d=a.length,e=a[0],f;if(arguments.length===1)b=j.ascending;for(;++c<d;)if(b.call(a,e,f=a[c])<=0)e=f;return e};j.nest=function(){function a(b,e){if(e>=d.length)return g?g.call(c,b):f?b.sort(f):b;for(var Q=-1,h=b.length,n=d[e++],j,k,l=new Tb,s,L={};++Q<
h;)(s=l.get(j=n(k=b[Q])))?s.push(k):l.set(j,[k]);l.forEach(function(b){L[b]=a(l.get(b),e)});return L}function b(a,c){if(c>=d.length)return a;var f=[],g=e[c++],h;for(h in a)f.push({key:h,values:b(a[h],c)});g&&f.sort(function(a,b){return g(a.key,b.key)});return f}var c={},d=[],e=[],f,g;c.map=function(b){return a(b,0)};c.entries=function(c){return b(a(c,0),0)};c.key=function(a){d.push(a);return c};c.sortKeys=function(a){e[d.length-1]=a;return c};c.sortValues=function(a){f=a;return c};c.rollup=function(a){g=
a;return c};return c};j.keys=function(a){var b=[],c;for(c in a)b.push(c);return b};j.values=function(a){var b=[],c;for(c in a)b.push(a[c]);return b};j.entries=function(a){var b=[],c;for(c in a)b.push({key:c,value:a[c]});return b};j.permute=function(a,b){for(var c=[],d=-1,e=b.length;++d<e;)c[d]=a[b[d]];return c};j.merge=function(a){return Array.prototype.concat.apply([],a)};j.split=function(a,b){var c=[],d=[],e,f=-1,g=a.length;for(arguments.length<2&&(b=Jf);++f<g;)if(b.call(d,e=a[f],f))d=[];else{d.length||
c.push(d);d.push(e)}return c};j.range=function(a,b,c){if(arguments.length<3){c=1;if(arguments.length<2){b=a;a=0}}if((b-a)/c===Infinity)throw Error("infinite range");var d=[],e;e=Math.abs(c);for(var f=1;e*f%1;)f=f*10;e=f;var f=-1,g,a=a*e,b=b*e,c=c*e;if(c<0)for(;(g=a+c*++f)>b;)d.push(g/e);else for(;(g=a+c*++f)<b;)d.push(g/e);return d};j.requote=function(a){return a.replace(bg,"\\$&")};var bg=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;j.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};
j.xhr=function(a,b,c){var d=new XMLHttpRequest;if(arguments.length<3){c=b;b=null}else b&&d.overrideMimeType&&d.overrideMimeType(b);d.open("GET",a,true);b&&d.setRequestHeader("Accept",b);d.onreadystatechange=function(){d.readyState===4&&c(d.status<300?d:null)};d.send(null)};j.text=function(a,b,c){if(arguments.length<3){c=b;b=null}j.xhr(a,b,function(a){c(a&&a.responseText)})};j.json=function(a,b){j.text(a,"application/json",function(a){b(a?ea.parse(a):null)})};j.html=function(a,b){j.text(a,"text/html",
function(a){if(a!=null){var d=document.createRange();d.selectNode(document.body);a=d.createContextualFragment(a)}b(a)})};j.xml=function(a,b,c){if(arguments.length<3){c=b;b=null}j.xhr(a,b,function(a){c(a&&a.responseXML)})};var fd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",vml:"urn:schemas-microsoft-com:vml"};j.ns={prefix:fd,qualify:function(a){var b=a.indexOf(":"),
c=a;if(b>=0){c=a.substring(0,b);a=a.substring(b+1)}return fd.hasOwnProperty(c)?{space:fd[c],local:a}:a}};j.dispatch=function(){for(var a=new Vd,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=Kf(a);return a};Vd.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(c>0){d=a.substring(c+1);a=a.substring(0,c)}return arguments.length<2?this[a].on(d):this[a].on(d,b)};j.format=function(a){var a=cg.exec(a),b=a[1]||" ",c=a[3]||"",d=a[5],e=+a[6],f=a[7],g=a[8],i=a[9],m=1,Q="",h=false;g&&(g=+g.substring(1));
if(d){b="0";f&&(e=e-Math.floor((e-1)/4))}switch(i){case "n":f=true;i="g";break;case "%":m=100;Q="%";i="f";break;case "p":m=100;Q="%";i="r";break;case "d":h=true;g=0;break;case "s":m=-1;i="r"}i=="r"&&!g&&(i="g");i=dg.get(i)||Lf;return function(a){if(h&&a%1)return"";var k=a<0&&(a=-a)?"\u2212":c;if(m<0){var p=j.formatPrefix(a,g),a=a*p.scale;Q=p.symbol}else a=a*m;a=i(a,g);if(d){p=a.length+k.length;p<e&&(a=Array(e-p+1).join(b)+a);f&&(a=Xd(a));a=k+a}else{f&&(a=Xd(a));a=k+a;p=a.length;p<e&&(a=Array(e-p+
1).join(b)+a)}return a+Q}};var cg=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,dg=j.map({g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return j.round(a,b=Wd(a,b)).toFixed(Math.max(0,Math.min(20,b)))}}),eg=rc("y z a f p n \u03bc m  k M G T P E Z Y".split(" "),function(a,b){return{scale:Math.pow(10,(8-b)*3),symbol:a}});j.formatPrefix=function(a,b){var c=0;if(a){a<0&&(a=a*-1);b&&
(a=j.round(a,Wd(a,b)));c=1+Math.floor(1E-12+Math.log(a)/Math.LN10);c=Math.max(-24,Math.min(24,Math.floor((c<=0?c+1:c-1)/3)*3))}return eg[8+c/3]};var fg=Qc(2),hg=Qc(3),ve=function(){return Pc},ig=j.map({linear:ve,poly:Qc,quad:function(){return fg},cubic:function(){return hg},sin:function(){return Mf},exp:function(){return Nf},circle:function(){return Of},elastic:function(a,b){var c;arguments.length<2&&(b=0.45);if(arguments.length<1){a=1;c=b/4}else c=b/(2*Math.PI)*Math.asin(1/a);return function(d){return 1+
a*Math.pow(2,10*-d)*Math.sin((d-c)*2*Math.PI/b)}},back:function(a){a||(a=1.70158);return function(b){return b*b*((a+1)*b-a)}},bounce:function(){return Pf}}),jg=j.map({"in":Pc,out:Yd,"in-out":Zd,"out-in":function(a){return Zd(Yd(a))}});j.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.substring(0,b):a,b=b>=0?a.substring(b+1):"in",c=ig.get(c)||ve,b=jg.get(b)||Pc,d=b(c.apply(null,Array.prototype.slice.call(arguments,1)));return function(a){return a<=0?0:a>=1?1:d(a)}};j.event=null;j.interpolate=function(a,
b){for(var c=j.interpolators.length,d;--c>=0&&!(d=j.interpolators[c](a,b)););return d};j.interpolateNumber=function(a,b){b=b-a;return function(c){return a+b*c}};j.interpolateRound=function(a,b){b=b-a;return function(c){return Math.round(a+b*c)}};j.interpolateString=function(a,b){var c,d,e=0,f=[],g=[],i,m;for(d=sc.lastIndex=0;c=sc.exec(b);++d){c.index&&f.push(b.substring(e,c.index));g.push({i:f.length,x:c[0]});f.push(null);e=sc.lastIndex}e<b.length&&f.push(b.substring(e));d=0;for(i=g.length;(c=sc.exec(a))&&
d<i;++d){m=g[d];if(m.x==c[0]){if(m.i)if(f[m.i+1]==null){f[m.i-1]=f[m.i-1]+m.x;f.splice(m.i,1);for(c=d+1;c<i;++c)g[c].i--}else{f[m.i-1]=f[m.i-1]+(m.x+f[m.i+1]);f.splice(m.i,2);for(c=d+1;c<i;++c)g[c].i=g[c].i-2}else if(f[m.i+1]==null)f[m.i]=m.x;else{f[m.i]=m.x+f[m.i+1];f.splice(m.i+1,1);for(c=d+1;c<i;++c)g[c].i--}g.splice(d,1);i--;d--}else m.x=j.interpolateNumber(parseFloat(c[0]),parseFloat(m.x))}for(;d<i;){m=g.pop();if(f[m.i+1]==null)f[m.i]=m.x;else{f[m.i]=m.x+f[m.i+1];f.splice(m.i+1,1)}i--}return f.length===
1?f[0]==null?g[0].x:function(){return b}:function(a){for(d=0;d<i;++d)f[(m=g[d]).i]=m.x(a);return f.join("")}};j.interpolateTransform=function(a,b){var c=[],d=[],e,f=j.transform(a),g=j.transform(b),i=f.translate,m=g.translate,h=f.rotate,P=g.rotate,n=f.skew,k=g.skew,f=f.scale,g=g.scale;if(i[0]!=m[0]||i[1]!=m[1]){c.push("translate(",null,",",null,")");d.push({i:1,x:j.interpolateNumber(i[0],m[0])},{i:3,x:j.interpolateNumber(i[1],m[1])})}else m[0]||m[1]?c.push("translate("+m+")"):c.push("");h!=P?d.push({i:c.push(c.pop()+
"rotate(",null,")")-2,x:j.interpolateNumber(h,P)}):P&&c.push(c.pop()+"rotate("+P+")");n!=k?d.push({i:c.push(c.pop()+"skewX(",null,")")-2,x:j.interpolateNumber(n,k)}):k&&c.push(c.pop()+"skewX("+k+")");if(f[0]!=g[0]||f[1]!=g[1]){e=c.push(c.pop()+"scale(",null,",",null,")");d.push({i:e-4,x:j.interpolateNumber(f[0],g[0])},{i:e-2,x:j.interpolateNumber(f[1],g[1])})}else(g[0]!=1||g[1]!=1)&&c.push(c.pop()+"scale("+g+")");e=d.length;return function(a){for(var b=-1,f;++b<e;)c[(f=d[b]).i]=f.x(a);return c.join("")}};
j.interpolateRgb=function(a,b){var a=j.rgb(a),b=j.rgb(b),c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,i=b.b-e;return function(a){return"#"+Hb(Math.round(c+f*a))+Hb(Math.round(d+g*a))+Hb(Math.round(e+i*a))}};j.interpolateHsl=function(a,b){var a=j.hsl(a),b=j.hsl(b),c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,i=b.l-e;return function(a){return lc(c+f*a,d+g*a,e+i*a).toString()}};j.interpolateArray=function(a,b){var c=[],d=[],e=a.length,f=b.length,g=Math.min(a.length,b.length),i;for(i=0;i<g;++i)c.push(j.interpolate(a[i],b[i]));
for(;i<e;++i)d[i]=a[i];for(;i<f;++i)d[i]=b[i];return function(a){for(i=0;i<g;++i)d[i]=c[i](a);return d}};j.interpolateObject=function(a,b){var c={},d={},e;for(e in a)e in b?c[e]=(e=="transform"?j.interpolateTransform:j.interpolate)(a[e],b[e]):d[e]=a[e];for(e in b)e in a||(d[e]=b[e]);return function(a){for(e in c)d[e]=c[e](a);return d}};var sc=/[-+]?(?:\d*\.?\d+)(?:[eE][-+]?\d+)?/g;j.interpolators=[j.interpolateObject,function(a,b){return b instanceof Array&&j.interpolateArray(a,b)},function(a,b){return(typeof a===
"string"||typeof b==="string")&&j.interpolateString(a+"",b+"")},function(a,b){return(typeof b==="string"?kc.has(b)||/^(#|rgb\(|hsl\()/.test(b):b instanceof qb||b instanceof rb)&&j.interpolateRgb(a,b)},function(a,b){return!isNaN(a=+a)&&!isNaN(b=+b)&&j.interpolateNumber(a,b)}];j.rgb=function(a,b,c){return arguments.length===1?a instanceof qb?eb(a.r,a.g,a.b):Rc(""+a,eb,lc):eb(~~a,~~b,~~c)};qb.prototype.brighter=function(a){var a=Math.pow(0.7,arguments.length?a:1),b=this.r,c=this.g,d=this.b;if(!b&&!c&&
!d)return eb(30,30,30);b&&b<30&&(b=30);c&&c<30&&(c=30);d&&d<30&&(d=30);return eb(Math.min(255,Math.floor(b/a)),Math.min(255,Math.floor(c/a)),Math.min(255,Math.floor(d/a)))};qb.prototype.darker=function(a){a=Math.pow(0.7,arguments.length?a:1);return eb(Math.floor(a*this.r),Math.floor(a*this.g),Math.floor(a*this.b))};qb.prototype.hsl=function(){return $d(this.r,this.g,this.b)};qb.prototype.toString=function(){return"#"+Hb(this.r)+Hb(this.g)+Hb(this.b)};var kc=j.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",
aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",
darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",
gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",
lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",
navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",
silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});kc.forEach(function(a,b){kc.set(a,Rc(b,eb,lc))});j.hsl=function(a,b,c){return arguments.length===1?a instanceof rb?Ib(a.h,a.s,a.l):Rc(""+a,$d,Ib):Ib(+a,+b,
+c)};rb.prototype.brighter=function(a){a=Math.pow(0.7,arguments.length?a:1);return Ib(this.h,this.s,this.l/a)};rb.prototype.darker=function(a){a=Math.pow(0.7,arguments.length?a:1);return Ib(this.h,this.s,a*this.l)};rb.prototype.rgb=function(){return lc(this.h,this.s,this.l)};rb.prototype.toString=function(){return this.rgb().toString()};j.csv=function(a,b){j.text(a,"text/csv",function(a){b(a&&j.csv.parse(a))})};j.csv.parse=function(a){var b;return j.csv.parseRows(a,function(a,d){if(d){for(var e={},
f=-1,g=b.length;++f<g;)e[b[f]]=f<a.length?a[f]:null;return e}b=a;return null})};j.csv.parseRows=function(a,b){function c(){if(g.lastIndex>=a.length)return e;if(h){h=false;return d}var b=g.lastIndex;if(a.charCodeAt(b)===34){for(var c=b;c++<a.length;)if(a.charCodeAt(c)===34){if(a.charCodeAt(c+1)!==34)break;c++}g.lastIndex=c+2;var f=a.charCodeAt(c+1);if(f===13){h=true;a.charCodeAt(c+2)===10&&g.lastIndex++}else f===10&&(h=true);return a.substring(b+1,c).replace(/""/g,'"')}if(c=g.exec(a)){h=c[0].charCodeAt(0)!==
44;return a.substring(b,c.index)}g.lastIndex=a.length;return a.substring(b)}var d={},e={},f=[],g=/\r\n|[,\r\n]/g,i=0,m,h;for(g.lastIndex=0;(m=c())!==e;){for(var P=[];m!==d&&m!==e;){P.push(m);m=c()}(!b||(P=b(P,i++)))&&f.push(P)}return f};j.csv.format=function(a){return a.map(Sf).join("\n")};j.scale={};j.scale.linear=function(){return ae([0,1],[0,1],j.interpolate,false)};j.scale.log=function(){return ee(j.scale.linear(),Xc)};var Xf=j.format(".0e");Xc.pow=function(a){return Math.pow(10,a)};mc.pow=function(a){return-Math.pow(10,
-a)};j.scale.pow=function(){return fe(j.scale.linear(),1)};j.scale.sqrt=function(){return j.scale.pow().exponent(0.5)};j.scale.ordinal=function(){return ge([],{t:"range",x:[]})};j.scale.category10=function(){return j.scale.ordinal().range(kg)};j.scale.category20=function(){return j.scale.ordinal().range(lg)};j.scale.category20b=function(){return j.scale.ordinal().range(mg)};j.scale.category20c=function(){return j.scale.ordinal().range(ng)};var kg="#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" "),
lg="#1f77b4 #aec7e8 #ff7f0e #ffbb78 #2ca02c #98df8a #d62728 #ff9896 #9467bd #c5b0d5 #8c564b #c49c94 #e377c2 #f7b6d2 #7f7f7f #c7c7c7 #bcbd22 #dbdb8d #17becf #9edae5".split(" "),mg="#393b79 #5254a3 #6b6ecf #9c9ede #637939 #8ca252 #b5cf6b #cedb9c #8c6d31 #bd9e39 #e7ba52 #e7cb94 #843c39 #ad494a #d6616b #e7969c #7b4173 #a55194 #ce6dbd #de9ed6".split(" "),ng="#3182bd #6baed6 #9ecae1 #c6dbef #e6550d #fd8d3c #fdae6b #fdd0a2 #31a354 #74c476 #a1d99b #c7e9c0 #756bb1 #9e9ac8 #bcbddc #dadaeb #636363 #969696 #bdbdbd #d9d9d9".split(" ");
j.scale.quantile=function(){return he([],[])};j.scale.quantize=function(){return ie(0,1,[0,1])};j.scale.identity=function(){return je([0,1])};j.time={};var da=Date;sb.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},
getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Va.setUTCDate.apply(this._,arguments)},setDay:function(){Va.setUTCDay.apply(this._,arguments)},setFullYear:function(){Va.setUTCFullYear.apply(this._,arguments)},setHours:function(){Va.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Va.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Va.setUTCMinutes.apply(this._,
arguments)},setMonth:function(){Va.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Va.setUTCSeconds.apply(this._,arguments)},setTime:function(){Va.setTime.apply(this._,arguments)}};var Va=Date.prototype;j.time.format=function(a){function b(b){for(var e=[],f=-1,g=0,i,m;++f<c;)if(a.charCodeAt(f)==37){e.push(a.substring(g,f),(m=tc[i=a.charAt(++f)])?m(b):i);g=f+1}e.push(a.substring(g,f));return e.join("")}var c=a.length;b.parse=function(b){var c={y:1900,m:0,d:1,H:0,M:0,S:0,L:0};if(oc(c,a,b,
0)!=b.length)return null;if("p"in c)c.H=c.H%12+c.p*12;b=new da;b.setFullYear(c.y,c.m,c.d);b.setHours(c.H,c.M,c.S,c.L);return b};b.toString=function(){return a};return b};var Ja=j.format("02d"),we=j.format("03d"),og=j.format("04d"),pg=j.format("2d"),tc={a:function(a){return gd[a.getDay()].substring(0,3)},A:function(a){return gd[a.getDay()]},b:function(a){return xe[a.getMonth()].substring(0,3)},B:function(a){return xe[a.getMonth()]},c:j.time.format("%a %b %e %H:%M:%S %Y"),d:function(a){return Ja(a.getDate())},
e:function(a){return pg(a.getDate())},H:function(a){return Ja(a.getHours())},I:function(a){return Ja(a.getHours()%12||12)},j:function(a){return we(1+j.time.dayOfYear(a))},L:function(a){return we(a.getMilliseconds())},m:function(a){return Ja(a.getMonth()+1)},M:function(a){return Ja(a.getMinutes())},p:function(a){return a.getHours()>=12?"PM":"AM"},S:function(a){return Ja(a.getSeconds())},U:function(a){return Ja(j.time.sundayOfYear(a))},w:function(a){return a.getDay()},W:function(a){return Ja(j.time.mondayOfYear(a))},
x:j.time.format("%m/%d/%y"),X:j.time.format("%H:%M:%S"),y:function(a){return Ja(a.getFullYear()%100)},Y:function(a){return og(a.getFullYear()%1E4)},Z:function(a){var b=a.getTimezoneOffset(),a=b>0?"-":"+",c=~~(Math.abs(b)/60),b=Math.abs(b)%60;return a+Ja(c)+Ja(b)},"%":function(){return"%"}},Yf={a:function(a,b,c){return qg.test(b.substring(c,c=c+3))?c:-1},A:function(a,b,c){ye.lastIndex=0;return(a=ye.exec(b.substring(c,c+10)))?c+a[0].length:-1},b:function(a,b,c){b=rg.get(b.substring(c,c=c+3).toLowerCase());
return b==null?-1:(a.m=b,c)},B:function(a,b,c){ze.lastIndex=0;return(b=ze.exec(b.substring(c,c+12)))?(a.m=sg.get(b[0].toLowerCase()),c+b[0].length):-1},c:function(a,b,c){return oc(a,tc.c.toString(),b,c)},d:ke,e:ke,H:le,I:le,L:function(a,b,c){ma.lastIndex=0;return(b=ma.exec(b.substring(c,c+3)))?(a.L=+b[0],c+b[0].length):-1},m:function(a,b,c){ma.lastIndex=0;return(b=ma.exec(b.substring(c,c+2)))?(a.m=b[0]-1,c+b[0].length):-1},M:function(a,b,c){ma.lastIndex=0;return(b=ma.exec(b.substring(c,c+2)))?(a.M=
+b[0],c+b[0].length):-1},p:function(a,b,c){b=tg.get(b.substring(c,c=c+2).toLowerCase());return b==null?-1:(a.p=b,c)},S:function(a,b,c){ma.lastIndex=0;return(b=ma.exec(b.substring(c,c+2)))?(a.S=+b[0],c+b[0].length):-1},x:function(a,b,c){return oc(a,tc.x.toString(),b,c)},X:function(a,b,c){return oc(a,tc.X.toString(),b,c)},y:function(a,b,c){ma.lastIndex=0;return(b=ma.exec(b.substring(c,c+2)))?(a.y=~~((new Date).getFullYear()/1E3)*1E3+ +b[0],c+b[0].length):-1},Y:function(a,b,c){ma.lastIndex=0;return(b=
ma.exec(b.substring(c,c+4)))?(a.y=+b[0],c+b[0].length):-1}},qg=/^(?:sun|mon|tue|wed|thu|fri|sat)/i,ye=/^(?:Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)/i,gd="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),rg=j.map({jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11}),ze=/^(?:January|February|March|April|May|June|July|August|September|October|November|December)/ig,sg=j.map({january:0,february:1,march:2,april:3,may:4,june:5,july:6,august:7,september:8,
october:9,november:10,december:11}),xe="January February March April May June July August September October November December".split(" "),ma=/\s*\d+/,tg=j.map({am:0,pm:1});j.time.format.utc=function(a){function b(a){try{da=sb;var b=new da;b._=a;return c(b)}finally{da=Date}}var c=j.time.format(a);b.parse=function(a){try{da=sb;var b=c.parse(a);return b&&b._}finally{da=Date}};b.toString=c.toString;return b};var Ae=j.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");j.time.format.iso=Date.prototype.toISOString?
Yc:Ae;Yc.parse=function(a){return new Date(a)};Yc.toString=Ae.toString;j.time.second=tb(function(a){return new da(Math.floor(a/1E3)*1E3)},function(a,b){a.setTime(a.getTime()+Math.floor(b)*1E3)},function(a){return a.getSeconds()});j.time.seconds=j.time.second.range;j.time.seconds.utc=j.time.second.utc.range;j.time.minute=tb(function(a){return new da(Math.floor(a/6E4)*6E4)},function(a,b){a.setTime(a.getTime()+Math.floor(b)*6E4)},function(a){return a.getMinutes()});j.time.minutes=j.time.minute.range;
j.time.minutes.utc=j.time.minute.utc.range;j.time.hour=tb(function(a){var b=a.getTimezoneOffset()/60;return new da((Math.floor(a/36E5-b)+b)*36E5)},function(a,b){a.setTime(a.getTime()+Math.floor(b)*36E5)},function(a){return a.getHours()});j.time.hours=j.time.hour.range;j.time.hours.utc=j.time.hour.utc.range;j.time.day=tb(function(a){return new da(a.getFullYear(),a.getMonth(),a.getDate())},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1});j.time.days=j.time.day.range;j.time.days.utc=
j.time.day.utc.range;j.time.dayOfYear=function(a){var b=j.time.year(a);return Math.floor((a-b)/864E5-(a.getTimezoneOffset()-b.getTimezoneOffset())/1440)};cd(gd,function(a,b){var a=a.toLowerCase(),b=7-b,c=j.time[a]=tb(function(a){(a=j.time.day(a)).setDate(a.getDate()-(a.getDay()+b)%7);return a},function(a,b){a.setDate(a.getDate()+Math.floor(b)*7)},function(a){var c=j.time.year(a).getDay();return Math.floor((j.time.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});j.time[a+"s"]=c.range;j.time[a+"s"].utc=c.utc.range;
j.time[a+"OfYear"]=function(a){var c=j.time.year(a).getDay();return Math.floor((j.time.dayOfYear(a)+(c+b)%7)/7)}});j.time.week=j.time.sunday;j.time.weeks=j.time.sunday.range;j.time.weeks.utc=j.time.sunday.utc.range;j.time.weekOfYear=j.time.sundayOfYear;j.time.month=tb(function(a){return new da(a.getFullYear(),a.getMonth(),1)},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});j.time.months=j.time.month.range;j.time.months.utc=j.time.month.utc.range;j.time.year=tb(function(a){return new da(a.getFullYear(),
0,1)},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()});j.time.years=j.time.year.range;j.time.years.utc=j.time.year.utc.range;var qc=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],hd=[[j.time.second,1],[j.time.second,5],[j.time.second,15],[j.time.second,30],[j.time.minute,1],[j.time.minute,5],[j.time.minute,15],[j.time.minute,30],[j.time.hour,1],[j.time.hour,3],[j.time.hour,6],[j.time.hour,12],[j.time.day,1],
[j.time.day,2],[j.time.week,1],[j.time.month,1],[j.time.month,3],[j.time.year,1]],ug=[[j.time.format("%Y"),function(){return true}],[j.time.format("%B"),function(a){return a.getMonth()}],[j.time.format("%b %d"),function(a){return a.getDate()!=1}],[j.time.format("%a %d"),function(a){return a.getDay()&&a.getDate()!=1}],[j.time.format("%I %p"),function(a){return a.getHours()}],[j.time.format("%I:%M"),function(a){return a.getMinutes()}],[j.time.format(":%S"),function(a){return a.getSeconds()}],[j.time.format(".%L"),
function(a){return a.getMilliseconds()}]],Be=j.scale.linear(),vg=ne(ug);hd.year=function(a,b){return Be.domain(a.map(Zf)).ticks(b).map(ad)};j.time.scale=function(){return Zc(j.scale.linear(),hd,vg)};var Ce=rc(hd,function(a){return[a[0].utc,a[1]]}),wg=[[j.time.format.utc("%Y"),function(){return true}],[j.time.format.utc("%B"),function(a){return a.getUTCMonth()}],[j.time.format.utc("%b %d"),function(a){return a.getUTCDate()!=1}],[j.time.format.utc("%a %d"),function(a){return a.getUTCDay()&&a.getUTCDate()!=
1}],[j.time.format.utc("%I %p"),function(a){return a.getUTCHours()}],[j.time.format.utc("%I:%M"),function(a){return a.getUTCMinutes()}],[j.time.format.utc(":%S"),function(a){return a.getUTCSeconds()}],[j.time.format.utc(".%L"),function(a){return a.getUTCMilliseconds()}]],xg=ne(wg);Ce.year=function(a,b){return Be.domain(a.map($f)).ticks(b).map(bd)};j.time.scale.utc=function(){return Zc(j.scale.linear(),Ce,xg)};(function(){function a(b,c,d){if(b===c)return b!==0||1/b==1/c;if(b==null||c==null)return b===
c;if(b._chain)b=b._wrapped;if(c._chain)c=c._wrapped;if(b.isEqual&&q.isFunction(b.isEqual))return b.isEqual(c);if(c.isEqual&&q.isFunction(c.isEqual))return c.isEqual(b);var e=m.call(b);if(e!=m.call(c))return false;switch(e){case "[object String]":return b==String(c);case "[object Number]":return b!=+b?c!=+c:b==0?1/b==1/c:b==+c;case "[object Date]":case "[object Boolean]":return+b==+c;case "[object RegExp]":return b.source==c.source&&b.global==c.global&&b.multiline==c.multiline&&b.ignoreCase==c.ignoreCase}if(typeof b!=
"object"||typeof c!="object")return false;for(var f=d.length;f--;)if(d[f]==b)return true;d.push(b);var f=0,g=true;if(e=="[object Array]"){f=b.length;if(g=f==c.length)for(;f--;)if(!(g=f in b==f in c&&a(b[f],c[f],d)))break}else{if("constructor"in b!="constructor"in c||b.constructor!=c.constructor)return false;for(var i in b)if(q.has(b,i)){f++;if(!(g=q.has(c,i)&&a(b[i],c[i],d)))break}if(g){for(i in c)if(q.has(c,i)&&!f--)break;g=!f}}d.pop();return g}var b=this,c=b._,d={},e=Array.prototype,f=Object.prototype,
g=e.slice,i=e.unshift,m=f.toString,h=f.hasOwnProperty,P=e.forEach,n=e.map,j=e.reduce,k=e.reduceRight,l=e.filter,s=e.every,L=e.some,v=e.indexOf,w=e.lastIndexOf,f=Array.isArray,o=Object.keys,t=Function.prototype.bind,q=function(a){return new E(a)};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)exports=module.exports=q;exports._=q}else b._=q;q.VERSION="1.3.1";var r=q.each=q.forEach=function(a,b,c){if(a!=null)if(P&&a.forEach===P)a.forEach(b,c);else if(a.length===+a.length)for(var e=
0,f=a.length;e<f;e++){if(e in a&&b.call(c,a[e],e,a)===d)break}else for(e in a)if(q.has(a,e)&&b.call(c,a[e],e,a)===d)break};q.map=q.collect=function(a,b,c){var d=[];if(a==null)return d;if(n&&a.map===n)return a.map(b,c);r(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)});if(a.length===+a.length)d.length=a.length;return d};q.reduce=q.foldl=q.inject=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(j&&a.reduce===j){d&&(b=q.bind(b,d));return e?a.reduce(b,c):a.reduce(b)}r(a,function(a,f,g){if(e)c=
b.call(d,c,a,f,g);else{c=a;e=true}});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c};q.reduceRight=q.foldr=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(k&&a.reduceRight===k){d&&(b=q.bind(b,d));return e?a.reduceRight(b,c):a.reduceRight(b)}var f=q.toArray(a).reverse();d&&!e&&(b=q.bind(b,d));return e?q.reduce(f,b,c,d):q.reduce(f,b)};q.find=q.detect=function(a,b,c){var d;u(a,function(a,e,f){if(b.call(c,a,e,f)){d=a;return true}});return d};q.filter=q.select=
function(a,b,c){var d=[];if(a==null)return d;if(l&&a.filter===l)return a.filter(b,c);r(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)});return d};q.reject=function(a,b,c){var d=[];if(a==null)return d;r(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)});return d};q.every=q.all=function(a,b,c){var e=true;if(a==null)return e;if(s&&a.every===s)return a.every(b,c);r(a,function(a,f,g){if(!(e=e&&b.call(c,a,f,g)))return d});return!!e};var u=q.some=q.any=function(a,b,c){b||(b=q.identity);var e=false;
if(a==null)return e;if(L&&a.some===L)return a.some(b,c);r(a,function(a,f,g){if(e||(e=b.call(c,a,f,g)))return d});return!!e};q.include=q.contains=function(a,b){var c=false;if(a==null)return c;if(v&&a.indexOf===v)return a.indexOf(b)!=-1;return c=u(a,function(a){return a===b})};q.invoke=function(a,b){var c=g.call(arguments,2);return q.map(a,function(a){return(q.isFunction(b)?b||a:a[b]).apply(a,c)})};q.pluck=function(a,b){return q.map(a,function(a){return a[b]})};q.max=function(a,b,c){if(!b&&q.isArray(a)&&
a[0]===+a[0])return Math.max.apply(Math,a);if(!b&&q.isEmpty(a))return-Infinity;var d={computed:-Infinity};r(a,function(a,e,f){e=b?b.call(c,a,e,f):a;e>=d.computed&&(d={value:a,computed:e})});return d.value};q.min=function(a,b,c){if(!b&&q.isArray(a)&&a[0]===+a[0])return Math.min.apply(Math,a);if(!b&&q.isEmpty(a))return Infinity;var d={computed:Infinity};r(a,function(a,e,f){e=b?b.call(c,a,e,f):a;e<d.computed&&(d={value:a,computed:e})});return d.value};q.shuffle=function(a){var b=[],c;r(a,function(a,
d){if(d==0)b[0]=a;else{c=Math.floor(Math.random()*(d+1));b[d]=b[c];b[c]=a}});return b};q.sortBy=function(a,b,c){return q.pluck(q.map(a,function(a,d,e){return{value:a,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),"value")};q.groupBy=function(a,b){var c={},d=q.isFunction(b)?b:function(a){return a[b]};r(a,function(a,b){var e=d(a,b);(c[e]||(c[e]=[])).push(a)});return c};q.sortedIndex=function(a,b,c){c||(c=q.identity);for(var d=0,e=a.length;d<e;){var f=
d+e>>1;c(a[f])<c(b)?d=f+1:e=f}return d};q.toArray=function(a){return!a?[]:a.toArray?a.toArray():q.isArray(a)||q.isArguments(a)?g.call(a):q.values(a)};q.size=function(a){return q.isArray(a)?a.length:q.keys(a).length};q.first=q.head=function(a,b,c){return b!=null&&!c?g.call(a,0,b):a[0]};q.initial=function(a,b,c){return g.call(a,0,a.length-(b==null||c?1:b))};q.last=function(a,b,c){return b!=null&&!c?g.call(a,Math.max(a.length-b,0)):a[a.length-1]};q.rest=q.tail=function(a,b,c){return g.call(a,b==null||
c?1:b)};q.compact=function(a){return q.filter(a,function(a){return!!a})};q.flatten=function(a,b){return q.reduce(a,function(a,c){if(q.isArray(c))return a.concat(b?c:q.flatten(c));a[a.length]=c;return a},[])};q.without=function(a){return q.difference(a,g.call(arguments,1))};q.uniq=q.unique=function(a,b,c){var c=c?q.map(a,c):a,d=[];a.length<3&&(b=true);q.reduce(c,function(c,e,f){if(b?q.last(c)!==e||!c.length:!q.include(c,e)){c.push(e);d.push(a[f])}return c},[]);return d};q.union=function(){return q.uniq(q.flatten(arguments,
true))};q.intersection=q.intersect=function(a){var b=g.call(arguments,1);return q.filter(q.uniq(a),function(a){return q.every(b,function(b){return q.indexOf(b,a)>=0})})};q.difference=function(a){var b=q.flatten(g.call(arguments,1),true);return q.filter(a,function(a){return!q.include(b,a)})};q.zip=function(){for(var a=g.call(arguments),b=q.max(q.pluck(a,"length")),c=Array(b),d=0;d<b;d++)c[d]=q.pluck(a,""+d);return c};q.indexOf=function(a,b,c){if(a==null)return-1;var d;if(c){c=q.sortedIndex(a,b);return a[c]===
b?c:-1}if(v&&a.indexOf===v)return a.indexOf(b);c=0;for(d=a.length;c<d;c++)if(c in a&&a[c]===b)return c;return-1};q.lastIndexOf=function(a,b){if(a==null)return-1;if(w&&a.lastIndexOf===w)return a.lastIndexOf(b);for(var c=a.length;c--;)if(c in a&&a[c]===b)return c;return-1};q.range=function(a,b,c){if(arguments.length<=1){b=a||0;a=0}for(var c=arguments[2]||1,d=Math.max(Math.ceil((b-a)/c),0),e=0,f=Array(d);e<d;){f[e++]=a;a=a+c}return f};var y=function(){};q.bind=function(a,b){var c,d;if(a.bind===t&&t)return t.apply(a,
g.call(arguments,1));if(!q.isFunction(a))throw new TypeError;d=g.call(arguments,2);return c=function(){if(!(this instanceof c))return a.apply(b,d.concat(g.call(arguments)));y.prototype=a.prototype;var e=new y,f=a.apply(e,d.concat(g.call(arguments)));return Object(f)===f?f:e}};q.bindAll=function(a){var b=g.call(arguments,1);b.length==0&&(b=q.functions(a));r(b,function(b){a[b]=q.bind(a[b],a)});return a};q.memoize=function(a,b){var c={};b||(b=q.identity);return function(){var d=b.apply(this,arguments);
return q.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}};q.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(a,c)},b)};q.defer=function(a){return q.delay.apply(q,[a,1].concat(g.call(arguments,1)))};q.throttle=function(a,b){var c,d,e,f,g,i=q.debounce(function(){g=f=false},b);return function(){c=this;d=arguments;e||(e=setTimeout(function(){e=null;g&&a.apply(c,d);i()},b));f?g=true:a.apply(c,d);i();f=true}};q.debounce=function(a,b,c){var d;return function(){var e=
this,f=arguments;c&&!d&&a.apply(e,f);clearTimeout(d);d=setTimeout(function(){d=null;c||a.apply(e,f)},b)}};q.once=function(a){var b=false,c;return function(){if(b)return c;b=true;return c=a.apply(this,arguments)}};q.wrap=function(a,b){return function(){var c=[a].concat(g.call(arguments,0));return b.apply(this,c)}};q.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}};q.after=function(a,b){return a<=0?b():function(){if(--a<
1)return b.apply(this,arguments)}};q.keys=o||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[],c;for(c in a)q.has(a,c)&&(b[b.length]=c);return b};q.values=function(a){return q.map(a,q.identity)};q.functions=q.methods=function(a){var b=[],c;for(c in a)q.isFunction(a[c])&&b.push(c);return b.sort()};q.extend=function(a){r(g.call(arguments,1),function(b){for(var c in b)a[c]=b[c]});return a};q.defaults=function(a){r(g.call(arguments,1),function(b){for(var c in b)a[c]==null&&(a[c]=
b[c])});return a};q.clone=function(a){return!q.isObject(a)?a:q.isArray(a)?a.slice():q.extend({},a)};q.tap=function(a,b){b(a);return a};q.isEqual=function(b,c){return a(b,c,[])};q.isEmpty=function(a){if(a==null)return true;if(q.isArray(a)||q.isString(a))return a.length===0;for(var b in a)if(q.has(a,b))return false;return true};q.isElement=function(a){return!!(a&&a.nodeType==1)};q.isArray=f||function(a){return m.call(a)=="[object Array]"};q.isObject=function(a){return a===Object(a)};q.isArguments=function(a){return m.call(a)==
"[object Arguments]"};if(!q.isArguments(arguments))q.isArguments=function(a){return!(!a||!q.has(a,"callee"))};q.isFunction=function(a){return m.call(a)=="[object Function]"};q.isString=function(a){return m.call(a)=="[object String]"};q.isNumber=function(a){return m.call(a)=="[object Number]"};q.isNaN=function(a){return a!==a};q.isBoolean=function(a){return a===true||a===false||m.call(a)=="[object Boolean]"};q.isDate=function(a){return m.call(a)=="[object Date]"};q.isRegExp=function(a){return m.call(a)==
"[object RegExp]"};q.isNull=function(a){return a===null};q.isUndefined=function(a){return a===void 0};q.has=function(a,b){return h.call(a,b)};q.noConflict=function(){b._=c;return this};q.identity=function(a){return a};q.times=function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)};q.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};q.result=function(a,b){if(a==null)return null;var c=a[b];
return q.isFunction(c)?c.call(a):c};q.mixin=function(a){r(q.functions(a),function(b){var c=q[b]=a[b];E.prototype[b]=function(){var a=g.call(arguments);i.call(a,this._wrapped);return W(c.apply(q,a),this._chain)}})};var A=0;q.uniqueId=function(a){var b=A++;return a?a+b:b};q.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/.^/,z={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},B;for(B in z)z[z[B]]=B;var D=/\\|'|\r|\n|\t|\u2028|\u2029/g,
G=/\\(\\|'|r|n|t|u2028|u2029)/g,F=function(a){return a.replace(G,function(a,b){return z[b]})};q.template=function(a,b){var c=q.templateSettings,c="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(D,function(a){return"\\"+z[a]}).replace(c.escape||C,function(a,b){return"',\n_.escape("+F(b)+"),\n'"}).replace(c.interpolate||C,function(a,b){return"',\n"+F(b)+",\n'"}).replace(c.evaluate||C,function(a,b){return"');\n"+F(b)+"\n;__p.push('"})+"');\n}\nreturn __p.join('');",
d=new Function("obj","_",c);if(b)return d(b,q);var e=function(a){return d.call(this,a,q)};e.source="function(obj){\n"+c+"\n}";return e};q.chain=function(a){return q(a).chain()};var E=function(a){this._wrapped=a};q.prototype=E.prototype;var W=function(a,b){return b?q(a).chain():a};q.mixin(q);r(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=e[a];E.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);var d=c.length;(a=="shift"||a=="splice")&&d===0&&delete c[0];
return W(c,this._chain)}});r(["concat","join","slice"],function(a){var b=e[a];E.prototype[a]=function(){return W(b.apply(this._wrapped,arguments),this._chain)}});E.prototype.chain=function(){this._chain=true;return this};E.prototype.value=function(){return this._wrapped}}).call(this);var De=String.prototype.trim,Ee=String.prototype.trimRight,Fe=String.prototype.trimLeft,Jb=function(a,b,c){for(var a=a+"",b=~~b,d=[];b>0;d[--b]=a);return d.join(c==null?"":c)},uc=function(a){return a!=null?"["+G.escapeRegExp(""+
a)+"]":"\\s"},vc={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},Ge={},id;for(id in vc)Ge[vc[id]]=id;var Vb,jd=function(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()},Wa=function(){Wa.cache.hasOwnProperty(arguments[0])||(Wa.cache[arguments[0]]=Wa.parse(arguments[0]));return Wa.format.call(null,Wa.cache[arguments[0]],arguments)};Wa.format=function(a,b){var c=1,d=a.length,e="",f=[],g,i,m,h;for(g=0;g<d;g++){e=jd(a[g]);if(e==="string")f.push(a[g]);else if(e==="array"){m=a[g];if(m[2]){e=
b[c];for(i=0;i<m[2].length;i++){if(!e.hasOwnProperty(m[2][i]))throw Error(Vb('[_.sprintf] property "%s" does not exist',m[2][i]));e=e[m[2][i]]}}else e=m[1]?b[m[1]]:b[c++];if(/[^s]/.test(m[8])&&jd(e)!="number")throw Error(Vb("[_.sprintf] expecting number but found %s",jd(e)));switch(m[8]){case "b":e=e.toString(2);break;case "c":e=String.fromCharCode(e);break;case "d":e=parseInt(e,10);break;case "e":e=m[7]?e.toExponential(m[7]):e.toExponential();break;case "f":e=m[7]?parseFloat(e).toFixed(m[7]):parseFloat(e);
break;case "o":e=e.toString(8);break;case "s":e=(e=String(e))&&m[7]?e.substring(0,m[7]):e;break;case "u":e=Math.abs(e);break;case "x":e=e.toString(16);break;case "X":e=e.toString(16).toUpperCase()}e=/[def]/.test(m[8])&&m[3]&&e>=0?"+"+e:e;i=m[4]?m[4]=="0"?"0":m[4].charAt(1):" ";h=m[6]-String(e).length;i=m[6]?Jb(i,h):"";f.push(m[5]?e+i:i+e)}}return f.join("")};Wa.cache={};Wa.parse=function(a){for(var b=[],c=[],d=0;a;){if((b=/^[^\x25]+/.exec(a))!==null)c.push(b[0]);else if((b=/^\x25{2}/.exec(a))!==null)c.push("%");
else if((b=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(a))!==null){if(b[2]){var d=d|1,e=[],f=b[2],g=[];if((g=/^([a-z_][a-z_\d]*)/i.exec(f))!==null)for(e.push(g[1]);(f=f.substring(g[0].length))!=="";)if((g=/^\.([a-z_][a-z_\d]*)/i.exec(f))!==null)e.push(g[1]);else if((g=/^\[(\d+)\]/.exec(f))!==null)e.push(g[1]);else throw Error("[_.sprintf] huh?");else throw Error("[_.sprintf] huh?");b[2]=e}else d=d|2;if(d===3)throw Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");
c.push(b)}else throw Error("[_.sprintf] huh?");a=a.substring(b[0].length)}return c};Vb=Wa;var G={VERSION:"2.2.0rc",isBlank:function(a){return/^\s*$/.test(a)},stripTags:function(a){return(""+a).replace(/<\/?[^>]+>/g,"")},capitalize:function(a){a=a+"";return a.charAt(0).toUpperCase()+a.substring(1)},chop:function(a,b){for(var a=a+"",b=~~b||a.length,c=[],d=0;d<a.length;d=d+b)c.push(a.slice(d,d+b));return c},clean:function(a){return G.strip(a).replace(/\s+/g," ")},count:function(a,b){return(a+"").split(b+
"").length-1},chars:function(a){return(""+a).split("")},escapeHTML:function(a){return(""+a).replace(/[&<>"']/g,function(a){return"&"+Ge[a]+";"})},unescapeHTML:function(a){return(""+a).replace(/\&([^;]+);/g,function(a,c){var d;return c in vc?vc[c]:(d=c.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(d[1],16)):(d=c.match(/^#(\d+)$/))?String.fromCharCode(~~d[1]):a})},escapeRegExp:function(a){return a.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},insert:function(a,b,c){a=G.chars(a);a.splice(~~b,
0,""+c);return a.join("")},include:function(a,b){return!!~(""+a).indexOf(b)},join:function(){var a=Array.prototype.slice.call(arguments);return a.join(a.shift())},lines:function(a){return(""+a).split("\n")},reverse:function(a){return G.chars(a).reverse().join("")},splice:function(a,b,c,d){a=G.chars(a);a.splice(~~b,~~c,d);return a.join("")},startsWith:function(a,b){a=a+"";b=b+"";return a.length>=b.length&&a.substring(0,b.length)===b},endsWith:function(a,b){a=a+"";b=b+"";return a.length>=b.length&&
a.substring(a.length-b.length)===b},succ:function(a){var a=a+"",b=G.chars(a);b.splice(a.length-1,1,String.fromCharCode(a.charCodeAt(a.length-1)+1));return b.join("")},titleize:function(a){return(""+a).replace(/\b./g,function(a){return a.toUpperCase()})},camelize:function(a){return G.trim(a).replace(/[-_\s]+(.)?/g,function(a,c){return c&&c.toUpperCase()})},underscored:function(a){return G.trim(a).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(a){return G.trim(a).replace(/[_\s]+/g,
"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase()},classify:function(a){return G.titleize((a+"").replace(/_/g," ")).replace(/\s/g,"")},humanize:function(a){return G.capitalize(this.underscored(a).replace(/_id$/,"").replace(/_/g," "))},trim:function(a,b){a=a+"";if(!b&&De)return De.call(a);b=uc(b);return a.replace(RegExp("^"+b+"+|"+b+"+$","g"),"")},ltrim:function(a,b){a=a+"";if(!b&&Fe)return Fe.call(a);b=uc(b);return a.replace(RegExp("^"+b+"+"),"")},rtrim:function(a,b){a=a+"";if(!b&&Ee)return Ee.call(a);
b=uc(b);return a.replace(RegExp(b+"+$"),"")},truncate:function(a,b,c){a=a+"";b=~~b;return a.length>b?a.slice(0,b)+(c||"..."):a},prune:function(a,b,c){var a=a+"",b=~~b,c=c!=null?""+c:"...",d,e=a.replace(/\W/g,function(a){return a.toUpperCase()!==a.toLowerCase()?"A":" "});d=e.charAt(b);b=e.slice(0,b);d&&d.match(/\S/)&&(b=b.replace(/\s\S+$/,""));b=G.rtrim(b);return(b+c).length>a.length?a:a.substring(0,b.length)+c},words:function(a,b){return G.trim(a,b).split(b||/\s+/)},pad:function(a,b,c,d){var a=a+
"",e=0,b=~~b;c?c.length>1&&(c=c.charAt(0)):c=" ";switch(d){case "right":e=b-a.length;return a+Jb(c,e);case "both":e=b-a.length;return Jb(c,Math.ceil(e/2))+a+Jb(c,Math.floor(e/2));default:e=b-a.length;return Jb(c,e)+a}},lpad:function(a,b,c){return G.pad(a,b,c)},rpad:function(a,b,c){return G.pad(a,b,c,"right")},lrpad:function(a,b,c){return G.pad(a,b,c,"both")},sprintf:Vb,vsprintf:function(a,b){b.unshift(a);return Vb.apply(null,b)},toNumber:function(a,b){var a=a+"",c;c=(a*1||0).toFixed(~~b)*1||0;return c===
0&&!a.match(/^0+$/)?Number.NaN:c},strRight:function(a,b){var a=a+"",b=b!=null?""+b:b,c=!b?-1:a.indexOf(b);return~c?a.slice(c+b.length,a.length):a},strRightBack:function(a,b){var a=a+"",b=b!=null?""+b:b,c=!b?-1:a.lastIndexOf(b);return~c?a.slice(c+b.length,a.length):a},strLeft:function(a,b){var a=a+"",b=b!=null?""+b:b,c=!b?-1:a.indexOf(b);return~c?a.slice(0,c):a},strLeftBack:function(a,b){var a=a+"",c=a.lastIndexOf(b!=null?""+b:b);return~c?a.slice(0,c):a},toSentence:function(a,b,c){b||(b=", ");c||(c=
" and ");for(var d=a.length,e="",f=0;f<d;f++){e=e+a[f];f===d-2?e=e+c:f<d-1&&(e=e+b)}return e},slugify:function(a){var b=RegExp(uc("\u0105\u00e0\u00e1\u00e4\u00e2\u00e3\u0107\u0119\u00e8\u00e9\u00eb\u00ea\u00ec\u00ed\u00ef\u00ee\u0142\u0144\u00f2\u00f3\u00f6\u00f4\u00f5\u00f9\u00fa\u00fc\u00fb\u00f1\u00e7\u017c\u017a"),"g"),a=(""+a).toLowerCase(),a=a.replace(b,function(a){a="\u0105\u00e0\u00e1\u00e4\u00e2\u00e3\u0107\u0119\u00e8\u00e9\u00eb\u00ea\u00ec\u00ed\u00ef\u00ee\u0142\u0144\u00f2\u00f3\u00f6\u00f4\u00f5\u00f9\u00fa\u00fc\u00fb\u00f1\u00e7\u017c\u017a".indexOf(a);
return"aaaaaaceeeeeiiiilnooooouuuunczz".charAt(a)||"-"});return G.trim(a.replace(/[^\w\s-]/g,"").replace(/[-\s]+/g,"-"),"-")},exports:function(){var a={},b;for(b in this)this.hasOwnProperty(b)&&!~["include","contains","reverse"].indexOf(b)&&(a[b]=this[b]);return a},repeat:Jb};G.strip=G.trim;G.lstrip=G.ltrim;G.rstrip=G.rtrim;G.center=G.lrpad;G.rjust=G.lpad;G.ljust=G.rpad;G.contains=G.include;"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(module.exports=G),exports._s=G):
"function"===typeof define&&define.amd?define("underscore.string",function(){return G}):(this._=this._||{},this._.string=this._.str=G);!0;var kd=/[\.\/]/,yg=function(){},zg=function(a,b){return a-b},Wb,Xa,ld={n:{}},oa=function(a,b){var c=Xa,d=Array.prototype.slice.call(arguments,2),e=oa.listeners(a),f=0,g,i=[],m={},h=[],P=Wb;Wb=a;for(var n=Xa=0,j=e.length;n<j;n++)if("zIndex"in e[n]){i.push(e[n].zIndex);e[n].zIndex<0&&(m[e[n].zIndex]=e[n])}for(i.sort(zg);i[f]<0;){g=m[i[f++]];h.push(g.apply(b,d));if(Xa){Xa=
c;return h}}for(n=0;n<j;n++){g=e[n];if("zIndex"in g)if(g.zIndex==i[f]){h.push(g.apply(b,d));if(Xa)break;do{f++;(g=m[i[f]])&&h.push(g.apply(b,d));if(Xa)break}while(g)}else m[g.zIndex]=g;else{h.push(g.apply(b,d));if(Xa)break}}Xa=c;Wb=P;return h.length?h:null};oa.listeners=function(a){var a=a.split(kd),b=ld,c,d,e,f,g,i,m,h=[b],P=[];e=0;for(f=a.length;e<f;e++){m=[];g=0;for(i=h.length;g<i;g++){b=h[g].n;c=[b[a[e]],b["*"]];for(d=2;d--;)if(b=c[d]){m.push(b);P=P.concat(b.f||[])}}h=m}return P};oa.on=function(a,
b){for(var c=a.split(kd),d=ld,e=0,f=c.length;e<f;e++){d=d.n;!d[c[e]]&&(d[c[e]]={n:{}});d=d[c[e]]}d.f=d.f||[];e=0;for(f=d.f.length;e<f;e++)if(d.f[e]==b)return yg;d.f.push(b);return function(a){if(+a==+a)b.zIndex=+a}};oa.stop=function(){Xa=1};oa.nt=function(a){return a?RegExp("(?:\\.|\\/|^)"+a+"(?:\\.|\\/|$)").test(Wb):Wb};oa.off=oa.unbind=function(a,b){var c=a.split(kd),d,e,f,g,i,m,h=[ld];g=0;for(i=c.length;g<i;g++)for(m=0;m<h.length;m=m+(f.length-2)){f=[m,1];d=h[m].n;if(c[g]!="*")d[c[g]]&&f.push(d[c[g]]);
else for(e in d)d.hasOwnProperty(e)&&f.push(d[e]);h.splice.apply(h,f)}g=0;for(i=h.length;g<i;g++)for(d=h[g];d.n;){if(b){if(d.f){m=0;for(c=d.f.length;m<c;m++)if(d.f[m]==b){d.f.splice(m,1);break}!d.f.length&&delete d.f}for(e in d.n)if(d.n.hasOwnProperty(e)&&d.n[e].f){f=d.n[e].f;m=0;for(c=f.length;m<c;m++)if(f[m]==b){f.splice(m,1);break}!f.length&&delete d.n[e].f}}else{delete d.f;for(e in d.n)d.n.hasOwnProperty(e)&&d.n[e].f&&delete d.n[e].f}d=d.n}};oa.once=function(a,b){var c=function(){var d=b.apply(this,
arguments);oa.unbind(a,c);return d};return oa.on(a,c)};oa.version="0.3.4";oa.toString=function(){return"You are running Eve 0.3.4"};"undefined"!=typeof module&&module.exports?module.exports=oa:"undefined"!=typeof define?define("eve",[],function(){return oa}):this.eve=oa;a:{var l=function(a){if(l.is(a,"function"))return md?a():eve.on("raphael.DOMload",a);if(l.is(a,Aa))return l._engine.create[U](l,a.splice(0,3+l.is(a[0],fa))).add(a);var b=Array.prototype.slice.call(arguments,0);if(l.is(b[b.length-1],
"function")){var c=b.pop();return md?c.call(l._engine.create[U](l,b)):eve.on("raphael.DOMload",function(){c.call(l._engine.create[U](l,b))})}return l._engine.create[U](l,arguments)},nd=function(a){if(Object(a)!==a)return a;var b=new a.constructor,c;for(c in a)a[T](c)&&(b[c]=nd(a[c]));return b},Ka=function(a,b,c){function d(){var e=Array.prototype.slice.call(arguments,0),f=e.join("\u2400"),g=d.cache=d.cache||{},i=d.count=d.count||[];if(g[T](f)){a:for(var e=i,i=f,m=0,h=e.length;m<h;m++)if(e[m]===i){e.push(e.splice(m,
1)[0]);break a}return c?c(g[f]):g[f]}i.length>=1E3&&delete g[i.shift()];i.push(f);g[f]=a[U](b,e);return c?c(g[f]):g[f]}return d},wc=function(){return this.hex},He=function(a,b){for(var c=[],d=0,e=a.length;e-2*!b>d;d=d+2){var f=[{x:+a[d-2],y:+a[d-1]},{x:+a[d],y:+a[d+1]},{x:+a[d+2],y:+a[d+3]},{x:+a[d+4],y:+a[d+5]}];if(b)if(d)if(e-4==d)f[3]={x:+a[0],y:+a[1]};else{if(e-2==d){f[2]={x:+a[0],y:+a[1]};f[3]={x:+a[2],y:+a[3]}}}else f[0]={x:+a[e-2],y:+a[e-1]};else e-4==d?f[3]=f[2]:d||(f[0]={x:+a[d],y:+a[d+1]});
c.push(["C",(-f[0].x+6*f[1].x+f[2].x)/6,(-f[0].y+6*f[1].y+f[2].y)/6,(f[1].x+6*f[2].x-f[3].x)/6,(f[1].y+6*f[2].y-f[3].y)/6,f[2].x,f[2].y])}return c},Kb=function(a,b,c,d,e,f,g,i,m){m==null&&(m=1);for(var m=(m>1?1:m<0?0:m)/2,h=[-0.1252,0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],P=[0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],n=0,j=0;j<12;j++)var k=m*h[j]+m,l=k*(k*(-3*a+9*c-9*e+3*g)+6*a-12*c+6*e)-3*a+3*c,k=k*(k*(-3*b+9*d-
9*f+3*i)+6*b-12*d+6*f)-3*b+3*d,n=n+P[j]*D.sqrt(l*l+k*k);return m*n},Ag=function(a,b,c,d,e,f,g,i,m){if(!(m<0||Kb(a,b,c,d,e,f,g,i)<m)){var h=0.5,P=1-h,n;for(n=Kb(a,b,c,d,e,f,g,i,P);aa(n-m)>0.01;){h=h/2;P=P+(n<m?1:-1)*h;n=Kb(a,b,c,d,e,f,g,i,P)}return P}},od=function(a,b,c){for(var a=l._path2curve(a),b=l._path2curve(b),d,e,f,g,i,m,h,P,n,j,k=c?0:[],ia=0,s=a.length;ia<s;ia++){n=a[ia];if(n[0]=="M"){d=i=n[1];e=m=n[2]}else{if(n[0]=="C"){n=[d,e].concat(n.slice(1));d=n[6];e=n[7]}else{n=[d,e,d,e,i,m,i,m];d=i;
e=m}for(var L=0,v=b.length;L<v;L++){j=b[L];if(j[0]=="M"){f=h=j[1];g=P=j[2]}else{if(j[0]=="C"){j=[f,g].concat(j.slice(1));f=j[6];g=j[7]}else{j=[f,g,f,g,h,P,h,P];f=h;g=P}var w;var o=n,r=j;w=c;var q=l.bezierBBox(o),t=l.bezierBBox(r);if(l.isBBoxIntersect(q,t)){for(var q=Kb.apply(0,o),t=Kb.apply(0,r),q=~~(q/5),t=~~(t/5),u=[],y=[],A={},C=w?0:[],z=0;z<q+1;z++){var B=l.findDotsAtSegment.apply(l,o.concat(z/q));u.push({x:B.x,y:B.y,t:z/q})}for(z=0;z<t+1;z++){B=l.findDotsAtSegment.apply(l,r.concat(z/t));y.push({x:B.x,
y:B.y,t:z/t})}for(z=0;z<q;z++)for(o=0;o<t;o++){var D=u[z],E=u[z+1],r=y[o],B=y[o+1],F=aa(E.x-D.x)<0.001?"y":"x",G=aa(B.x-r.x)<0.001?"y":"x",W;b:{W=D.x;var H=D.y,I=E.x,J=E.y,K=r.x,M=r.y,N=B.x,O=B.y;if(!(V(W,I)<X(K,N)||X(W,I)>V(K,N)||V(H,J)<X(M,O)||X(H,J)>V(M,O))){var S=(W*J-H*I)*(K-N)-(W-I)*(K*O-M*N),T=(W*J-H*I)*(M-O)-(H-J)*(K*O-M*N),R=(W-I)*(M-O)-(H-J)*(K-N);if(R){var S=S/R,T=T/R,R=+S.toFixed(2),U=+T.toFixed(2);if(!(R<+X(W,I).toFixed(2)||R>+V(W,I).toFixed(2)||R<+X(K,N).toFixed(2)||R>+V(K,N).toFixed(2)||
U<+X(H,J).toFixed(2)||U>+V(H,J).toFixed(2)||U<+X(M,O).toFixed(2)||U>+V(M,O).toFixed(2))){W={x:S,y:T};break b}}}W=void 0}if(W&&A[W.x.toFixed(4)]!=W.y.toFixed(4)){A[W.x.toFixed(4)]=W.y.toFixed(4);D=D.t+aa((W[F]-D[F])/(E[F]-D[F]))*(E.t-D.t);r=r.t+aa((W[G]-r[G])/(B[G]-r[G]))*(B.t-r.t);D>=0&&(D<=1&&r>=0&&r<=1)&&(w?C++:C.push({x:W.x,y:W.y,t1:D,t2:r}))}}w=C}else w=w?0:[];if(c)k=k+w;else{q=0;for(t=w.length;q<t;q++){w[q].segment1=ia;w[q].segment2=L;w[q].bez1=n;w[q].bez2=j}k=k.concat(w)}}}}}return k},ub=function(a,
b,c,d,e,f){if(a!=null){this.a=+a;this.b=+b;this.c=+c;this.d=+d;this.e=+e;this.f=+f}else{this.a=1;this.c=this.b=0;this.d=1;this.f=this.e=0}},Ie=function(){return this.x+Xb+this.y+Xb+this.width+" \u00d7 "+this.height},Ya=function(a,b){var c=[],d={};this.ms=b;this.times=1;if(a){for(var e in a)if(a[T](e)){d[N(e)]=a[e];c.push(N(e))}c.sort(Bg)}this.anim=d;this.top=c[c.length-1];this.percents=c},Zb=function(a,b,c,d,e,f){var c=N(c),g,i,m,h,j,n,k=a.ms,p={},ia={},s={};if(d){n=0;for(v=F.length;n<v;n++){var L=
F[n];if(L.el.id==b.id&&L.anim==a){if(L.percent!=c){F.splice(n,1);m=1}else i=L;b.attr(L.totalOrigin);break}}}else d=+ia;n=0;for(var v=a.percents.length;n<v;n++)if(a.percents[n]==c||a.percents[n]>d*a.top){c=a.percents[n];j=a.percents[n-1]||0;k=k/a.top*(c-j);h=a.percents[n+1];g=a.anim[c];break}else d&&b.attr(a.anim[a.percents[n]]);if(g){if(i){i.initstatus=d;i.start=new Date-i.ms*d}else{for(var w in g)if(g[T](w)&&(pd[T](w)||b.paper.customAttributes[T](w))){p[w]=b.attr(w);p[w]==null&&(p[w]=Cg[w]);ia[w]=
g[w];switch(pd[w]){case fa:s[w]=(ia[w]-p[w])/k;break;case "colour":p[w]=l.getRGB(p[w]);n=l.getRGB(ia[w]);s[w]={r:(n.r-p[w].r)/k,g:(n.g-p[w].g)/k,b:(n.b-p[w].b)/k};break;case "path":n=Yb(p[w],ia[w]);L=n[1];p[w]=n[0];s[w]=[];n=0;for(v=p[w].length;n<v;n++){s[w][n]=[0];for(var o=1,r=p[w][n].length;o<r;o++)s[w][n][o]=(L[n][o]-p[w][n][o])/k}break;case "transform":n=b._;if(v=Dg(n[w],ia[w])){p[w]=v.from;ia[w]=v.to;s[w]=[];s[w].real=true;n=0;for(v=p[w].length;n<v;n++){s[w][n]=[p[w][n][0]];o=1;for(r=p[w][n].length;o<
r;o++)s[w][n][o]=(ia[w][n][o]-p[w][n][o])/k}}else{v=b.matrix||new ub;n={_:{transform:n.transform},getBBox:function(){return b.getBBox(1)}};p[w]=[v.a,v.b,v.c,v.d,v.e,v.f];Je(n,ia[w]);ia[w]=n._.transform;s[w]=[(n.matrix.a-v.a)/k,(n.matrix.b-v.b)/k,(n.matrix.c-v.c)/k,(n.matrix.d-v.d)/k,(n.matrix.e-v.e)/k,(n.matrix.f-v.f)/k]}break;case "csv":v=pa(g[w])[Ra](qd);L=pa(p[w])[Ra](qd);if(w=="clip-rect"){p[w]=L;s[w]=[];for(n=L.length;n--;)s[w][n]=(v[n]-p[w][n])/k}ia[w]=v;break;default:v=[][K](g[w]);L=[][K](p[w]);
s[w]=[];for(n=b.paper.customAttributes[w].length;n--;)s[w][n]=((v[n]||0)-(L[n]||0))/k}}n=g.easing;w=l.easing_formulas[n];if(!w)if((w=pa(n).match(Eg))&&w.length==5){var q=w;w=function(a){var b=+q[1],c=+q[2],d=3*b,e=3*(+q[3]-b)-d,f=1-d-e,b=3*c,c=3*(+q[4]-c)-b,g=1-b-c,a=function(a,b){var c,g,i,m;i=a;for(g=0;g<8;g++){m=((f*i+e)*i+d)*i-a;if(aa(m)<b)return i;c=(3*f*i+2*e)*i+d;if(aa(c)<1E-6)break;i=i-m/c}c=0;g=1;i=a;if(i<c)return c;if(i>g)return g;for(;c<g;){m=((f*i+e)*i+d)*i;if(aa(m-a)<b)break;a>m?c=i:
g=i;i=(g-c)/2+c}return i}(a,1/(200*k));return((g*a+c)*a+b)*a}}else w=Fg;n=g.start||a.start||+new Date;L={anim:a,percent:c,timestamp:n,start:n+(a.del||0),status:0,initstatus:d||0,stop:false,ms:k,easing:w,from:p,diff:s,to:ia,el:b,callback:g.callback,prev:j,next:h,repeat:f||a.times,origin:b.attr(),totalOrigin:e};F.push(L);if(d&&!i&&!m){L.stop=true;L.start=new Date-k*d;if(F.length==1)return rd()}if(m)L.start=new Date-L.ms*d;F.length==1&&Ke(rd)}eve("raphael.anim.start."+b.id,b,a)}},Le=function(a){for(var b=
0;b<F.length;b++)F[b].el.paper==a&&F.splice(b--,1)};l.version="2.1.0";l.eve=eve;var md,qd=/[, ]+/,Gg={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},Hg=/\{(\d+)\}/g,T="hasOwnProperty",B={doc:document,win:window},Me=Object.prototype[T].call(B.win,"Raphael"),Ig=B.win.Raphael,Ne=function(){this.ca=this.customAttributes={}},S,U="apply",K="concat",sd="createTouch"in B.doc,Xb=" ",pa=String,Ra="split",Oe="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[Ra](Xb),
td={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},xc=pa.prototype.toLowerCase,D=Math,V=D.max,X=D.min,aa=D.abs,Ba=D.pow,qa=D.PI,fa="number",Aa="array",Jg=Object.prototype.toString;l._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i;var Kg=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,
Lg={NaN:1,Infinity:1,"-Infinity":1},Eg=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,ud=D.round,N=parseFloat,vb=parseInt,Pe=pa.prototype.toUpperCase,Cg=l._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",
r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},pd=l._availableAnimAttrs={blur:fa,"clip-rect":"csv",cx:fa,cy:fa,fill:"colour","fill-opacity":fa,"font-size":fa,height:fa,opacity:fa,path:"path",r:fa,rx:fa,ry:fa,stroke:"colour","stroke-opacity":fa,"stroke-width":fa,transform:"transform",width:fa,x:fa,y:fa},
vd=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,Mg={hs:1,rg:1},Ng=/,?([achlmqrstvxz]),?/gi,Og=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,
Pg=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,Qe=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/ig;
l._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/;var $b={},Bg=function(a,b){return N(a)-N(b)},Qg=function(){},Fg=function(a){return a},wd=l._rectPath=function(a,b,c,d,e){return e?[["M",a+e,b],["l",c-e*2,0],["a",e,e,0,0,1,
e,e],["l",0,d-e*2],["a",e,e,0,0,1,-e,e],["l",e*2-c,0],["a",e,e,0,0,1,-e,-e],["l",0,e*2-d],["a",e,e,0,0,1,e,-e],["z"]]:[["M",a,b],["l",c,0],["l",0,d],["l",-c,0],["z"]]},Re=function(a,b,c,d){d==null&&(d=c);return[["M",a,b],["m",0,-d],["a",c,d,0,1,1,0,2*d],["a",c,d,0,1,1,0,-2*d],["z"]]},yc=l._getPath={path:function(a){return a.attr("path")},circle:function(a){a=a.attrs;return Re(a.cx,a.cy,a.r)},ellipse:function(a){a=a.attrs;return Re(a.cx,a.cy,a.rx,a.ry)},rect:function(a){a=a.attrs;return wd(a.x,a.y,
a.width,a.height,a.r)},image:function(a){a=a.attrs;return wd(a.x,a.y,a.width,a.height)},text:function(a){a=a._getBBox();return wd(a.x,a.y,a.width,a.height)}},xd=l.mapPath=function(a,b){if(!b)return a;var c,d,e,f,g,i,m,a=Yb(a);e=0;for(g=a.length;e<g;e++){m=a[e];f=1;for(i=m.length;f<i;f=f+2){c=b.x(m[f],m[f+1]);d=b.y(m[f],m[f+1]);m[f]=c;m[f+1]=d}}return a};l._g=B;l.type=B.win.SVGAngle||B.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if("VML"==l.type){var yd=
B.doc.createElement("div"),zc;yd.innerHTML='<v:shape adj="1"/>';zc=yd.firstChild;zc.style.behavior="url(#default#VML)";if(!(zc&&"object"==typeof zc.adj)){l.type="";break a}yd=null}l.svg=!(l.vml="VML"==l.type);l._Paper=Ne;l.fn=S=Ne.prototype=l.prototype;l._id=0;l._oid=0;l.is=function(a,b){b=xc.call(b);return b=="finite"?!Lg[T](+a):b=="array"?a instanceof Array:b=="null"&&a===null||b==typeof a&&a!==null||b=="object"&&a===Object(a)||b=="array"&&Array.isArray&&Array.isArray(a)||Jg.call(a).slice(8,-1).toLowerCase()==
b};l.angle=function(a,b,c,d,e,f){if(e==null){a=a-c;b=b-d;return!a&&!b?0:(D.atan2(-b,-a)*180/qa+540)%360}return l.angle(a,b,e,f)-l.angle(c,d,e,f)};l.rad=function(a){return a%360*qa/180};l.deg=function(a){return a*180/qa%360};l.snapTo=function(a,b,c){c=l.is(c,"finite")?c:10;if(l.is(a,Aa))for(var d=a.length;d--;){if(aa(a[d]-b)<=c)return a[d]}else{a=+a;d=b%a;if(d<c)return b-d;if(d>a-c)return b-d+a}return b};var Rg=/[xy]/g,Sg=function(a){var b=D.random()*16|0;return(a=="x"?b:b&3|8).toString(16)};l.createUUID=
function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(Rg,Sg).toUpperCase()};l.setWindow=function(a){eve("raphael.setWindow",l,B.win,a);B.win=a;B.doc=B.win.document;l._engine.initWin&&l._engine.initWin(B.win)};var Ac=function(a){if(l.vml){var b=/^\s+|\s+$/g,c;try{var d=new ActiveXObject("htmlfile");d.write("<body>");d.close();c=d.body}catch(e){c=createPopup().document.body}var f=c.createTextRange();Ac=Ka(function(a){try{c.style.color=pa(a).replace(b,"");var d=f.queryCommandValue("ForeColor");
return"#"+("000000"+((d&255)<<16|d&65280|(d&16711680)>>>16).toString(16)).slice(-6)}catch(e){return"none"}})}else{var g=B.doc.createElement("i");g.title="Rapha\u00ebl Colour Picker";g.style.display="none";B.doc.body.appendChild(g);Ac=Ka(function(a){g.style.color=a;return B.doc.defaultView.getComputedStyle(g,"").getPropertyValue("color")})}return Ac(a)},Tg=function(){return"hsb("+[this.h,this.s,this.b]+")"},Ug=function(){return"hsl("+[this.h,this.s,this.l]+")"},Se=function(){return this.hex},Te=function(a,
b,c){if(b==null&&l.is(a,"object")&&"r"in a&&"g"in a&&"b"in a){c=a.b;b=a.g;a=a.r}if(b==null&&l.is(a,"string")){c=l.getRGB(a);a=c.r;b=c.g;c=c.b}if(a>1||b>1||c>1){a=a/255;b=b/255;c=c/255}return[a,b,c]},Ue=function(a,b,c,d){a=a*255;b=b*255;c=c*255;a={r:a,g:b,b:c,hex:l.rgb(a,b,c),toString:Se};l.is(d,"finite")&&(a.opacity=d);return a};l.color=function(a){var b;if(l.is(a,"object")&&"h"in a&&"s"in a&&"b"in a){b=l.hsb2rgb(a);a.r=b.r;a.g=b.g;a.b=b.b;a.hex=b.hex}else if(l.is(a,"object")&&"h"in a&&"s"in a&&"l"in
a){b=l.hsl2rgb(a);a.r=b.r;a.g=b.g;a.b=b.b;a.hex=b.hex}else{l.is(a,"string")&&(a=l.getRGB(a));if(l.is(a,"object")&&"r"in a&&"g"in a&&"b"in a){b=l.rgb2hsl(a);a.h=b.h;a.s=b.s;a.l=b.l;b=l.rgb2hsb(a);a.v=b.b}else{a={hex:"none"};a.r=a.g=a.b=a.h=a.s=a.v=a.l=-1}}a.toString=Se;return a};l.hsb2rgb=function(a,b,c,d){if(this.is(a,"object")&&"h"in a&&"s"in a&&"b"in a){c=a.b;b=a.s;a=a.h;d=a.o}var e,f,g,a=a*360%360/60;g=c*b;b=g*(1-aa(a%2-1));c=e=f=c-g;a=~~a;c=c+[g,b,0,0,b,g][a];e=e+[b,g,g,b,0,0][a];f=f+[0,0,b,g,
g,b][a];return Ue(c,e,f,d)};l.hsl2rgb=function(a,b,c,d){if(this.is(a,"object")&&"h"in a&&"s"in a&&"l"in a){c=a.l;b=a.s;a=a.h}if(a>1||b>1||c>1){a=a/360;b=b/100;c=c/100}var e,f,g,a=a*360%360/60;g=2*b*(c<0.5?c:1-c);b=g*(1-aa(a%2-1));c=e=f=c-g/2;a=~~a;c=c+[g,b,0,0,b,g][a];e=e+[b,g,g,b,0,0][a];f=f+[0,0,b,g,g,b][a];return Ue(c,e,f,d)};l.rgb2hsb=function(a,b,c){var c=Te(a,b,c),a=c[0],b=c[1],c=c[2],d,e;d=V(a,b,c);e=d-X(a,b,c);return{h:((e==0?0:d==a?(b-c)/e:d==b?(c-a)/e+2:(a-b)/e+4)+360)%6*60/360,s:e==0?0:
e/d,b:d,toString:Tg}};l.rgb2hsl=function(a,b,c){var c=Te(a,b,c),a=c[0],b=c[1],c=c[2],d,e,f;e=V(a,b,c);d=X(a,b,c);f=e-d;d=(e+d)/2;return{h:((f==0?0:e==a?(b-c)/f:e==b?(c-a)/f+2:(a-b)/f+4)+360)%6*60/360,s:f==0?0:d<0.5?f/(2*d):f/(2-2*d),l:d,toString:Ug}};l._path2string=function(){return this.join(",").replace(Ng,"$1")};l._preload=function(a,b){var c=B.doc.createElement("img");c.style.cssText="position:absolute;left:-9999em;top:-9999em";c.onload=function(){b.call(this);this.onload=null;B.doc.body.removeChild(this)};
c.onerror=function(){B.doc.body.removeChild(this)};B.doc.body.appendChild(c);c.src=a};l.getRGB=Ka(function(a){if(!a||(a=pa(a)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:wc};if(a=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:wc};!(Mg[T](a.toLowerCase().substring(0,2))||a.charAt()=="#")&&(a=Ac(a));var b,c,d,e,f;if(a=a.match(Kg)){if(a[2]){d=vb(a[2].substring(5),16);c=vb(a[2].substring(3,5),16);b=vb(a[2].substring(1,3),16)}if(a[3]){d=vb((f=a[3].charAt(3))+f,16);c=vb((f=a[3].charAt(2))+
f,16);b=vb((f=a[3].charAt(1))+f,16)}if(a[4]){f=a[4][Ra](vd);b=N(f[0]);f[0].slice(-1)=="%"&&(b=b*2.55);c=N(f[1]);f[1].slice(-1)=="%"&&(c=c*2.55);d=N(f[2]);f[2].slice(-1)=="%"&&(d=d*2.55);a[1].toLowerCase().slice(0,4)=="rgba"&&(e=N(f[3]));f[3]&&f[3].slice(-1)=="%"&&(e=e/100)}if(a[5]){f=a[5][Ra](vd);b=N(f[0]);f[0].slice(-1)=="%"&&(b=b*2.55);c=N(f[1]);f[1].slice(-1)=="%"&&(c=c*2.55);d=N(f[2]);f[2].slice(-1)=="%"&&(d=d*2.55);(f[0].slice(-3)=="deg"||f[0].slice(-1)=="\u00b0")&&(b=b/360);a[1].toLowerCase().slice(0,
4)=="hsba"&&(e=N(f[3]));f[3]&&f[3].slice(-1)=="%"&&(e=e/100);return l.hsb2rgb(b,c,d,e)}if(a[6]){f=a[6][Ra](vd);b=N(f[0]);f[0].slice(-1)=="%"&&(b=b*2.55);c=N(f[1]);f[1].slice(-1)=="%"&&(c=c*2.55);d=N(f[2]);f[2].slice(-1)=="%"&&(d=d*2.55);(f[0].slice(-3)=="deg"||f[0].slice(-1)=="\u00b0")&&(b=b/360);a[1].toLowerCase().slice(0,4)=="hsla"&&(e=N(f[3]));f[3]&&f[3].slice(-1)=="%"&&(e=e/100);return l.hsl2rgb(b,c,d,e)}a={r:b,g:c,b:d,toString:wc};a.hex="#"+(16777216|d|c<<8|b<<16).toString(16).slice(1);l.is(e,
"finite")&&(a.opacity=e);return a}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:wc}},l);l.hsb=Ka(function(a,b,c){return l.hsb2rgb(a,b,c).hex});l.hsl=Ka(function(a,b,c){return l.hsl2rgb(a,b,c).hex});l.rgb=Ka(function(a,b,c){return"#"+(16777216|c|b<<8|a<<16).toString(16).slice(1)});l.getColor=function(a){var a=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||0.75},b=this.hsb2rgb(a.h,a.s,a.b);a.h=a.h+0.075;if(a.h>1){a.h=0;a.s=a.s-0.2;a.s<=0&&(this.getColor.start={h:0,s:1,b:a.b})}return b.hex};
l.getColor.reset=function(){delete this.start};l.parsePathString=function(a){if(!a)return null;var b=wb(a);if(b.arr)return La(b.arr);var c={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},d=[];l.is(a,Aa)&&l.is(a[0],Aa)&&(d=La(a));d.length||pa(a).replace(Og,function(a,b,g){var i=[],a=b.toLowerCase();g.replace(Qe,function(a,b){b&&i.push(+b)});if(a=="m"&&i.length>2){d.push([b][K](i.splice(0,2)));a="l";b=b=="m"?"l":"L"}if(a=="r")d.push([b][K](i));else for(;i.length>=c[a];){d.push([b][K](i.splice(0,c[a])));
if(!c[a])break}});d.toString=l._path2string;b.arr=La(d);return d};l.parseTransformString=Ka(function(a){if(!a)return null;var b=[];l.is(a,Aa)&&l.is(a[0],Aa)&&(b=La(a));b.length||pa(a).replace(Pg,function(a,d,e){var f=[];xc.call(d);e.replace(Qe,function(a,b){b&&f.push(+b)});b.push([d][K](f))});b.toString=l._path2string;return b});var wb=function(a){var b=wb.ps=wb.ps||{};b[a]?b[a].sleep=100:b[a]={sleep:100};setTimeout(function(){for(var c in b)if(b[T](c)&&c!=a){b[c].sleep--;!b[c].sleep&&delete b[c]}});
return b[a]};l.findDotsAtSegment=function(a,b,c,d,e,f,g,i,m){var h=1-m,k=Ba(h,3),n=Ba(h,2),j=m*m,l=j*m,o=k*a+n*3*m*c+h*3*m*m*e+l*g,k=k*b+n*3*m*d+h*3*m*m*f+l*i,n=a+2*m*(c-a)+j*(e-2*c+a),l=b+2*m*(d-b)+j*(f-2*d+b),s=c+2*m*(e-c)+j*(g-2*e+c),j=d+2*m*(f-d)+j*(i-2*f+d),a=h*a+m*c,b=h*b+m*d,e=h*e+m*g,f=h*f+m*i,i=90-D.atan2(n-s,l-j)*180/qa;(n>s||l<j)&&(i=i+180);return{x:o,y:k,m:{x:n,y:l},n:{x:s,y:j},start:{x:a,y:b},end:{x:e,y:f},alpha:i}};l.bezierBBox=function(a,b,c,d,e,f,g,i){l.is(a,"array")||(a=[a,b,c,d,
e,f,g,i]);a=Ve.apply(null,a);return{x:a.min.x,y:a.min.y,x2:a.max.x,y2:a.max.y,width:a.max.x-a.min.x,height:a.max.y-a.min.y}};l.isPointInsideBBox=function(a,b,c){return b>=a.x&&b<=a.x2&&c>=a.y&&c<=a.y2};l.isBBoxIntersect=function(a,b){var c=l.isPointInsideBBox;return c(b,a.x,a.y)||c(b,a.x2,a.y)||c(b,a.x,a.y2)||c(b,a.x2,a.y2)||c(a,b.x,b.y)||c(a,b.x2,b.y)||c(a,b.x,b.y2)||c(a,b.x2,b.y2)||(a.x<b.x2&&a.x>b.x||b.x<a.x2&&b.x>a.x)&&(a.y<b.y2&&a.y>b.y||b.y<a.y2&&b.y>a.y)};l.pathIntersection=function(a,b){return od(a,
b)};l.pathIntersectionNumber=function(a,b){return od(a,b,1)};l.isPointInsidePath=function(a,b,c){var d=l.pathBBox(a);return l.isPointInsideBBox(d,b,c)&&od(a,[["M",b,c],["H",d.x2+10]],1)%2==1};l._removedFactory=function(a){return function(){eve("raphael.log",null,"Rapha\u00ebl: you are calling to method \u201c"+a+"\u201d of removed object",a)}};var zd=l.pathBBox=function(a){var b=wb(a);if(b.bbox)return b.bbox;if(!a)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var a=Yb(a),c=0,d=0,e=[],f=[],g,i=0,
m=a.length;i<m;i++){g=a[i];if(g[0]=="M"){c=g[1];d=g[2];e.push(c);f.push(d)}else{c=Ve(c,d,g[1],g[2],g[3],g[4],g[5],g[6]);e=e[K](c.min.x,c.max.x);f=f[K](c.min.y,c.max.y);c=g[5];d=g[6]}}a=X[U](0,e);g=X[U](0,f);e=V[U](0,e);f=V[U](0,f);f={x:a,y:g,x2:e,y2:f,width:e-a,height:f-g};b.bbox=nd(f);return f},La=function(a){a=nd(a);a.toString=l._path2string;return a},Vg=l._pathToRelative=function(a){var b=wb(a);if(b.rel)return La(b.rel);if(!l.is(a,Aa)||!l.is(a&&a[0],Aa))a=l.parsePathString(a);var c=[],d=0,e=0,
f=0,g=0,i=0;if(a[0][0]=="M"){d=a[0][1];e=a[0][2];f=d;g=e;i++;c.push(["M",d,e])}for(var m=a.length;i<m;i++){var h=c[i]=[],k=a[i];if(k[0]!=xc.call(k[0])){h[0]=xc.call(k[0]);switch(h[0]){case "a":h[1]=k[1];h[2]=k[2];h[3]=k[3];h[4]=k[4];h[5]=k[5];h[6]=+(k[6]-d).toFixed(3);h[7]=+(k[7]-e).toFixed(3);break;case "v":h[1]=+(k[1]-e).toFixed(3);break;case "m":f=k[1];g=k[2];default:for(var n=1,j=k.length;n<j;n++)h[n]=+(k[n]-(n%2?d:e)).toFixed(3)}}else{c[i]=[];if(k[0]=="m"){f=k[1]+d;g=k[2]+e}h=0;for(n=k.length;h<
n;h++)c[i][h]=k[h]}k=c[i].length;switch(c[i][0]){case "z":d=f;e=g;break;case "h":d=d+ +c[i][k-1];break;case "v":e=e+ +c[i][k-1];break;default:d=d+ +c[i][k-2];e=e+ +c[i][k-1]}}c.toString=l._path2string;b.rel=La(c);return c},We=l._pathToAbsolute=function(a){var b=wb(a);if(b.abs)return La(b.abs);if(!l.is(a,Aa)||!l.is(a&&a[0],Aa))a=l.parsePathString(a);if(!a||!a.length)return[["M",0,0]];var c=[],d=0,e=0,f=0,g=0,i=0;if(a[0][0]=="M"){d=+a[0][1];e=+a[0][2];f=d;g=e;i++;c[0]=["M",d,e]}for(var m=a.length==
3&&a[0][0]=="M"&&a[1][0].toUpperCase()=="R"&&a[2][0].toUpperCase()=="Z",h,k=i,n=a.length;k<n;k++){c.push(i=[]);h=a[k];if(h[0]!=Pe.call(h[0])){i[0]=Pe.call(h[0]);switch(i[0]){case "A":i[1]=h[1];i[2]=h[2];i[3]=h[3];i[4]=h[4];i[5]=h[5];i[6]=+(h[6]+d);i[7]=+(h[7]+e);break;case "V":i[1]=+h[1]+e;break;case "H":i[1]=+h[1]+d;break;case "R":for(var j=[d,e][K](h.slice(1)),p=2,o=j.length;p<o;p++){j[p]=+j[p]+d;j[++p]=+j[p]+e}c.pop();c=c[K](He(j,m));break;case "M":f=+h[1]+d;g=+h[2]+e;default:p=1;for(o=h.length;p<
o;p++)i[p]=+h[p]+(p%2?d:e)}}else if(h[0]=="R"){j=[d,e][K](h.slice(1));c.pop();c=c[K](He(j,m));i=["R"][K](h.slice(-2))}else{j=0;for(p=h.length;j<p;j++)i[j]=h[j]}switch(i[0]){case "Z":d=f;e=g;break;case "H":d=i[1];break;case "V":e=i[1];break;case "M":f=i[i.length-2];g=i[i.length-1];default:d=i[i.length-2];e=i[i.length-1]}}c.toString=l._path2string;b.abs=La(c);return c},Xe=function(a,b,c,d,e,f){var g=1/3,i=2/3;return[g*a+i*c,g*b+i*d,g*e+i*c,g*f+i*d,e,f]},Ye=function(a,b,c,d,e,f,g,i,m,h){var k=qa*120/
180,j=qa/180*(+e||0),l=[],p,o=Ka(function(a,b,c){var d=a*D.cos(c)-b*D.sin(c),a=a*D.sin(c)+b*D.cos(c);return{x:d,y:a}});if(h){v=h[0];p=h[1];f=h[2];s=h[3]}else{p=o(a,b,-j);a=p.x;b=p.y;p=o(i,m,-j);i=p.x;m=p.y;D.cos(qa/180*e);D.sin(qa/180*e);p=(a-i)/2;v=(b-m)/2;s=p*p/(c*c)+v*v/(d*d);if(s>1){s=D.sqrt(s);c=s*c;d=s*d}var s=c*c,L=d*d,s=(f==g?-1:1)*D.sqrt(aa((s*L-s*v*v-L*p*p)/(s*v*v+L*p*p))),f=s*c*v/d+(a+i)/2,s=s*-d*p/c+(b+m)/2,v=D.asin(((b-s)/d).toFixed(9));p=D.asin(((m-s)/d).toFixed(9));v=a<f?qa-v:v;p=i<
f?qa-p:p;v<0&&(v=qa*2+v);p<0&&(p=qa*2+p);g&&v>p&&(v=v-qa*2);!g&&p>v&&(p=p-qa*2)}if(aa(p-v)>k){var l=p,L=i,w=m;p=v+k*(g&&p>v?1:-1);i=f+c*D.cos(p);m=s+d*D.sin(p);l=Ye(i,m,c,d,e,0,g,L,w,[p,l,f,s])}f=p-v;e=D.cos(v);k=D.sin(v);g=D.cos(p);p=D.sin(p);f=D.tan(f/4);c=4/3*c*f;f=4/3*d*f;d=[a,b];a=[a+c*k,b-f*e];b=[i+c*p,m-f*g];i=[i,m];a[0]=2*d[0]-a[0];a[1]=2*d[1]-a[1];if(h)return[a,b,i][K](l);l=[a,b,i][K](l).join()[Ra](",");h=[];i=0;for(m=l.length;i<m;i++)h[i]=i%2?o(l[i-1],l[i],j).y:o(l[i],l[i+1],j).x;return h},
Bc=function(a,b,c,d,e,f,g,i,m){var h=1-m;return{x:Ba(h,3)*a+Ba(h,2)*3*m*c+h*3*m*m*e+Ba(m,3)*g,y:Ba(h,3)*b+Ba(h,2)*3*m*d+h*3*m*m*f+Ba(m,3)*i}},Ve=Ka(function(a,b,c,d,e,f,g,i){var m=e-2*c+a-(g-2*e+c),h=2*(c-a)-2*(e-c),k=a-c,j=(-h+D.sqrt(h*h-4*m*k))/2/m,m=(-h-D.sqrt(h*h-4*m*k))/2/m,l=[b,i],p=[a,g];aa(j)>"1e12"&&(j=0.5);aa(m)>"1e12"&&(m=0.5);if(j>0&&j<1){j=Bc(a,b,c,d,e,f,g,i,j);p.push(j.x);l.push(j.y)}if(m>0&&m<1){j=Bc(a,b,c,d,e,f,g,i,m);p.push(j.x);l.push(j.y)}m=f-2*d+b-(i-2*f+d);h=2*(d-b)-2*(f-d);k=
b-d;j=(-h+D.sqrt(h*h-4*m*k))/2/m;m=(-h-D.sqrt(h*h-4*m*k))/2/m;aa(j)>"1e12"&&(j=0.5);aa(m)>"1e12"&&(m=0.5);if(j>0&&j<1){j=Bc(a,b,c,d,e,f,g,i,j);p.push(j.x);l.push(j.y)}if(m>0&&m<1){j=Bc(a,b,c,d,e,f,g,i,m);p.push(j.x);l.push(j.y)}return{min:{x:X[U](0,p),y:X[U](0,l)},max:{x:V[U](0,p),y:V[U](0,l)}}}),Yb=l._path2curve=Ka(function(a,b){var c=!b&&wb(a);if(!b&&c.curve)return La(c.curve);var d=We(a),e=b&&We(b),f={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},g={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},i=function(a,
b){var c,d;if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];!(a[0]in{T:1,Q:1})&&(b.qx=b.qy=null);switch(a[0]){case "M":b.X=a[1];b.Y=a[2];break;case "A":a=["C"][K](Ye[U](0,[b.x,b.y][K](a.slice(1))));break;case "S":c=b.x+(b.x-(b.bx||b.x));d=b.y+(b.y-(b.by||b.y));a=["C",c,d][K](a.slice(1));break;case "T":b.qx=b.x+(b.x-(b.qx||b.x));b.qy=b.y+(b.y-(b.qy||b.y));a=["C"][K](Xe(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case "Q":b.qx=a[1];b.qy=a[2];a=["C"][K](Xe(b.x,b.y,a[1],a[2],a[3],a[4]));break;case "L":a=["C"][K]([b.x,
b.y,a[1],a[2],a[1],a[2]]);break;case "H":a=["C"][K]([b.x,b.y,a[1],b.y,a[1],b.y]);break;case "V":a=["C"][K]([b.x,b.y,b.x,a[1],b.x,a[1]]);break;case "Z":a=["C"][K]([b.x,b.y,b.X,b.Y,b.X,b.Y])}return a},m=function(a,b){if(a[b].length>7){a[b].shift();for(var c=a[b];c.length;)a.splice(b++,0,["C"][K](c.splice(0,6)));a.splice(b,1);k=V(d.length,e&&e.length||0)}},h=function(a,b,c,f,g){if(a&&b&&a[g][0]=="M"&&b[g][0]!="M"){b.splice(g,0,["M",f.x,f.y]);c.bx=0;c.by=0;c.x=a[g][1];c.y=a[g][2];k=V(d.length,e&&e.length||
0)}},j=0,k=V(d.length,e&&e.length||0);for(;j<k;j++){d[j]=i(d[j],f);m(d,j);e&&(e[j]=i(e[j],g));e&&m(e,j);h(d,e,f,g,j);h(e,d,g,f,j);var l=d[j],p=e&&e[j],o=l.length,s=e&&p.length;f.x=l[o-2];f.y=l[o-1];f.bx=N(l[o-4])||f.x;f.by=N(l[o-3])||f.y;g.bx=e&&(N(p[s-4])||g.x);g.by=e&&(N(p[s-3])||g.y);g.x=e&&p[s-2];g.y=e&&p[s-1]}if(!e)c.curve=La(d);return e?[d,e]:d},null,La);l._parseDots=Ka(function(a){for(var b=[],c=0,d=a.length;c<d;c++){var e={},f=a[c].match(/^([^:]*):?([\d\.]*)/);e.color=l.getRGB(f[1]);if(e.color.error)return null;
e.color=e.color.hex;f[2]&&(e.offset=f[2]+"%");b.push(e)}c=1;for(d=b.length-1;c<d;c++)if(!b[c].offset){a=N(b[c-1].offset||0);f=0;for(e=c+1;e<d;e++)if(b[e].offset){f=b[e].offset;break}if(!f){f=100;e=d}f=N(f);for(f=(f-a)/(e-c+1);c<e;c++){a=a+f;b[c].offset=a+"%"}}return b});var Cc=l._tear=function(a,b){a==b.top&&(b.top=a.prev);a==b.bottom&&(b.bottom=a.next);a.next&&(a.next.prev=a.prev);a.prev&&(a.prev.next=a.next)};l._tofront=function(a,b){if(b.top!==a){Cc(a,b);a.next=null;a.prev=b.top;b.top.next=a;b.top=
a}};l._toback=function(a,b){if(b.bottom!==a){Cc(a,b);a.next=b.bottom;a.prev=null;b.bottom.prev=a;b.bottom=a}};l._insertafter=function(a,b,c){Cc(a,c);b==c.top&&(c.top=a);b.next&&(b.next.prev=a);a.next=b.next;a.prev=b;b.next=a};l._insertbefore=function(a,b,c){Cc(a,c);b==c.bottom&&(c.bottom=a);b.prev&&(b.prev.next=a);a.prev=b.prev;b.prev=a;a.next=b};var Wg=l.toMatrix=function(a,b){var c=zd(a),d={_:{transform:""},getBBox:function(){return c}};Je(d,b);return d.matrix};l.transformPath=function(a,b){return xd(a,
Wg(a,b))};var Je=l._extractTransform=function(a,b){if(b==null)return a._.transform;var b=pa(b).replace(/\.{3}|\u2026/g,a._.transform||""),c=l.parseTransformString(b),d=0,e=0,f=0,g=1,i=1,m=a._,f=new ub;m.transform=c||[];if(c)for(var e=0,h=c.length;e<h;e++){var j=c[e],k=j.length,o=pa(j[0]).toLowerCase(),p=j[0]!=o,r=p?f.invert():0,s;if(o=="t"&&k==3)if(p){k=r.x(0,0);o=r.y(0,0);p=r.x(j[1],j[2]);r=r.y(j[1],j[2]);f.translate(p-k,r-o)}else f.translate(j[1],j[2]);else if(o=="r")if(k==2){s=s||a.getBBox(1);
f.rotate(j[1],s.x+s.width/2,s.y+s.height/2);d=d+j[1]}else{if(k==4){if(p){p=r.x(j[2],j[3]);r=r.y(j[2],j[3]);f.rotate(j[1],p,r)}else f.rotate(j[1],j[2],j[3]);d=d+j[1]}}else if(o=="s")if(k==2||k==3){s=s||a.getBBox(1);f.scale(j[1],j[k-1],s.x+s.width/2,s.y+s.height/2);g=g*j[1];i=i*j[k-1]}else{if(k==5){if(p){p=r.x(j[3],j[4]);r=r.y(j[3],j[4]);f.scale(j[1],j[2],p,r)}else f.scale(j[1],j[2],j[3],j[4]);g=g*j[1];i=i*j[2]}}else o=="m"&&k==7&&f.add(j[1],j[2],j[3],j[4],j[5],j[6]);m.dirtyT=1;a.matrix=f}a.matrix=
f;m.sx=g;m.sy=i;m.deg=d;m.dx=e=f.e;m.dy=f=f.f;if(g==1&&i==1&&!d&&m.bbox){m.bbox.x=m.bbox.x+ +e;m.bbox.y=m.bbox.y+ +f}else m.dirtyT=1},Ze=function(a){var b=a[0];switch(b.toLowerCase()){case "t":return[b,0,0];case "m":return[b,1,0,0,1,0,0];case "r":return a.length==4?[b,0,a[2],a[3]]:[b,0];case "s":return a.length==5?[b,1,1,a[3],a[4]]:a.length==3?[b,1,1]:[b,1]}},Dg=l._equaliseTransform=function(a,b){for(var b=pa(b).replace(/\.{3}|\u2026/g,a),a=l.parseTransformString(a)||[],b=l.parseTransformString(b)||
[],c=V(a.length,b.length),d=[],e=[],f=0,g,i,m,h;f<c;f++){m=a[f]||Ze(b[f]);h=b[f]||Ze(m);if(m[0]!=h[0]||m[0].toLowerCase()=="r"&&(m[2]!=h[2]||m[3]!=h[3])||m[0].toLowerCase()=="s"&&(m[3]!=h[3]||m[4]!=h[4]))return;d[f]=[];e[f]=[];g=0;for(i=V(m.length,h.length);g<i;g++){g in m&&(d[f][g]=m[g]);g in h&&(e[f][g]=h[g])}}return{from:d,to:e}};l._getContainer=function(a,b,c,d){var e;e=d==null&&!l.is(a,"object")?B.doc.getElementById(a):a;if(e!=null)return e.tagName?b==null?{container:e,width:e.style.pixelWidth||
e.offsetWidth,height:e.style.pixelHeight||e.offsetHeight}:{container:e,width:b,height:c}:{container:1,x:a,y:b,width:c,height:d}};l.pathToRelative=Vg;l._engine={};l.path2curve=Yb;l.matrix=function(a,b,c,d,e,f){return new ub(a,b,c,d,e,f)};var ua=ub.prototype,Ad=function(a){return a[0]*a[0]+a[1]*a[1]},$e=function(a){var b=D.sqrt(Ad(a));a[0]&&(a[0]=a[0]/b);a[1]&&(a[1]=a[1]/b)};ua.add=function(a,b,c,d,e,f){var g=[[],[],[]],i=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],b=[[a,c,e],[b,d,f],[0,
0,1]];a&&a instanceof ub&&(b=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]]);for(a=0;a<3;a++)for(c=0;c<3;c++){for(d=e=0;d<3;d++)e=e+i[a][d]*b[d][c];g[a][c]=e}this.a=g[0][0];this.b=g[1][0];this.c=g[0][1];this.d=g[1][1];this.e=g[0][2];this.f=g[1][2]};ua.invert=function(){var a=this.a*this.d-this.b*this.c;return new ub(this.d/a,-this.b/a,-this.c/a,this.a/a,(this.c*this.f-this.d*this.e)/a,(this.b*this.e-this.a*this.f)/a)};ua.clone=function(){return new ub(this.a,this.b,this.c,this.d,this.e,this.f)};ua.translate=
function(a,b){this.add(1,0,0,1,a,b)};ua.scale=function(a,b,c,d){b==null&&(b=a);(c||d)&&this.add(1,0,0,1,c,d);this.add(a,0,0,b,0,0);(c||d)&&this.add(1,0,0,1,-c,-d)};ua.rotate=function(a,b,c){var a=l.rad(a),b=b||0,c=c||0,d=+D.cos(a).toFixed(9),a=+D.sin(a).toFixed(9);this.add(d,a,-a,d,b,c);this.add(1,0,0,1,-b,-c)};ua.x=function(a,b){return a*this.a+b*this.c+this.e};ua.y=function(a,b){return a*this.b+b*this.d+this.f};ua.get=function(a){return+this[pa.fromCharCode(97+a)].toFixed(4)};ua.toString=function(){return l.svg?
"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()};ua.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"};ua.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};ua.split=function(){var a={};a.dx=this.e;a.dy=this.f;
var b=[[this.a,this.c],[this.b,this.d]];a.scalex=D.sqrt(Ad(b[0]));$e(b[0]);a.shear=b[0][0]*b[1][0]+b[0][1]*b[1][1];b[1]=[b[1][0]-b[0][0]*a.shear,b[1][1]-b[0][1]*a.shear];a.scaley=D.sqrt(Ad(b[1]));$e(b[1]);a.shear=a.shear/a.scaley;var c=-b[0][1],b=b[1][1];if(b<0){a.rotate=l.deg(D.acos(b));if(c<0)a.rotate=360-a.rotate}else a.rotate=l.deg(D.asin(c));a.isSimple=!+a.shear.toFixed(9)&&(a.scalex.toFixed(9)==a.scaley.toFixed(9)||!a.rotate);a.isSuperSimple=!+a.shear.toFixed(9)&&a.scalex.toFixed(9)==a.scaley.toFixed(9)&&
!a.rotate;a.noRotation=!+a.shear.toFixed(9)&&!a.rotate;return a};ua.toTransformString=function(a){a=a||this[Ra]();if(a.isSimple){a.scalex=+a.scalex.toFixed(4);a.scaley=+a.scaley.toFixed(4);a.rotate=+a.rotate.toFixed(4);return(a.dx||a.dy?"t"+[a.dx,a.dy]:"")+(a.scalex!=1||a.scaley!=1?"s"+[a.scalex,a.scaley,0,0]:"")+(a.rotate?"r"+[a.rotate,0,0]:"")}return"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]};var Dc=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);
S.safari="Apple Computer, Inc."==navigator.vendor&&(Dc&&4>Dc[1]||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&Dc&&8>Dc[1]?function(){var a=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){a.remove()})}:Qg;var Xg=function(){this.returnValue=false},Yg=function(){return this.originalEvent.preventDefault()},Zg=function(){this.cancelBubble=true},$g=function(){return this.originalEvent.stopPropagation()},af;af=B.doc.addEventListener?function(a,
b,c,d){var e=sd&&td[b]?td[b]:b,f=function(e){var f=e.clientX+(B.doc.documentElement.scrollLeft||B.doc.body.scrollLeft),m=e.clientY+(B.doc.documentElement.scrollTop||B.doc.body.scrollTop);if(sd&&td[T](b))for(var h=0,j=e.targetTouches&&e.targetTouches.length;h<j;h++)if(e.targetTouches[h].target==a){j=e;e=e.targetTouches[h];e.originalEvent=j;e.preventDefault=Yg;e.stopPropagation=$g;break}return c.call(d,e,f,m)};a.addEventListener(e,f,false);return function(){a.removeEventListener(e,f,false);return true}}:
B.doc.attachEvent?function(a,b,c,d){var e=function(a){var a=a||B.win.event,b=a.clientX+(B.doc.documentElement.scrollLeft||B.doc.body.scrollLeft),e=a.clientY+(B.doc.documentElement.scrollTop||B.doc.body.scrollTop);a.preventDefault=a.preventDefault||Xg;a.stopPropagation=a.stopPropagation||Zg;return c.call(d,a,b,e)};a.attachEvent("on"+b,e);return function(){a.detachEvent("on"+b,e);return true}}:void 0;for(var xb=[],Bd=function(a){for(var b=a.clientX,c=a.clientY,d=B.doc.documentElement.scrollTop||B.doc.body.scrollTop,
e=B.doc.documentElement.scrollLeft||B.doc.body.scrollLeft,f,g=xb.length;g--;){f=xb[g];if(sd)for(var i=a.touches.length,m;i--;){m=a.touches[i];if(m.identifier==f.el._drag.id){b=m.clientX;c=m.clientY;(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();var i=f.el.node,h=i.nextSibling,j=i.parentNode,k=i.style.display;B.win.opera&&j.removeChild(i);i.style.display="none";m=f.el.paper.getElementByPoint(b,c);i.style.display=k;B.win.opera&&(h?j.insertBefore(i,h):j.appendChild(i));
m&&eve("raphael.drag.over."+f.el.id,f.el,m);b=b+e;c=c+d;eve("raphael.drag.move."+f.el.id,f.move_scope||f.el,b-f.el._drag.x,c-f.el._drag.y,b,c,a)}},Cd=function(a){l.unmousemove(Bd).unmouseup(Cd);for(var b=xb.length,c;b--;){c=xb[b];c.el._drag={};eve("raphael.drag.end."+c.el.id,c.end_scope||c.start_scope||c.move_scope||c.el,a)}xb=[]},J=l.el={},bf=Oe.length;bf--;)(function(a){l[a]=J[a]=function(b,c){if(l.is(b,"function")){this.events=this.events||[];this.events.push({name:a,f:b,unbind:af(this.shape||
this.node||B.doc,a,b,c||this)})}return this};l["un"+a]=J["un"+a]=function(b){for(var c=this.events||[],d=c.length;d--;)if(c[d].name==a&&c[d].f==b){c[d].unbind();c.splice(d,1);!c.length&&delete this.events;break}return this}})(Oe[bf]);J.data=function(a,b){var c=$b[this.id]=$b[this.id]||{};if(arguments.length==1){if(l.is(a,"object")){for(var d in a)a[T](d)&&this.data(d,a[d]);return this}eve("raphael.data.get."+this.id,this,c[a],a);return c[a]}c[a]=b;eve("raphael.data.set."+this.id,this,b,a);return this};
J.removeData=function(a){a==null?$b[this.id]={}:$b[this.id]&&delete $b[this.id][a];return this};J.hover=function(a,b,c,d){return this.mouseover(a,c).mouseout(b,d||c)};J.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};var Lb=[];J.drag=function(a,b,c,d,e,f){function g(g){(g.originalEvent||g).preventDefault();var m=B.doc.documentElement.scrollTop||B.doc.body.scrollTop,h=B.doc.documentElement.scrollLeft||B.doc.body.scrollLeft;this._drag.x=g.clientX+h;this._drag.y=g.clientY+m;this._drag.id=
g.identifier;!xb.length&&l.mousemove(Bd).mouseup(Cd);xb.push({el:this,move_scope:d,start_scope:e,end_scope:f});b&&eve.on("raphael.drag.start."+this.id,b);a&&eve.on("raphael.drag.move."+this.id,a);c&&eve.on("raphael.drag.end."+this.id,c);eve("raphael.drag.start."+this.id,e||d||this,g.clientX+h,g.clientY+m,g)}this._drag={};Lb.push({el:this,start:g});this.mousedown(g);return this};J.onDragOver=function(a){a?eve.on("raphael.drag.over."+this.id,a):eve.unbind("raphael.drag.over."+this.id)};J.undrag=function(){for(var a=
Lb.length;a--;)if(Lb[a].el==this){this.unmousedown(Lb[a].start);Lb.splice(a,1);eve.unbind("raphael.drag.*."+this.id)}!Lb.length&&l.unmousemove(Bd).unmouseup(Cd)};S.circle=function(a,b,c){a=l._engine.circle(this,a||0,b||0,c||0);this.__set__&&this.__set__.push(a);return a};S.rect=function(a,b,c,d,e){a=l._engine.rect(this,a||0,b||0,c||0,d||0,e||0);this.__set__&&this.__set__.push(a);return a};S.ellipse=function(a,b,c,d){a=l._engine.ellipse(this,a||0,b||0,c||0,d||0);this.__set__&&this.__set__.push(a);
return a};S.path=function(a){a&&!l.is(a,"string")&&!l.is(a[0],Aa)&&(a=a+"");var b=l._engine.path(l.format[U](l,arguments),this);this.__set__&&this.__set__.push(b);return b};S.image=function(a,b,c,d,e){a=l._engine.image(this,a||"about:blank",b||0,c||0,d||0,e||0);this.__set__&&this.__set__.push(a);return a};S.text=function(a,b,c){a=l._engine.text(this,a||0,b||0,pa(c));this.__set__&&this.__set__.push(a);return a};S.set=function(a){!l.is(a,"array")&&(a=Array.prototype.splice.call(arguments,0,arguments.length));
var b=new Mb(a);this.__set__&&this.__set__.push(b);return b};S.setStart=function(a){this.__set__=a||this.set()};S.setFinish=function(){var a=this.__set__;delete this.__set__;return a};S.setSize=function(a,b){return l._engine.setSize.call(this,a,b)};S.setViewBox=function(a,b,c,d,e){return l._engine.setViewBox.call(this,a,b,c,d,e)};S.top=S.bottom=null;S.raphael=l;S.getElementByPoint=function(a,b){var c,d,e=this.canvas,f=B.doc.elementFromPoint(a,b);if(B.win.opera&&f.tagName=="svg"){d=e.getBoundingClientRect();
c=e.ownerDocument;var g=c.body,i=c.documentElement;c=d.top+(B.win.pageYOffset||i.scrollTop||g.scrollTop)-(i.clientTop||g.clientTop||0);d=d.left+(B.win.pageXOffset||i.scrollLeft||g.scrollLeft)-(i.clientLeft||g.clientLeft||0);g=e.createSVGRect();g.x=a-d;g.y=b-c;g.width=g.height=1;c=e.getIntersectionList(g,null);c.length&&(f=c[c.length-1])}if(!f)return null;for(;f.parentNode&&f!=e.parentNode&&!f.raphael;)f=f.parentNode;f==this.canvas.parentNode&&(f=e);return f=f&&f.raphael?this.getById(f.raphaelid):
null};S.getById=function(a){for(var b=this.bottom;b;){if(b.id==a)return b;b=b.next}return null};S.forEach=function(a,b){for(var c=this.bottom;c;){if(a.call(b,c)===false)break;c=c.next}return this};S.getElementsByPoint=function(a,b){var c=this.set();this.forEach(function(d){d.isPointInside(a,b)&&c.push(d)});return c};J.isPointInside=function(a,b){var c=this.realPath=this.realPath||yc[this.type](this);return l.isPointInsidePath(c,a,b)};J.getBBox=function(a){if(this.removed)return{};var b=this._;if(a){if(b.dirty||
!b.bboxwt){this.realPath=yc[this.type](this);b.bboxwt=zd(this.realPath);b.bboxwt.toString=Ie;b.dirty=0}return b.bboxwt}if(b.dirty||b.dirtyT||!b.bbox){if(b.dirty||!this.realPath){b.bboxwt=0;this.realPath=yc[this.type](this)}b.bbox=zd(xd(this.realPath,this.matrix));b.bbox.toString=Ie;b.dirty=b.dirtyT=0}return b.bbox};J.clone=function(){if(this.removed)return null;var a=this.paper[this.type]().attr(this.attr());this.__set__&&this.__set__.push(a);return a};J.glow=function(a){if(this.type=="text")return null;
for(var a=a||{},b=(a.width||10)+(+this.attr("stroke-width")||1),c=a.fill||false,d=a.opacity||0.5,e=a.offsetx||0,f=a.offsety||0,a=a.color||"#000",g=b/2,i=this.paper,h=i.set(),j=this.realPath||yc[this.type](this),j=this.matrix?xd(j,this.matrix):j,k=1;k<g+1;k++)h.push(i.path(j).attr({stroke:a,fill:c?a:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(b/g*k).toFixed(3),opacity:+(d/g).toFixed(3)}));return h.insertBefore(this).translate(e,f)};var Dd=function(a,b,c,d,e,f,g,i,h){return h==
null?Kb(a,b,c,d,e,f,g,i):l.findDotsAtSegment(a,b,c,d,e,f,g,i,Ag(a,b,c,d,e,f,g,i,h))},Ed=function(a,b){return function(c,d,e){for(var c=Yb(c),f,g,i,h,j="",k={},n=0,o=0,p=c.length;o<p;o++){i=c[o];if(i[0]=="M"){f=+i[1];g=+i[2]}else{h=Dd(f,g,i[1],i[2],i[3],i[4],i[5],i[6]);if(n+h>d){if(b&&!k.start){f=Dd(f,g,i[1],i[2],i[3],i[4],i[5],i[6],d-n);j=j+["C"+f.start.x,f.start.y,f.m.x,f.m.y,f.x,f.y];if(e)return j;k.start=j;j=["M"+f.x,f.y+"C"+f.n.x,f.n.y,f.end.x,f.end.y,i[5],i[6]].join();n=n+h;f=+i[5];g=+i[6];continue}if(!a&&
!b){f=Dd(f,g,i[1],i[2],i[3],i[4],i[5],i[6],d-n);return{x:f.x,y:f.y,alpha:f.alpha}}}n=n+h;f=+i[5];g=+i[6]}j=j+(i.shift()+i)}k.end=j;f=a?n:b?k:l.findDotsAtSegment(f,g,i[0],i[1],i[2],i[3],i[4],i[5],1);f.alpha&&(f={x:f.x,y:f.y,alpha:f.alpha});return f}},cf=Ed(1),df=Ed(),Fd=Ed(0,1);l.getTotalLength=cf;l.getPointAtLength=df;l.getSubpath=function(a,b,c){if(this.getTotalLength(a)-c<1E-6)return Fd(a,b).end;a=Fd(a,c,1);return b?Fd(a,b).end:a};J.getTotalLength=function(){if(this.type=="path")return this.node.getTotalLength?
this.node.getTotalLength():cf(this.attrs.path)};J.getPointAtLength=function(a){if(this.type=="path")return df(this.attrs.path,a)};J.getSubpath=function(a,b){if(this.type=="path")return l.getSubpath(this.attrs.path,a,b)};var Ca=l.easing_formulas={linear:function(a){return a},"<":function(a){return Ba(a,1.7)},">":function(a){return Ba(a,0.48)},"<>":function(a){var b=0.48-a/1.04,c=D.sqrt(0.1734+b*b),a=c-b,a=Ba(aa(a),1/3)*(a<0?-1:1),b=-c-b,b=Ba(aa(b),1/3)*(b<0?-1:1),a=a+b+0.5;return(1-a)*3*a*a+a*a*a},
backIn:function(a){return a*a*(2.70158*a-1.70158)},backOut:function(a){a=a-1;return a*a*(2.70158*a+1.70158)+1},elastic:function(a){return a==!!a?a:Ba(2,-10*a)*D.sin((a-0.075)*2*qa/0.3)+1},bounce:function(a){if(a<1/2.75)a=7.5625*a*a;else if(a<2/2.75){a=a-1.5/2.75;a=7.5625*a*a+0.75}else if(a<2.5/2.75){a=a-2.25/2.75;a=7.5625*a*a+0.9375}else{a=a-2.625/2.75;a=7.5625*a*a+0.984375}return a}};Ca.easeIn=Ca["ease-in"]=Ca["<"];Ca.easeOut=Ca["ease-out"]=Ca[">"];Ca.easeInOut=Ca["ease-in-out"]=Ca["<>"];Ca["back-in"]=
Ca.backIn;Ca["back-out"]=Ca.backOut;var F=[],Ke=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,16)},rd=function(){for(var a=+new Date,b=0;b<F.length;b++){var c=F[b];if(!c.el.removed&&!c.paused){var d=a-c.start,e=c.ms,f=c.easing,g=c.from,i=c.diff,h=c.to,j=c.el,k={},n,o={},p;if(c.initstatus){d=(c.initstatus*c.anim.top-c.prev)/(c.percent-c.prev)*e;c.status=c.initstatus;
delete c.initstatus;c.stop&&F.splice(b--,1)}else c.status=(c.prev+(c.percent-c.prev)*(d/e))/c.anim.top;if(!(d<0))if(d<e){var r=f(d/e),s;for(s in g)if(g[T](s)){switch(pd[s]){case fa:n=+g[s]+r*e*i[s];break;case "colour":n="rgb("+[Gd(ud(g[s].r+r*e*i[s].r)),Gd(ud(g[s].g+r*e*i[s].g)),Gd(ud(g[s].b+r*e*i[s].b))].join()+")";break;case "path":n=[];d=0;for(f=g[s].length;d<f;d++){n[d]=[g[s][d][0]];h=1;for(o=g[s][d].length;h<o;h++)n[d][h]=+g[s][d][h]+r*e*i[s][d][h];n[d]=n[d].join(Xb)}n=n.join(Xb);break;case "transform":if(i[s].real){n=
[];d=0;for(f=g[s].length;d<f;d++){n[d]=[g[s][d][0]];h=1;for(o=g[s][d].length;h<o;h++)n[d][h]=g[s][d][h]+r*e*i[s][d][h]}}else{n=function(a){return+g[s][a]+r*e*i[s][a]};n=[["m",n(0),n(1),n(2),n(3),n(4),n(5)]]}break;case "csv":if(s=="clip-rect"){n=[];for(d=4;d--;)n[d]=+g[s][d]+r*e*i[s][d]}break;default:f=[][K](g[s]);n=[];for(d=j.paper.customAttributes[s].length;d--;)n[d]=+f[d]+r*e*i[s][d]}k[s]=n}j.attr(k);(function(a,b,c){setTimeout(function(){eve("raphael.anim.frame."+a,b,c)})})(j.id,j,c.anim)}else{(function(a,
b,c){setTimeout(function(){eve("raphael.anim.frame."+b.id,b,c);eve("raphael.anim.finish."+b.id,b,c);l.is(a,"function")&&a.call(b)})})(c.callback,j,c.anim);j.attr(h);F.splice(b--,1);if(c.repeat>1&&!c.next){for(p in h)h[T](p)&&(o[p]=c.totalOrigin[p]);c.el.attr(o);Zb(c.anim,c.el,c.anim.percents[0],null,c.totalOrigin,c.repeat-1)}c.next&&!c.stop&&Zb(c.anim,c.el,c.next,null,c.totalOrigin,c.repeat)}}}l.svg&&j&&j.paper&&j.paper.safari();F.length&&Ke(rd)},Gd=function(a){return a>255?255:a<0?0:a};J.animateWith=
function(a,b,c,d,e,f){if(this.removed){f&&f.call(this);return this}c=c instanceof Ya?c:l.animation(c,d,e,f);Zb(c,this,c.percents[0],null,this.attr());c=0;for(d=F.length;c<d;c++)if(F[c].anim==b&&F[c].el==a){F[d-1].start=F[c].start;break}return this};J.onAnimation=function(a){a?eve.on("raphael.anim.frame."+this.id,a):eve.unbind("raphael.anim.frame."+this.id);return this};Ya.prototype.delay=function(a){var b=new Ya(this.anim,this.ms);b.times=this.times;b.del=+a||0;return b};Ya.prototype.repeat=function(a){var b=
new Ya(this.anim,this.ms);b.del=this.del;b.times=D.floor(V(a,0))||1;return b};l.animation=function(a,b,c,d){if(a instanceof Ya)return a;if(l.is(c,"function")||!c){d=d||c||null;c=null}var a=Object(a),b=+b||0,e={},f,g;for(g in a)if(a[T](g)&&N(g)!=g&&N(g)+"%"!=g){f=true;e[g]=a[g]}if(f){c&&(e.easing=c);d&&(e.callback=d);return new Ya({100:e},b)}return new Ya(a,b)};J.animate=function(a,b,c,d){if(this.removed){d&&d.call(this);return this}a=a instanceof Ya?a:l.animation(a,b,c,d);Zb(a,this,a.percents[0],
null,this.attr());return this};J.setTime=function(a,b){a&&b!=null&&this.status(a,X(b,a.ms)/a.ms);return this};J.status=function(a,b){var c=[],d=0,e,f;if(b!=null){Zb(a,this,-1,X(b,1));return this}for(e=F.length;d<e;d++){f=F[d];if(f.el.id==this.id&&(!a||f.anim==a)){if(a)return f.status;c.push({anim:f.anim,status:f.status})}}return a?0:c};J.pause=function(a){for(var b=0;b<F.length;b++)if(F[b].el.id==this.id&&(!a||F[b].anim==a)&&eve("raphael.anim.pause."+this.id,this,F[b].anim)!==false)F[b].paused=true;
return this};J.resume=function(a){for(var b=0;b<F.length;b++)if(F[b].el.id==this.id&&(!a||F[b].anim==a)){var c=F[b];if(eve("raphael.anim.resume."+this.id,this,c.anim)!==false){delete c.paused;this.status(c.anim,c.status)}}return this};J.stop=function(a){for(var b=0;b<F.length;b++)F[b].el.id==this.id&&(!a||F[b].anim==a)&&eve("raphael.anim.stop."+this.id,this,F[b].anim)!==false&&F.splice(b--,1);return this};eve.on("raphael.remove",Le);eve.on("raphael.clear",Le);J.toString=function(){return"Rapha\u00ebl\u2019s object"};
var Mb=function(a){this.items=[];this.length=0;this.type="set";if(a)for(var b=0,c=a.length;b<c;b++)if(a[b]&&(a[b].constructor==J.constructor||a[b].constructor==Mb)){this[this.items.length]=this.items[this.items.length]=a[b];this.length++}},va=Mb.prototype;va.push=function(){for(var a,b,c=0,d=arguments.length;c<d;c++)if((a=arguments[c])&&(a.constructor==J.constructor||a.constructor==Mb)){b=this.items.length;this[b]=this.items[b]=a;this.length++}return this};va.pop=function(){this.length&&delete this[this.length--];
return this.items.pop()};va.forEach=function(a,b){for(var c=0,d=this.items.length;c<d;c++)if(a.call(b,this.items[c],c)===false)break;return this};for(var Hd in J)J[T](Hd)&&(va[Hd]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a][U](c,b)})}}(Hd));va.attr=function(a,b){if(a&&l.is(a,Aa)&&l.is(a[0],"object"))for(var c=0,d=a.length;c<d;c++)this.items[c].attr(a[c]);else{c=0;for(d=this.items.length;c<d;c++)this.items[c].attr(a,b)}return this};va.clear=function(){for(;this.length;)this.pop()};
va.splice=function(a,b,c){var a=a<0?V(this.length+a,0):a,b=V(0,X(this.length-a,b)),d=[],e=[],f=[],g;for(g=2;g<arguments.length;g++)f.push(arguments[g]);for(g=0;g<b;g++)e.push(this[a+g]);for(;g<this.length-a;g++)d.push(this[a+g]);var i=f.length;for(g=0;g<i+d.length;g++)this.items[a+g]=this[a+g]=g<i?f[g]:d[g-i];for(g=this.items.length=this.length=this.length-(b-i);this[g];)delete this[g++];return new Mb(e)};va.exclude=function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]==a){this.splice(b,1);return true}};
va.animate=function(a,b,c,d){(l.is(c,"function")||!c)&&(d=c||null);var e=this.items.length,f=e,g=this,i;if(!e)return this;d&&(i=function(){!--e&&d.call(g)});c=l.is(c,"string")?c:i;b=l.animation(a,b,c,i);for(a=this.items[--f].animate(b);f--;)this.items[f]&&!this.items[f].removed&&this.items[f].animateWith(a,b,b);return this};va.insertAfter=function(a){for(var b=this.items.length;b--;)this.items[b].insertAfter(a);return this};va.getBBox=function(){for(var a=[],b=[],c=[],d=[],e=this.items.length;e--;)if(!this.items[e].removed){var f=
this.items[e].getBBox();a.push(f.x);b.push(f.y);c.push(f.x+f.width);d.push(f.y+f.height)}a=X[U](0,a);b=X[U](0,b);c=V[U](0,c);d=V[U](0,d);return{x:a,y:b,x2:c,y2:d,width:c-a,height:d-b}};va.clone=function(a){for(var a=new Mb,b=0,c=this.items.length;b<c;b++)a.push(this.items[b].clone());return a};va.toString=function(){return"Rapha\u00ebl\u2018s set"};l.registerFont=function(a){if(!a.face)return a;this.fonts=this.fonts||{};var b={w:a.w,face:{},glyphs:{}},c=a.face["font-family"],d;for(d in a.face)a.face[T](d)&&
(b.face[d]=a.face[d]);this.fonts[c]?this.fonts[c].push(b):this.fonts[c]=[b];if(!a.svg){b.face["units-per-em"]=vb(a.face["units-per-em"],10);for(var e in a.glyphs)if(a.glyphs[T](e)){c=a.glyphs[e];b.glyphs[e]={w:c.w,k:{},d:c.d&&"M"+c.d.replace(/[mlcxtrv]/g,function(a){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[a]||"M"})+"z"};if(c.k)for(var f in c.k)c[T](f)&&(b.glyphs[e].k[f]=c.k[f])}}return a};S.getFont=function(a,b,c,d){d=d||"normal";c=c||"normal";b=+b||{normal:400,bold:700,lighter:300,bolder:800}[b]||
400;if(l.fonts){var e=l.fonts[a];if(!e){var a=RegExp("(^|\\s)"+a.replace(/[^\w\d\s+!~.:_-]/g,"")+"(\\s|$)","i"),f;for(f in l.fonts)if(l.fonts[T](f)&&a.test(f)){e=l.fonts[f];break}}var g;if(e){f=0;for(a=e.length;f<a;f++){g=e[f];if(g.face["font-weight"]==b&&(g.face["font-style"]==c||!g.face["font-style"])&&g.face["font-stretch"]==d)break}}return g}};S.print=function(a,b,c,d,e,f,g){var f=f||"middle",g=V(X(g||0,1),-1),i=pa(c)[Ra](""),h=0,j=0,k="";l.is(d,c)&&(d=this.getFont(d));if(d)for(var c=(e||16)/
d.face["units-per-em"],n=d.face.bbox[Ra](qd),e=+n[0],o=n[3]-n[1],p=0,f=+n[1]+(f=="baseline"?o+ +d.face.descent:o/2),n=0,r=i.length;n<r;n++){if(i[n]=="\n"){j=t=h=0;p=p+o}else var s=j&&d.glyphs[i[n-1]]||{},t=d.glyphs[i[n]],h=h+(j?(s.w||d.w)+(s.k&&s.k[i[n]]||0)+d.w*g:0),j=1;t&&t.d&&(k=k+l.transformPath(t.d,["t",h*c,p*c,"s",c,c,e,f,"t",(a-e)/c,(b-f)/c]))}return this.path(k).attr({fill:"#000",stroke:"none"})};S.add=function(a){if(l.is(a,"array"))for(var b=this.set(),c=0,d=a.length,e;c<d;c++){e=a[c]||{};
Gg[T](e.type)&&b.push(this[e.type]().attr(e))}return b};l.format=function(a,b){var c=l.is(b,Aa)?[0][K](b):arguments;a&&l.is(a,"string")&&c.length-1&&(a=a.replace(Hg,function(a,b){return c[++b]==null?"":c[b]}));return a||""};var ah=/\{([^\}]+)\}/g,bh=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;l.fullfill=function(a,b){return String(a).replace(ah,function(a,d){var e=b;d.replace(bh,function(a,b,c,d,h){b=b||d;if(e){b in e&&(e=e[b]);typeof e=="function"&&h&&(e=e())}});return e=(e==null||
e==b?a:e)+""})};l.ninja=function(){Me?B.win.Raphael=Ig:delete Raphael;return l};l.st=va;var yb=document,ef=void 0,ff=function(){/in/.test(yb.readyState)?setTimeout(ff,9):l.eve("raphael.DOMload")};null==yb.readyState&&yb.addEventListener&&(yb.addEventListener("DOMContentLoaded",ef=function(){yb.removeEventListener("DOMContentLoaded",ef,false);yb.readyState="complete"},!1),yb.readyState="loading");ff();Me?B.win.Raphael=l:Raphael=l;eve.on("raphael.DOMload",function(){md=true})}if(window.Raphael.svg){var r=
window.Raphael,Da=String,Fa=parseFloat,gf=parseInt,Nb=Math,Id=Nb.max,Ec=Nb.abs,Jd=Nb.pow,ac=/[, ]+/,Fc=r.eve,ch={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},Ma={};r.toString=function(){return"Your browser supports SVG.\nYou are running Rapha\u00ebl "+this.version};var A=function(a,b){if(b){typeof a=="string"&&(a=A(a));for(var c in b)b.hasOwnProperty(c)&&(c.substring(0,
6)=="xlink:"?a.setAttributeNS("http://www.w3.org/1999/xlink",c.substring(6),Da(b[c])):a.setAttribute(c,Da(b[c])))}else{a=r._g.doc.createElementNS("http://www.w3.org/2000/svg",a);a.style&&(a.style.webkitTapHighlightColor="rgba(0,0,0,0)")}return a},hf=function(a,b){var c="linear",d=a.id+b,e=0.5,f=0.5,g=a.node,i=a.paper,h=g.style,j=r._g.doc.getElementById(d);if(!j){b=Da(b).replace(r._radial_gradient,function(a,b,d){c="radial";if(b&&d){e=Fa(b);f=Fa(d);a=(f>0.5)*2-1;Jd(e-0.5,2)+Jd(f-0.5,2)>0.25&&(f=Nb.sqrt(0.25-
Jd(e-0.5,2))*a+0.5)&&f!=0.5&&(f=f.toFixed(5)-1E-5*a)}return""});b=b.split(/\s*\-\s*/);if(c=="linear"){j=b.shift();j=-Fa(j);if(isNaN(j))return null;var k=[0,0,Nb.cos(r.rad(j)),Nb.sin(r.rad(j))],j=1/(Id(Ec(k[2]),Ec(k[3]))||1);k[2]=k[2]*j;k[3]=k[3]*j;if(k[2]<0){k[0]=-k[2];k[2]=0}if(k[3]<0){k[1]=-k[3];k[3]=0}}var n=r._parseDots(b);if(!n)return null;d=d.replace(/[\(\)\s,\xb0#]/g,"_");if(a.gradient&&d!=a.gradient.id){i.defs.removeChild(a.gradient);delete a.gradient}if(!a.gradient){j=A(c+"Gradient",{id:d});
a.gradient=j;A(j,c=="radial"?{fx:e,fy:f}:{x1:k[0],y1:k[1],x2:k[2],y2:k[3],gradientTransform:a.matrix.invert()});i.defs.appendChild(j);i=0;for(k=n.length;i<k;i++)j.appendChild(A("stop",{offset:n[i].offset?n[i].offset:i?"100%":"0%","stop-color":n[i].color||"#fff"}))}}A(g,{fill:"url(#"+d+")",opacity:1,"fill-opacity":1});h.fill="";h.opacity=1;return h.fillOpacity=1},Gc=function(a){var b=a.getBBox(1);A(a.pattern,{patternTransform:a.matrix.invert()+" translate("+b.x+","+b.y+")"})},fb=function(a,b,c){if(a.type==
"path"){for(var d=Da(b).toLowerCase().split("-"),e=a.paper,f=c?"end":"start",g=a.node,i=a.attrs,h=i["stroke-width"],j=d.length,k="classic",n,l,p=3,o=3,s=5;j--;)switch(d[j]){case "block":case "classic":case "oval":case "diamond":case "open":case "none":k=d[j];break;case "wide":o=5;break;case "narrow":o=2;break;case "long":p=5;break;case "short":p=2}if(k=="open"){p=p+2;o=o+2;s=s+2;n=1;l=c?4:1;d={fill:"none",stroke:i.stroke}}else{l=n=p/2;d={fill:i.stroke,stroke:"none"}}if(a._.arrows)if(c){a._.arrows.endPath&&
Ma[a._.arrows.endPath]--;a._.arrows.endMarker&&Ma[a._.arrows.endMarker]--}else{a._.arrows.startPath&&Ma[a._.arrows.startPath]--;a._.arrows.startMarker&&Ma[a._.arrows.startMarker]--}else a._.arrows={};if(k!="none"){var j="raphael-marker-"+k,t="raphael-marker-"+f+k+p+o;if(r._g.doc.getElementById(j))Ma[j]++;else{e.defs.appendChild(A(A("path"),{"stroke-linecap":"round",d:ch[k],id:j}));Ma[j]=1}var v=r._g.doc.getElementById(t);if(v){Ma[t]++;p=v.getElementsByTagName("use")[0]}else{v=A(A("marker"),{id:t,
markerHeight:o,markerWidth:p,orient:"auto",refX:l,refY:o/2});p=A(A("use"),{"xlink:href":"#"+j,transform:(c?"rotate(180 "+p/2+" "+o/2+") ":"")+"scale("+p/s+","+o/s+")","stroke-width":(1/((p/s+o/s)/2)).toFixed(4)});v.appendChild(p);e.defs.appendChild(v);Ma[t]=1}A(p,d);e=n*(k!="diamond"&&k!="oval");if(c){c=a._.arrows.startdx*h||0;h=r.getTotalLength(i.path)-e*h}else{c=e*h;h=r.getTotalLength(i.path)-(a._.arrows.enddx*h||0)}d={};d["marker-"+f]="url(#"+t+")";if(h||c)d.d=Raphael.getSubpath(i.path,c,h);A(g,
d);a._.arrows[f+"Path"]=j;a._.arrows[f+"Marker"]=t;a._.arrows[f+"dx"]=e;a._.arrows[f+"Type"]=k;a._.arrows[f+"String"]=b}else{if(c){c=a._.arrows.startdx*h||0;h=r.getTotalLength(i.path)-c}else{c=0;h=r.getTotalLength(i.path)-(a._.arrows.enddx*h||0)}a._.arrows[f+"Path"]&&A(g,{d:Raphael.getSubpath(i.path,c,h)});delete a._.arrows[f+"Path"];delete a._.arrows[f+"Marker"];delete a._.arrows[f+"dx"];delete a._.arrows[f+"Type"];delete a._.arrows[f+"String"]}for(d in Ma)if(Ma.hasOwnProperty(d)&&!Ma[d])(a=r._g.doc.getElementById(d))&&
a.parentNode.removeChild(a)}},dh={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},jf=function(a,b,c){if(b=dh[Da(b).toLowerCase()]){for(var d=a.attrs["stroke-width"]||"1",c={round:d,square:d,butt:0}[a.attrs["stroke-linecap"]||c["stroke-linecap"]]||0,e=[],f=b.length;f--;)e[f]=b[f]*d+(f%2?1:-1)*c;A(a.node,{"stroke-dasharray":e.join(",")})}},Kd=function(a,b){var c=a.node,d=a.attrs,e=c.style.visibility;
c.style.visibility="hidden";for(var f in b)if(b.hasOwnProperty(f)&&r._availableAttrs.hasOwnProperty(f)){var g=b[f];d[f]=g;switch(f){case "blur":a.blur(g);break;case "href":case "title":case "target":var i=c.parentNode;if(i.tagName.toLowerCase()!="a"){var h=A("a");i.insertBefore(h,c);h.appendChild(c);i=h}f=="target"?i.setAttributeNS("http://www.w3.org/1999/xlink","show",g=="blank"?"new":g):i.setAttributeNS("http://www.w3.org/1999/xlink",f,g);break;case "cursor":c.style.cursor=g;break;case "transform":a.transform(g);
break;case "arrow-start":fb(a,g);break;case "arrow-end":fb(a,g,1);break;case "clip-rect":i=Da(g).split(ac);if(i.length==4){a.clip&&a.clip.parentNode.parentNode.removeChild(a.clip.parentNode);var h=A("clipPath"),j=A("rect");h.id=r.createUUID();A(j,{x:i[0],y:i[1],width:i[2],height:i[3]});h.appendChild(j);a.paper.defs.appendChild(h);A(c,{"clip-path":"url(#"+h.id+")"});a.clip=j}if(!g)if(g=c.getAttribute("clip-path")){(g=r._g.doc.getElementById(g.replace(/(^url\(#|\)$)/g,"")))&&g.parentNode.removeChild(g);
A(c,{"clip-path":""});delete a.clip}break;case "path":if(a.type=="path"){A(c,{d:g?d.path=r._pathToAbsolute(g):"M0,0"});a._.dirty=1;if(a._.arrows){"startString"in a._.arrows&&fb(a,a._.arrows.startString);"endString"in a._.arrows&&fb(a,a._.arrows.endString,1)}}break;case "width":c.setAttribute(f,g);a._.dirty=1;if(d.fx){f="x";g=d.x}else break;case "x":d.fx&&(g=-d.x-(d.width||0));case "rx":if(f=="rx"&&a.type=="rect")break;case "cx":c.setAttribute(f,g);a.pattern&&Gc(a);a._.dirty=1;break;case "height":c.setAttribute(f,
g);a._.dirty=1;if(d.fy){f="y";g=d.y}else break;case "y":d.fy&&(g=-d.y-(d.height||0));case "ry":if(f=="ry"&&a.type=="rect")break;case "cy":c.setAttribute(f,g);a.pattern&&Gc(a);a._.dirty=1;break;case "r":a.type=="rect"?A(c,{rx:g,ry:g}):c.setAttribute(f,g);a._.dirty=1;break;case "src":a.type=="image"&&c.setAttributeNS("http://www.w3.org/1999/xlink","href",g);break;case "stroke-width":if(a._.sx!=1||a._.sy!=1)g=g/(Id(Ec(a._.sx),Ec(a._.sy))||1);a.paper._vbSize&&(g=g*a.paper._vbSize);c.setAttribute(f,g);
d["stroke-dasharray"]&&jf(a,d["stroke-dasharray"],b);if(a._.arrows){"startString"in a._.arrows&&fb(a,a._.arrows.startString);"endString"in a._.arrows&&fb(a,a._.arrows.endString,1)}break;case "stroke-dasharray":jf(a,g,b);break;case "fill":var k=Da(g).match(r._ISURL);if(k){var h=A("pattern"),n=A("image");h.id=r.createUUID();A(h,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});A(n,{x:0,y:0,"xlink:href":k[1]});h.appendChild(n);(function(b){r._preload(k[1],function(){var c=this.offsetWidth,d=
this.offsetHeight;A(b,{width:c,height:d});A(n,{width:c,height:d});a.paper.safari()})})(h);a.paper.defs.appendChild(h);A(c,{fill:"url(#"+h.id+")"});a.pattern=h;a.pattern&&Gc(a);break}i=r.getRGB(g);if(i.error){if((a.type=="circle"||a.type=="ellipse"||Da(g).charAt()!="r")&&hf(a,g)){if("opacity"in d||"fill-opacity"in d)if(i=r._g.doc.getElementById(c.getAttribute("fill").replace(/^url\(#|\)$/g,""))){i=i.getElementsByTagName("stop");A(i[i.length-1],{"stop-opacity":("opacity"in d?d.opacity:1)*("fill-opacity"in
d?d["fill-opacity"]:1)})}d.gradient=g;d.fill="none";break}}else{delete b.gradient;delete d.gradient;!r.is(d.opacity,"undefined")&&r.is(b.opacity,"undefined")&&A(c,{opacity:d.opacity});!r.is(d["fill-opacity"],"undefined")&&r.is(b["fill-opacity"],"undefined")&&A(c,{"fill-opacity":d["fill-opacity"]})}i.hasOwnProperty("opacity")&&A(c,{"fill-opacity":i.opacity>1?i.opacity/100:i.opacity});case "stroke":i=r.getRGB(g);c.setAttribute(f,i.hex);f=="stroke"&&i.hasOwnProperty("opacity")&&A(c,{"stroke-opacity":i.opacity>
1?i.opacity/100:i.opacity});if(f=="stroke"&&a._.arrows){"startString"in a._.arrows&&fb(a,a._.arrows.startString);"endString"in a._.arrows&&fb(a,a._.arrows.endString,1)}break;case "gradient":(a.type=="circle"||a.type=="ellipse"||Da(g).charAt()!="r")&&hf(a,g);break;case "opacity":d.gradient&&!d.hasOwnProperty("stroke-opacity")&&A(c,{"stroke-opacity":g>1?g/100:g});case "fill-opacity":if(d.gradient){if(i=r._g.doc.getElementById(c.getAttribute("fill").replace(/^url\(#|\)$/g,""))){i=i.getElementsByTagName("stop");
A(i[i.length-1],{"stop-opacity":g})}break}default:f=="font-size"&&(g=gf(g,10)+"px");i=f.replace(/(\-.)/g,function(a){return a.substring(1).toUpperCase()});c.style[i]=g;a._.dirty=1;c.setAttribute(f,g)}}if(!(a.type!="text"||!b.hasOwnProperty("text")&&!b.hasOwnProperty("font")&&!b.hasOwnProperty("font-size")&&!b.hasOwnProperty("x")&&!b.hasOwnProperty("y"))){f=a.attrs;g=a.node;i=g.firstChild?gf(r._g.doc.defaultView.getComputedStyle(g.firstChild,"").getPropertyValue("font-size"),10):10;if(b.hasOwnProperty("text")){for(f.text=
b.text;g.firstChild;)g.removeChild(g.firstChild);for(var h=Da(b.text).split("\n"),d=[],l=0,p=h.length;l<p;l++){j=A("tspan");l&&A(j,{dy:i*1.2,x:f.x});j.appendChild(r._g.doc.createTextNode(h[l]));g.appendChild(j);d[l]=j}}else{d=g.getElementsByTagName("tspan");l=0;for(p=d.length;l<p;l++)l?A(d[l],{dy:i*1.2,x:f.x}):A(d[0],{dy:0})}A(g,{x:f.x,y:f.y});a._.dirty=1;g=a._getBBox();(f=f.y-(g.y+g.height/2))&&r.is(f,"finite")&&A(d[0],{dy:f})}c.style.visibility=e},gb=function(a,b){this[0]=this.node=a;a.raphael=
true;this.id=r._oid++;a.raphaelid=this.id;this.matrix=r.matrix();this.realPath=null;this.paper=b;this.attrs=this.attrs||{};this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1};!b.bottom&&(b.bottom=this);(this.prev=b.top)&&(b.top.next=this);b.top=this;this.next=null},ga=r.el;gb.prototype=ga;ga.constructor=gb;r._engine.path=function(a,b){var c=A("path");b.canvas&&b.canvas.appendChild(c);c=new gb(c,b);c.type="path";Kd(c,{fill:"none",stroke:"#000",path:a});return c};ga.rotate=function(a,b,c){if(this.removed)return this;
a=Da(a).split(ac);if(a.length-1){b=Fa(a[1]);c=Fa(a[2])}a=Fa(a[0]);c==null&&(b=c);if(b==null||c==null){c=this.getBBox(1);b=c.x+c.width/2;c=c.y+c.height/2}this.transform(this._.transform.concat([["r",a,b,c]]));return this};ga.scale=function(a,b,c,d){if(this.removed)return this;a=Da(a).split(ac);if(a.length-1){b=Fa(a[1]);c=Fa(a[2]);d=Fa(a[3])}a=Fa(a[0]);b==null&&(b=a);d==null&&(c=d);if(c==null||d==null)var e=this.getBBox(1);c=c==null?e.x+e.width/2:c;d=d==null?e.y+e.height/2:d;this.transform(this._.transform.concat([["s",
a,b,c,d]]));return this};ga.translate=function(a,b){if(this.removed)return this;a=Da(a).split(ac);a.length-1&&(b=Fa(a[1]));a=Fa(a[0])||0;this.transform(this._.transform.concat([["t",a,+b||0]]));return this};ga.transform=function(a){var b=this._;if(a==null)return b.transform;r._extractTransform(this,a);this.clip&&A(this.clip,{transform:this.matrix.invert()});this.pattern&&Gc(this);this.node&&A(this.node,{transform:this.matrix});if(b.sx!=1||b.sy!=1){a=this.attrs.hasOwnProperty("stroke-width")?this.attrs["stroke-width"]:
1;this.attr({"stroke-width":a})}return this};ga.hide=function(){!this.removed&&this.paper.safari(this.node.style.display="none");return this};ga.show=function(){!this.removed&&this.paper.safari(this.node.style.display="");return this};ga.remove=function(){if(!this.removed&&this.node.parentNode){var a=this.paper;a.__set__&&a.__set__.exclude(this);Fc.unbind("raphael.*.*."+this.id);this.gradient&&a.defs.removeChild(this.gradient);r._tear(this,a);this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.removeChild(this.node.parentNode):
this.node.parentNode.removeChild(this.node);for(var b in this)this[b]=typeof this[b]=="function"?r._removedFactory(b):null;this.removed=true}};ga._getBBox=function(){if(this.node.style.display=="none"){this.show();var a=true}var b={};try{b=this.node.getBBox()}catch(c){}finally{b=b||{}}a&&this.hide();return b};ga.attr=function(a,b){if(this.removed)return this;if(a==null){var c={},d;for(d in this.attrs)this.attrs.hasOwnProperty(d)&&(c[d]=this.attrs[d]);c.gradient&&c.fill=="none"&&(c.fill=c.gradient)&&
delete c.gradient;c.transform=this._.transform;return c}if(b==null&&r.is(a,"string")){if(a=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(a=="transform")return this._.transform;d=a.split(ac);for(var c={},e=0,f=d.length;e<f;e++){a=d[e];c[a]=a in this.attrs?this.attrs[a]:r.is(this.paper.customAttributes[a],"function")?this.paper.customAttributes[a].def:r._availableAttrs[a]}return f-1?c:c[d[0]]}if(b==null&&r.is(a,"array")){c={};e=0;for(f=a.length;e<f;e++)c[a[e]]=
this.attr(a[e]);return c}if(b!=null){c={};c[a]=b}else a!=null&&r.is(a,"object")&&(c=a);for(e in c)Fc("raphael.attr."+e+"."+this.id,this,c[e]);for(e in this.paper.customAttributes)if(this.paper.customAttributes.hasOwnProperty(e)&&c.hasOwnProperty(e)&&r.is(this.paper.customAttributes[e],"function")){d=this.paper.customAttributes[e].apply(this,[].concat(c[e]));this.attrs[e]=c[e];for(f in d)d.hasOwnProperty(f)&&(c[f]=d[f])}Kd(this,c);return this};ga.toFront=function(){if(this.removed)return this;this.node.parentNode.tagName.toLowerCase()==
"a"?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var a=this.paper;a.top!=this&&r._tofront(this,a);return this};ga.toBack=function(){if(this.removed)return this;var a=this.node.parentNode;a.tagName.toLowerCase()=="a"?a.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):a.firstChild!=this.node&&a.insertBefore(this.node,this.node.parentNode.firstChild);r._toback(this,this.paper);return this};ga.insertAfter=
function(a){if(this.removed)return this;var b=a.node||a[a.length-1].node;b.nextSibling?b.parentNode.insertBefore(this.node,b.nextSibling):b.parentNode.appendChild(this.node);r._insertafter(this,a,this.paper);return this};ga.insertBefore=function(a){if(this.removed)return this;var b=a.node||a[0].node;b.parentNode.insertBefore(this.node,b);r._insertbefore(this,a,this.paper);return this};ga.blur=function(a){if(+a!==0){var b=A("filter"),c=A("feGaussianBlur");this.attrs.blur=a;b.id=r.createUUID();A(c,
{stdDeviation:+a||1.5});b.appendChild(c);this.paper.defs.appendChild(b);this._blur=b;A(this.node,{filter:"url(#"+b.id+")"})}else{if(this._blur){this._blur.parentNode.removeChild(this._blur);delete this._blur;delete this.attrs.blur}this.node.removeAttribute("filter")}};r._engine.circle=function(a,b,c,d){var e=A("circle");a.canvas&&a.canvas.appendChild(e);a=new gb(e,a);a.attrs={cx:b,cy:c,r:d,fill:"none",stroke:"#000"};a.type="circle";A(e,a.attrs);return a};r._engine.rect=function(a,b,c,d,e,f){var g=
A("rect");a.canvas&&a.canvas.appendChild(g);a=new gb(g,a);a.attrs={x:b,y:c,width:d,height:e,r:f||0,rx:f||0,ry:f||0,fill:"none",stroke:"#000"};a.type="rect";A(g,a.attrs);return a};r._engine.ellipse=function(a,b,c,d,e){var f=A("ellipse");a.canvas&&a.canvas.appendChild(f);a=new gb(f,a);a.attrs={cx:b,cy:c,rx:d,ry:e,fill:"none",stroke:"#000"};a.type="ellipse";A(f,a.attrs);return a};r._engine.image=function(a,b,c,d,e,f){var g=A("image");A(g,{x:c,y:d,width:e,height:f,preserveAspectRatio:"none"});g.setAttributeNS("http://www.w3.org/1999/xlink",
"href",b);a.canvas&&a.canvas.appendChild(g);a=new gb(g,a);a.attrs={x:c,y:d,width:e,height:f,src:b};a.type="image";return a};r._engine.text=function(a,b,c,d){var e=A("text");a.canvas&&a.canvas.appendChild(e);a=new gb(e,a);a.attrs={x:b,y:c,"text-anchor":"middle",text:d,font:r._availableAttrs.font,stroke:"none",fill:"#000"};a.type="text";Kd(a,a.attrs);return a};r._engine.setSize=function(a,b){this.width=a||this.width;this.height=b||this.height;this.canvas.setAttribute("width",this.width);this.canvas.setAttribute("height",
this.height);this._viewBox&&this.setViewBox.apply(this,this._viewBox);return this};r._engine.create=function(){var a=r._getContainer.apply(0,arguments),b=a&&a.container,c=a.x,d=a.y,e=a.width,a=a.height;if(!b)throw Error("SVG container not found.");var f=A("svg"),g,c=c||0,d=d||0,e=e||512,a=a||342;A(f,{height:a,version:1.1,width:e,xmlns:"http://www.w3.org/2000/svg"});if(b==1){f.style.cssText="overflow:hidden;position:absolute;left:"+c+"px;top:"+d+"px";r._g.doc.body.appendChild(f);g=1}else{f.style.cssText=
"overflow:hidden;position:relative";b.firstChild?b.insertBefore(f,b.firstChild):b.appendChild(f)}b=new r._Paper;b.width=e;b.height=a;b.canvas=f;b.clear();b._left=b._top=0;g&&(b.renderfix=function(){});b.renderfix();return b};r._engine.setViewBox=function(a,b,c,d,e){Fc("raphael.setViewBox",this,this._viewBox,[a,b,c,d,e]);var f=Id(c/this.width,d/this.height),g=this.top,i=e?"meet":"xMinYMin",h;if(a==null){this._vbSize&&(f=1);delete this._vbSize;h="0 0 "+this.width+" "+this.height}else{this._vbSize=f;
h=a+" "+b+" "+c+" "+d}for(A(this.canvas,{viewBox:h,preserveAspectRatio:i});f&&g;){i="stroke-width"in g.attrs?g.attrs["stroke-width"]:1;g.attr({"stroke-width":i});g._.dirty=1;g._.dirtyT=1;g=g.prev}this._viewBox=[a,b,c,d,!!e];return this};r.prototype.renderfix=function(){var a=this.canvas,b=a.style,c;try{c=a.getScreenCTM()||a.createSVGMatrix()}catch(d){c=a.createSVGMatrix()}a=-c.e%1;c=-c.f%1;if(a||c){if(a){this._left=(this._left+a)%1;b.left=this._left+"px"}if(c){this._top=(this._top+c)%1;b.top=this._top+
"px"}}};r.prototype.clear=function(){r.eve("raphael.clear",this);for(var a=this.canvas;a.firstChild;)a.removeChild(a.firstChild);this.bottom=this.top=null;(this.desc=A("desc")).appendChild(r._g.doc.createTextNode("Created with Rapha\u00ebl "+r.version));a.appendChild(this.desc);a.appendChild(this.defs=A("defs"))};r.prototype.remove=function(){Fc("raphael.remove",this);this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var a in this)this[a]=typeof this[a]=="function"?r._removedFactory(a):
null};var kf=r.st,bc;for(bc in ga)ga.hasOwnProperty(bc)&&!kf.hasOwnProperty(bc)&&(kf[bc]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a].apply(c,b)})}}(bc))}if(window.Raphael.vml){var u=window.Raphael,ba=String,wa=parseFloat,cc=Math,xa=cc.round,Ld=cc.max,lf=cc.min,Hc=cc.abs,dc=/[, ]+/,eh=u.eve,mf={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},fh=/([clmz]),?([^clmz]*)/gi,gh=/ progid:\S+Blur\([^\)]+\)/g,hh=/-?[^,\s-]+/g,ih={path:1,rect:1,image:1},jh={circle:1,ellipse:1},
nf=function(a,b,c){var d=u.matrix();d.rotate(-a,0.5,0.5);return{dx:d.x(b,c),dy:d.y(b,c)}},Ic=function(a,b,c,d,e,f){var g=a._,i=a.matrix,h=g.fillpos,a=a.node,j=a.style,k=1,n="",l=21600/b,p=21600/c;j.visibility="hidden";if(b&&c){a.coordsize=Hc(l)+" "+Hc(p);j.rotation=f*(b*c<0?-1:1);if(f){e=nf(f,d,e);d=e.dx;e=e.dy}b<0&&(n=n+"x");c<0&&(n=n+" y")&&(k=-1);j.flip=n;a.coordorigin=d*-l+" "+e*-p;if(h||g.fillsize){d=(d=a.getElementsByTagName("fill"))&&d[0];a.removeChild(d);if(h){e=nf(f,i.x(h[0],h[1]),i.y(h[0],
h[1]));d.position=e.dx*k+" "+e.dy*k}if(g.fillsize)d.size=g.fillsize[0]*Hc(b)+" "+g.fillsize[1]*Hc(c);a.appendChild(d)}j.visibility="visible"}};u.toString=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\u00ebl "+this.version};var of=function(a,b,c){for(var b=ba(b).toLowerCase().split("-"),c=c?"end":"start",d=b.length,e="classic",f="medium",g="medium";d--;)switch(b[d]){case "block":case "classic":case "oval":case "diamond":case "open":case "none":e=
b[d];break;case "wide":case "narrow":g=b[d];break;case "long":case "short":f=b[d]}a=a.node.getElementsByTagName("stroke")[0];a[c+"arrow"]=e;a[c+"arrowlength"]=f;a[c+"arrowwidth"]=g},ec=function(a,b){a.attrs=a.attrs||{};var c=a.node,d=a.attrs,e=c.style,f=ih[a.type]&&(b.x!=d.x||b.y!=d.y||b.width!=d.width||b.height!=d.height||b.cx!=d.cx||b.cy!=d.cy||b.rx!=d.rx||b.ry!=d.ry||b.r!=d.r),g=jh[a.type]&&(d.cx!=b.cx||d.cy!=b.cy||d.r!=b.r||d.rx!=b.rx||d.ry!=b.ry),i;for(i in b)b.hasOwnProperty(i)&&(d[i]=b[i]);
if(f){d.path=u._getPath[a.type](a);a._.dirty=1}b.href&&(c.href=b.href);b.title&&(c.title=b.title);b.target&&(c.target=b.target);b.cursor&&(e.cursor=b.cursor);"blur"in b&&a.blur(b.blur);if(b.path&&a.type=="path"||f){e=~ba(d.path).toLowerCase().indexOf("r")?u._pathToAbsolute(d.path):d.path;f=/[ahqstv]/ig;i=u._pathToAbsolute;ba(e).match(f)&&(i=u._path2curve);f=/[clmz]/g;if(i==u._pathToAbsolute&&!ba(e).match(f))e=ba(e).replace(fh,function(a,b,c){var d=[],e=b.toLowerCase()=="m",f=mf[b];c.replace(hh,function(a){if(e&&
d.length==2){f=f+(d+mf[b=="m"?"l":"L"]);d=[]}d.push(xa(a*21600))});return f+d});else{for(var f=i(e),h,e=[],j=0,k=f.length;j<k;j++){i=f[j];h=f[j][0].toLowerCase();h=="z"&&(h="x");for(var l=1,o=i.length;l<o;l++)h=h+(xa(i[l]*21600)+(l!=o-1?",":""));e.push(h)}e=e.join(" ")}c.path=e;if(a.type=="image"){a._.fillpos=[d.x,d.y];a._.fillsize=[d.width,d.height];Ic(a,1,1,0,0,0)}}"transform"in b&&a.transform(b.transform);if(g){g=+d.cx;e=+d.cy;f=+d.rx||+d.r||0;i=+d.ry||+d.r||0;c.path=u.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",
xa((g-f)*21600),xa((e-i)*21600),xa((g+f)*21600),xa((e+i)*21600),xa(g*21600))}if("clip-rect"in b){g=ba(b["clip-rect"]).split(dc);if(g.length==4){g[2]=+g[2]+ +g[0];g[3]=+g[3]+ +g[1];e=c.clipRect||u._g.doc.createElement("div");f=e.style;f.clip=u.format("rect({1}px {2}px {3}px {0}px)",g);if(!c.clipRect){f.position="absolute";f.top=0;f.left=0;f.width=a.paper.width+"px";f.height=a.paper.height+"px";c.parentNode.insertBefore(e,c);e.appendChild(c);c.clipRect=e}}if(!b["clip-rect"])c.clipRect&&(c.clipRect.style.clip=
"auto")}if(a.textpath){g=a.textpath.style;b.font&&(g.font=b.font);b["font-family"]&&(g.fontFamily='"'+b["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,"")+'"');b["font-size"]&&(g.fontSize=b["font-size"]);b["font-weight"]&&(g.fontWeight=b["font-weight"]);b["font-style"]&&(g.fontStyle=b["font-style"])}"arrow-start"in b&&of(a,b["arrow-start"]);"arrow-end"in b&&of(a,b["arrow-end"],1);if(b.opacity!=null||b["stroke-width"]!=null||b.fill!=null||b.src!=null||b.stroke!=null||b["stroke-width"]!=null||
b["stroke-opacity"]!=null||b["fill-opacity"]!=null||b["stroke-dasharray"]!=null||b["stroke-miterlimit"]!=null||b["stroke-linejoin"]!=null||b["stroke-linecap"]!=null){g=(g=c.getElementsByTagName("fill"))&&g[0];!g&&(g=Sa("fill"));if(a.type=="image"&&b.src)g.src=b.src;b.fill&&(g.on=true);if(g.on==null||b.fill=="none"||b.fill===null)g.on=false;if(g.on&&b.fill)if(e=ba(b.fill).match(u._ISURL)){g.parentNode==c&&c.removeChild(g);g.rotate=true;g.src=e[1];g.type="tile";var p=a.getBBox(1);g.position=p.x+" "+
p.y;a._.fillpos=[p.x,p.y];u._preload(e[1],function(){a._.fillsize=[this.offsetWidth,this.offsetHeight]})}else{g.color=u.getRGB(b.fill).hex;g.src="";g.type="solid";if(e=u.getRGB(b.fill).error)if(e=a.type in{circle:1,ellipse:1}||ba(b.fill).charAt()!="r")a:{e=a;i=b.fill;f=g;e.attrs=e.attrs||{};var r=Math.pow,s="linear",t=".5 .5";e.attrs.gradient=i;i=ba(i).replace(u._radial_gradient,function(a,b,c){s="radial";if(b&&c){b=wa(b);c=wa(c);r(b-0.5,2)+r(c-0.5,2)>0.25&&(c=cc.sqrt(0.25-r(b-0.5,2))*((c>0.5)*2-
1)+0.5);t=b+" "+c}return""});i=i.split(/\s*\-\s*/);if(s=="linear"){p=i.shift();p=-wa(p);if(isNaN(p)){e=null;break a}}if(i=u._parseDots(i)){e=e.shape||e.node;if(i.length){e.removeChild(f);f.on=true;f.method="none";f.color=i[0].color;f.color2=i[i.length-1].color;h=[];j=0;for(k=i.length;j<k;j++)i[j].offset&&h.push(i[j].offset+" "+i[j].color);f.colors=h.length?h.join():"0% "+f.color;if(s=="radial"){f.type="gradientTitle";f.focus="100%";f.focussize="0 0";f.focusposition=t;f.angle=0}else{f.type="gradient";
f.angle=(270-p)%360}e.appendChild(f)}e=1}else e=null}if(e){d.fill="none";d.gradient=b.fill;g.rotate=false}}if("fill-opacity"in b||"opacity"in b){e=((+d["fill-opacity"]+1||2)-1)*((+d.opacity+1||2)-1)*((+u.getRGB(b.fill).o+1||2)-1);e=lf(Ld(e,0),1);g.opacity=e;if(g.src)g.color="none"}c.appendChild(g);p=c.getElementsByTagName("stroke")&&c.getElementsByTagName("stroke")[0];g=false;!p&&(g=p=Sa("stroke"));if(b.stroke&&b.stroke!="none"||b["stroke-width"]||b["stroke-opacity"]!=null||b["stroke-dasharray"]||
b["stroke-miterlimit"]||b["stroke-linejoin"]||b["stroke-linecap"])p.on=true;(b.stroke=="none"||b.stroke===null||p.on==null||b.stroke==0||b["stroke-width"]==0)&&(p.on=false);e=u.getRGB(b.stroke);p.on&&b.stroke&&(p.color=e.hex);e=((+d["stroke-opacity"]+1||2)-1)*((+d.opacity+1||2)-1)*((+e.o+1||2)-1);f=(wa(b["stroke-width"])||1)*0.75;e=lf(Ld(e,0),1);b["stroke-width"]==null&&(f=d["stroke-width"]);b["stroke-width"]&&(p.weight=f);f&&f<1&&(e=e*f)&&(p.weight=1);p.opacity=e;b["stroke-linejoin"]&&(p.joinstyle=
b["stroke-linejoin"]||"miter");p.miterlimit=b["stroke-miterlimit"]||8;b["stroke-linecap"]&&(p.endcap=b["stroke-linecap"]=="butt"?"flat":b["stroke-linecap"]=="square"?"square":"round");if(b["stroke-dasharray"]){e={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};p.dashstyle=e.hasOwnProperty(b["stroke-dasharray"])?e[b["stroke-dasharray"]]:""}g&&c.appendChild(p)}if(a.type=="text"){a.paper.canvas.style.display=
"";c=a.paper.span;p=d.font&&d.font.match(/\d+(?:\.\d*)?(?=px)/);e=c.style;d.font&&(e.font=d.font);d["font-family"]&&(e.fontFamily=d["font-family"]);d["font-weight"]&&(e.fontWeight=d["font-weight"]);d["font-style"]&&(e.fontStyle=d["font-style"]);p=wa(d["font-size"]||p&&p[0])||10;e.fontSize=p*100+"px";a.textpath.string&&(c.innerHTML=ba(a.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));c=c.getBoundingClientRect();a.W=d.w=(c.right-c.left)/100;a.H=d.h=(c.bottom-c.top)/
100;a.X=d.x;a.Y=d.y+a.H/2;("x"in b||"y"in b)&&(a.path.v=u.format("m{0},{1}l{2},{1}",xa(d.x*21600),xa(d.y*21600),xa(d.x*21600)+1));c=["x","y","text","font","font-family","font-weight","font-style","font-size"];p=0;for(g=c.length;p<g;p++)if(c[p]in b){a._.dirty=1;break}switch(d["text-anchor"]){case "start":a.textpath.style["v-text-align"]="left";a.bbx=a.W/2;break;case "end":a.textpath.style["v-text-align"]="right";a.bbx=-a.W/2;break;default:a.textpath.style["v-text-align"]="center";a.bbx=0}a.textpath.style["v-text-kern"]=
true}},Jc=function(a,b){this[0]=this.node=a;a.raphael=true;this.id=u._oid++;a.raphaelid=this.id;this.Y=this.X=0;this.attrs={};this.paper=b;this.matrix=u.matrix();this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1};!b.bottom&&(b.bottom=this);(this.prev=b.top)&&(b.top.next=this);b.top=this;this.next=null},ha=u.el;Jc.prototype=ha;ha.constructor=Jc;ha.transform=function(a){if(a==null)return this._.transform;var b=this.paper._viewBoxShift,c=b?"s"+[b.scale,b.scale]+"-1-1t"+[b.dx,b.dy]:"",d;
b&&(d=a=ba(a).replace(/\.{3}|\u2026/g,this._.transform||""));u._extractTransform(this,c+a);var b=this.matrix.clone(),e=this.skew,a=this.node,c=~ba(this.attrs.fill).indexOf("-"),f=!ba(this.attrs.fill).indexOf("url(");b.translate(-0.5,-0.5);if(f||c||this.type=="image"){e.matrix="1 0 0 1";e.offset="0 0";e=b.split();if(c&&e.noRotation||!e.isSimple){a.style.filter=b.toFilter();c=this.getBBox();e=this.getBBox(1);b=c.x-e.x;c=c.y-e.y;a.coordorigin=b*-21600+" "+c*-21600;Ic(this,1,1,b,c,0)}else{a.style.filter=
"";Ic(this,e.scalex,e.scaley,e.dx,e.dy,e.rotate)}}else{a.style.filter="";e.matrix=ba(b);e.offset=b.offset()}d&&(this._.transform=d);return this};ha.rotate=function(a,b,c){if(this.removed)return this;if(a!=null){a=ba(a).split(dc);if(a.length-1){b=wa(a[1]);c=wa(a[2])}a=wa(a[0]);c==null&&(b=c);if(b==null||c==null){c=this.getBBox(1);b=c.x+c.width/2;c=c.y+c.height/2}this._.dirtyT=1;this.transform(this._.transform.concat([["r",a,b,c]]));return this}};ha.translate=function(a,b){if(this.removed)return this;
a=ba(a).split(dc);a.length-1&&(b=wa(a[1]));a=wa(a[0])||0;b=+b||0;if(this._.bbox){this._.bbox.x=this._.bbox.x+a;this._.bbox.y=this._.bbox.y+b}this.transform(this._.transform.concat([["t",a,b]]));return this};ha.scale=function(a,b,c,d){if(this.removed)return this;a=ba(a).split(dc);if(a.length-1){b=wa(a[1]);c=wa(a[2]);d=wa(a[3]);isNaN(c)&&(c=null);isNaN(d)&&(d=null)}a=wa(a[0]);b==null&&(b=a);d==null&&(c=d);if(c==null||d==null)var e=this.getBBox(1);c=c==null?e.x+e.width/2:c;d=d==null?e.y+e.height/2:d;
this.transform(this._.transform.concat([["s",a,b,c,d]]));this._.dirtyT=1;return this};ha.hide=function(){!this.removed&&(this.node.style.display="none");return this};ha.show=function(){!this.removed&&(this.node.style.display="");return this};ha._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}};ha.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this);u.eve.unbind("raphael.*.*."+
this.id);u._tear(this,this.paper);this.node.parentNode.removeChild(this.node);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var a in this)this[a]=typeof this[a]=="function"?u._removedFactory(a):null;this.removed=true}};ha.attr=function(a,b){if(this.removed)return this;if(a==null){var c={},d;for(d in this.attrs)this.attrs.hasOwnProperty(d)&&(c[d]=this.attrs[d]);c.gradient&&c.fill=="none"&&(c.fill=c.gradient)&&delete c.gradient;c.transform=this._.transform;return c}if(b==null&&u.is(a,
"string")){if(a=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;d=a.split(dc);for(var c={},e=0,f=d.length;e<f;e++){a=d[e];c[a]=a in this.attrs?this.attrs[a]:u.is(this.paper.customAttributes[a],"function")?this.paper.customAttributes[a].def:u._availableAttrs[a]}return f-1?c:c[d[0]]}if(this.attrs&&b==null&&u.is(a,"array")){c={};e=0;for(f=a.length;e<f;e++)c[a[e]]=this.attr(a[e]);return c}if(b!=null){c={};c[a]=b}b==null&&u.is(a,"object")&&(c=a);for(e in c)eh("raphael.attr."+
e+"."+this.id,this,c[e]);if(c){for(e in this.paper.customAttributes)if(this.paper.customAttributes.hasOwnProperty(e)&&c.hasOwnProperty(e)&&u.is(this.paper.customAttributes[e],"function")){d=this.paper.customAttributes[e].apply(this,[].concat(c[e]));this.attrs[e]=c[e];for(f in d)d.hasOwnProperty(f)&&(c[f]=d[f])}if(c.text&&this.type=="text")this.textpath.string=c.text;ec(this,c)}return this};ha.toFront=function(){!this.removed&&this.node.parentNode.appendChild(this.node);this.paper&&this.paper.top!=
this&&u._tofront(this,this.paper);return this};ha.toBack=function(){if(this.removed)return this;if(this.node.parentNode.firstChild!=this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild);u._toback(this,this.paper)}return this};ha.insertAfter=function(a){if(this.removed)return this;a.constructor==u.st.constructor&&(a=a[a.length-1]);a.node.nextSibling?a.node.parentNode.insertBefore(this.node,a.node.nextSibling):a.node.parentNode.appendChild(this.node);u._insertafter(this,
a,this.paper);return this};ha.insertBefore=function(a){if(this.removed)return this;a.constructor==u.st.constructor&&(a=a[0]);a.node.parentNode.insertBefore(this.node,a.node);u._insertbefore(this,a,this.paper);return this};ha.blur=function(a){var b=this.node.runtimeStyle,c=b.filter,c=c.replace(gh,"");if(+a!==0){this.attrs.blur=a;b.filter=c+"  progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+a||1.5)+")";b.margin=u.format("-{0}px 0 0 -{0}px",xa(+a||1.5))}else{b.filter=c;b.margin=0;delete this.attrs.blur}};
u._engine.path=function(a,b){var c=Sa("shape");c.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px";c.coordsize="21600 21600";c.coordorigin=b.coordorigin;var d=new Jc(c,b),e={fill:"none",stroke:"#000"};a&&(e.path=a);d.type="path";d.path=[];d.Path="";ec(d,e);b.canvas.appendChild(c);e=Sa("skew");e.on=true;c.appendChild(e);d.skew=e;d.transform("");return d};u._engine.rect=function(a,b,c,d,e,f){var g=u._rectPath(b,c,d,e,f),a=a.path(g),i=a.attrs;a.X=i.x=b;a.Y=i.y=c;a.W=i.width=d;a.H=i.height=
e;i.r=f;i.path=g;a.type="rect";return a};u._engine.ellipse=function(a,b,c,d,e){a=a.path();a.X=b-d;a.Y=c-e;a.W=d*2;a.H=e*2;a.type="ellipse";ec(a,{cx:b,cy:c,rx:d,ry:e});return a};u._engine.circle=function(a,b,c,d){a=a.path();a.X=b-d;a.Y=c-d;a.W=a.H=d*2;a.type="circle";ec(a,{cx:b,cy:c,r:d});return a};u._engine.image=function(a,b,c,d,e,f){var g=u._rectPath(c,d,e,f),a=a.path(g).attr({stroke:"none"}),i=a.attrs,h=a.node,j=h.getElementsByTagName("fill")[0];i.src=b;a.X=i.x=c;a.Y=i.y=d;a.W=i.width=e;a.H=i.height=
f;i.path=g;a.type="image";j.parentNode==h&&h.removeChild(j);j.rotate=true;j.src=b;j.type="tile";a._.fillpos=[c,d];a._.fillsize=[e,f];h.appendChild(j);Ic(a,1,1,0,0,0);return a};u._engine.text=function(a,b,c,d){var e=Sa("shape"),f=Sa("path"),g=Sa("textpath"),b=b||0,c=c||0,d=d||"";f.v=u.format("m{0},{1}l{2},{1}",xa(b*21600),xa(c*21600),xa(b*21600)+1);f.textpathok=true;g.string=ba(d);g.on=true;e.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px";e.coordsize="21600 21600";e.coordorigin=
"0 0";var i=new Jc(e,a),h={fill:"#000",stroke:"none",font:u._availableAttrs.font,text:d};i.shape=e;i.path=f;i.textpath=g;i.type="text";i.attrs.text=ba(d);i.attrs.x=b;i.attrs.y=c;i.attrs.w=1;i.attrs.h=1;ec(i,h);e.appendChild(g);e.appendChild(f);a.canvas.appendChild(e);a=Sa("skew");a.on=true;e.appendChild(a);i.skew=a;i.transform("");return i};u._engine.setSize=function(a,b){var c=this.canvas.style;this.width=a;this.height=b;a==+a&&(a=a+"px");b==+b&&(b=b+"px");c.width=a;c.height=b;c.clip="rect(0 "+a+
" "+b+" 0)";this._viewBox&&u._engine.setViewBox.apply(this,this._viewBox);return this};u._engine.setViewBox=function(a,b,c,d,e){u.eve("raphael.setViewBox",this,this._viewBox,[a,b,c,d,e]);var f=this.width,g=this.height,i=1/Ld(c/f,d/g),h,j;if(e){h=g/d;j=f/c;c*h<f&&(a=a-(f-c*h)/2/h);d*j<g&&(b=b-(g-d*j)/2/j)}this._viewBox=[a,b,c,d,!!e];this._viewBoxShift={dx:-a,dy:-b,scale:i};this.forEach(function(a){a.transform("...")});return this};var Sa;u._engine.initWin=function(a){var b=a.document;b.createStyleSheet().addRule(".rvml",
"behavior:url(#default#VML)");try{!b.namespaces.rvml&&b.namespaces.add("rvml","urn:schemas-microsoft-com:vml");Sa=function(a){return b.createElement("<rvml:"+a+' class="rvml">')}}catch(c){Sa=function(a){return b.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}};u._engine.initWin(u._g.win);u._engine.create=function(){var a=u._getContainer.apply(0,arguments),b=a.container,c=a.height,d=a.width,e=a.x,a=a.y;if(!b)throw Error("VML container not found.");var f=new u._Paper,g=
f.canvas=u._g.doc.createElement("div"),i=g.style,e=e||0,a=a||0,d=d||512,c=c||342;f.width=d;f.height=c;d==+d&&(d=d+"px");c==+c&&(c=c+"px");f.coordsize="21600000 21600000";f.coordorigin="0 0";f.span=u._g.doc.createElement("span");f.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;";g.appendChild(f.span);i.cssText=u.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",d,c);if(b==1){u._g.doc.body.appendChild(g);
i.left=e+"px";i.top=a+"px";i.position="absolute"}else b.firstChild?b.insertBefore(g,b.firstChild):b.appendChild(g);f.renderfix=function(){};return f};u.prototype.clear=function(){u.eve("raphael.clear",this);this.canvas.innerHTML="";this.span=u._g.doc.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas.appendChild(this.span);this.bottom=this.top=null};u.prototype.remove=function(){u.eve("raphael.remove",
this);this.canvas.parentNode.removeChild(this.canvas);for(var a in this)this[a]=typeof this[a]=="function"?u._removedFactory(a):null;return true};var pf=u.st,fc;for(fc in ha)ha.hasOwnProperty(fc)&&!pf.hasOwnProperty(fc)&&(pf[fc]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a].apply(c,b)})}}(fc))}var h=window._;j=window.d3;var qf=qf||{},rf=rf||[],o=o||{},k=k||{};if(!gc)var gc={log:function(){},assert:function(){},warn:function(){}};var hb=o,C=k,kh=function(a){if(!isFinite(a))return a;
var b=""+a,c=Math.abs(a),d;if(c>=1E3){c=(""+c).split(/\./);d=c[0].length%3||3;c[0]=b.slice(0,d+(a<0))+c[0].slice(d).replace(/(\d{3})/g,",$1");b=c.join(".")}return b};C.makeClass=function(a,b){var c={},d=function(a,b){if(this instanceof d)typeof this.init=="function"&&this.init.apply(this,a===c?b:arguments);else return new d(c,arguments)};if(arguments.length>=2){d.prototype=new b;d.prototype.constructor=d}if(!C.undef(a)){d.prototype._cls_name=a;d._class=true}return d};C.undef=function(a){return typeof a==
"undefined"};C.constfunc=function(a){return function(){return a}};C.invertedIndex=function(a){var b={};h.each(a,function(a,d){b[a]=d});return b};C.identity=function(a){return a};C.strlenToPixel=function(a,b){return b=="bold"?Math.max(7*a,0):Math.max(6*a,0)};C.cloneobj=function(a){var b=h.clone(a);if(b.constructor!=a.constructor)b.constructor=a.constructor;if(h.has(a,"_attr"))b._attr=h.clone(a._attr);return b};C.postfix=function(a,b){var c={"0":"",3:"k",6:"m",9:"b",12:"t"};return!h.isUndefined(c[b])?
a+c[b]:a+"e"+(b>0?"+":"-")+Math.abs(b)};C.prettify=function(a,b){var c=0,d=0,b=arguments.length==1?Math.floor(Math.log(Math.abs(a))/Math.LN10):-b;if(arguments.length==2&&(b==2||b==5||b==8||b==11)){c=b+1;d=1}else if(b==-1){c=0;d=arguments.length==2?1:2}else if(b==-2){c=0;d=arguments.length==2?2:3}else if(b==1||b==2)c=0;else if(b>3&&b<6)c=3;else if(b>6&&b<9)c=6;else if(b>9&&b<12)c=9;else if(b>12&&b<15)c=12;else{c=b;d=arguments.length==2?0:1}var e=Math.round(a/Math.pow(10,c-d)),e=e/Math.pow(10,d),e=
e.toFixed(d);return C.postfix(kh(e),c)};C.roundTo=function(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c};C.array=function(a,b){for(var c=[],d=a,e,f=h.isFunction(b);d--;){e=f?b():b;c[d]=e}return c};C.grid=function(a,b,c){for(var d=0,e=0,f=[],g=h.isFunction(c),d=0;d<a;d++){for(var i=[],e=0;e<b;e++)g?i.push(c()):i.push(c);f.push(i)}return f};C.opts=function(){return function(a,b){arguments.length===0&&hb.error(12,"Function opts() called with less than 1 parameter.");var c=this,d=this._optsUpdate,
d=h.isFunction(d)?h.bind(d,this):function(){};if(arguments.length==1){if(!h.isString(a)&&h.keys(a).length>0){h.each(a,function(a,b){c._attr[b]=a;d(b,a)});return this}return this._attr[a]}C.assertString(a);this._attr[a]=b;d(a,b);return this}};C.singleOpts=function(a){return function(b){return arguments.length===0?this.opts(a):this.opts(a,b)}};C.getAttr=function(){var a={};h.each(this._attr,function(b,c){!h.isNull(b)&&(!h.isUndefined(b)&&b!=-Infinity&&b!=Infinity)&&(a[c]=b)});return a};C.dataGetter=
function(a){var a=a||{},b=a.onChange;return function(a){if(arguments.length===0)return this._data;if(!a||a._cls_name!="gg.data")a=hb.data(a);this._data=a;b&&b.apply(this);return this}};C.calculateFacet=function(a,b){if(!b)return[a];for(var c=b.nrow(),d=b.ncol(),c=C.array(c*d,function(){return a.clone()}),e=a.len(),d=0;d<e;d++){var f=a.getObject(d),g=b.bin(f);c[g].push(f)}return c};C.doubleMap=function(a,b){return h.map(a,function(a){return h.map(a,b)})};C.tripleMap=function(a,b){return h.map(a,function(a){return h.map(a,
function(a){return h.map(a,b)})})};var Md=[];C.concat=function(a){return Md.concat.apply(Md,a)};C.pushall=function(a,b){return Md.push.apply(a,b)};C.add=function(a,b){var c=h.isFunction(a),d=h.isFunction(b);return c&&d?function(c){return a(c)+b(c)}:c?function(c){return a(c)+b}:d?function(c){return a+b(c)}:C.constfunc(a+b)};C.sub=function(a,b){var c=h.isFunction(a),d=h.isFunction(b);return c&&d?function(c){return a(c)-b(c)}:c?function(c){return a(c)-b}:d?function(c){return a-b(c)}:C.constfunc(a-b)};
C.evaluate=function(a,b){return h.isFunction(a)?a(b):a};C.unionType=function(a){a=h.uniq(h.reject(a,h.isNull));a.sort();return a.length===0?null:a.length===1?a[0]:h.isEqual(a,["date","number"])?"date":h.include(a,"unknown")?"unknown":"category"};C.bool=function(a){return a?true:false};C.startswith=function(a,b){if(!h.isString(b)||!h.isString(a))return false;var c=b.length;return c>a.length?false:a.slice(0,c)===b};C.instantiate=function(a){return h.isString(a)?hb[a]():a&&a.prototype&&a.prototype._cls_name?
a():a};C.sum=function(){var a,b=0,c;if(h.isArray(this)){c=this.length;for(a=0;a<c;a++)b=b+this[a]}c=arguments.length;for(a=0;a<c;a++)b=b+arguments[a];return b};C.mergeArrays=function(a,b){var c=C.concat(a),b=b?b:C.identity,c=h.sortBy(c,b);return h.uniq(c,true,b)};C.minimumDelta=function(a,b){if(a.length<=1)return null;var c=a.length,d,e,b=b?b:function(a){return a},f=b(a[0]),g=Infinity;for(d=1;d<c;d++){e=b(a[d]);g=Math.min(g,e-f);f=e}return g};C.isSuperset=function(a,b){for(var c=0,d=0;d<b.length;d++){for(;a[c]!=
b[d]&&c<a.length;)c++;if(c==a.length)return false}return true};C.assertNumber=function(a){h.isNumber(a)||hb.warn(13,"Expecting a number but got "+a+".")};C.assertString=function(a){h.isString(a)||hb.warn(14,"Expecting a string but got "+a+".")};C.assertAes=function(a){h.include(hb.opts.aes,C.getBaseAes(a))||hb.error(11,"Aesthetics "+a+" does not exist.")};C.assertQuery=function(a){a==="data"||(a==="aes"||a==="aes_group"||a==="key")||hb.error(-1,"Query type "+a+" is invalid.")};C.getBlank=function(a){return Array(a+
1).join(" ")};C.qt=function(a){return'"'+a+'"'};C.toCode=function(a,b,c){a||(a=0);h.isNumber(b)||(b=a+2);if(!c.cls)c.cls=[];if(!c.params)c.params=[];if(!c.funcs)c.funcs=[];var d=C.getBlank(a)+c.cls+"("+c.params.join(", ")+")";h.each(c.funcs,function(a){var c=a[0],a=a[1]||[];h.isArray(a)||(a=[a]);d=d+("\n"+C.getBlank(b)+"."+c+"("+a.join(", ")+")")});return d};C.toCodeBasic=function(a,b){var c={cls:this._cls_name};if(h.isFunction(this.getAttr))c.funcs=[["opts",ea.stringify(this.getAttr())]];return C.toCode(a,
b,c)};C.timer=function(){return{_time:new Date,mark:function(){this._time=new Date}}};C.getRandomColor=function(){function a(){return Math.floor(Math.random()*256).toString(16)}return"#"+a()+a()+a()};k.isDerivedAes=function(a){return a.indexOf("_")>-1};k.getBaseAes=function(a){return a.split("_",1)[0]};var Nd=k;Nd.isNode=function(a){return typeof window.Node==="object"?a instanceof window.Node:a&&typeof a==="object"&&typeof a.nodeType==="number"&&typeof a.nodeName==="string"};Nd.isElement=function(a){return typeof window.HTMLElement===
"object"?a instanceof window.HTMLElement:a&&typeof a==="object"&&a.nodeType===1&&typeof a.nodeName==="string"};Nd.isURL=function(a){var b=/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return h.isString(a)&&b.test(a)};var o=o||{},k=k||{},lh=o;k.jQuery=function(){jQuery||lh.error(4,"jQuery is required, but is not found.");return jQuery};var Ob=k;Ob.Observer=function(){this.callbacks=[]};Ob.Observer.prototype.register=function(a,b,c){this.callbacks.push({key:a,callback:b,
name:c})};Ob.Observer.prototype.remove=function(a){this.callbacks=h.reject(this.callbacks,function(b){return b.callback===a})};Ob.Observer.prototype.removeNamed=function(a){this.callbacks=h.reject(this.callbacks,function(b){return b.name===a})};Ob.Observer.prototype.removeKey=function(a){this.callbacks=h.reject(this.callbacks,function(b){return b.key===a})};Ob.Observer.prototype.trigger=function(a,b){h.chain(this.callback).filter(function(b){return b.key===a}).each(function(a){a.callback(b)})};var mh=
function(a){a.tooltip&&k.addTooltip(this,a.tooltip);return this},nh=function(a,b){a&&this.dblclick(function(){var c=this.attr("data");a.call(this,c,b)});return this},Na=function(a){a.ggTooltip=mh;a.ggDoubleClick=nh};Raphael.fn.gg_point=function(a){Oa++;var b=a._offsetX,c=a._offsetY,d=this.circle().attr("postProcess",function(d){var f=d.cx,g=d.cy;d.cx=b+a.transX(f,g);d.cy=c+a.transY(f,g);return d}),d=k.addMouseover(a,d);Na(d);return d};Raphael.fn.gg_symbol=function(a){Oa++;var b=a._offsetX,c=a._offsetY,
d=this.path().attr("postProcess",function(d){var f=d.cx,g=d.cy,i=b+a.transX(f,g),f=c+a.transY(f,g);d.path=o.symbol.makePath(d.symbol,i,f,d.r);delete d.cx;delete d.cy;delete d.symbol;delete d.r;return d}),d=k.addMouseover(a,d);Na(d);return d};Raphael.fn.gg_text=function(a){Oa++;var b=a._offsetX,c=a._offsetY,d=this.text().attr("postProcess",function(d){var f=d.x,g=d.y;d.x=b+a.transX(f,g);d.y=c+a.transY(f,g);if(!d.text)d.text=" ";return d}),d=k.addMouseover(a,d);Na(d);return d};Raphael.fn.gg_cart_line=
function(a){Oa++;var b=a._offsetX,c=a._offsetY,d=this.path().attr("postProcess",function(d){var f,g,i,h;i=c+a.transY(d.x1,d.y1);h=c+a.transY(d.x2,d.y2);f=b+a.transX(d.x1,d.y1);g=b+a.transX(d.x2,d.y2);delete d.x1;delete d.x2;delete d.y1;delete d.y2;d.path=[["M",f,i],["L",g,h]];return d}),d=k.addMouseover(a,d);Na(d);return d};Raphael.fn.gg_cart_rect=function(a){Oa++;var b=a._offsetX,c=a._offsetY,d=this.rect().attr("postProcess",function(d){var f,g,i,h,j;f=a.transX(d.x1,d.y1);g=a.transX(d.x2,d.y2);i=
a.transY(d.x1,d.y1);h=a.transY(d.x2,d.y2);j=Math.min(f,g);g=Math.abs(g-f);f=Math.min(i,h);i=Math.abs(h-i);delete d.x1;delete d.x2;delete d.y1;delete d.y2;d.x=b+j;d.y=c+f;d.width=g;d.height=i;return d}),d=k.addMouseover(a,d);Na(d);return d};var Kc=-Math.PI/2,oh=2*Math.PI-1E-6,Od=function(a,b,c,d,e,f,g){return function(i){var h,j,l;if(a){h=f(i);j=g(i);l=d(i)+Kc;i=e(i)+Kc}else{h=d(i);j=e(i);l=f(i)+Kc;i=g(i)+Kc}return k.d3_arc(b,c,h,j,l,i)}};k.d3_arc=function(a,b,c,d,e,f){if(d<c)var g=c,c=d,d=g;var i=
(f<e&&(i=e,e=f,f=i),f-e),g=i<Math.PI?0:1,h=Math.cos(e),j=Math.sin(e),k=Math.cos(f),l=Math.sin(f);return i>=oh?c?[["M",a,b+d],["A",d,d,0,1,1,a,b-d],["A",d,d,0,1,1,a,b+d],["M",a,b+c],["A",c,c,0,1,0,a,b-c],["A",c,c,0,1,0,a,b+c],["Z"]]:d?[["M",a,b+d],["A",d,d,0,1,1,a,b-d],["A",d,d,0,1,1,a,b+d],["Z"]]:"":c?e==f?[["M",d*h+a,d*j+b],["L",c*k+a,c*l+b]]:[["M",d*h+a,d*j+b],["A",d,d,0,g,1,d*k+a,d*l+b],["L",c*k+a,c*l+b],["A",c,c,0,g,0,c*h+a,c*j+b],["Z"]]:d?e==f?[["M",d*h+a,d*j+b],["L",c*k+a,c*l+b]]:[["M",d*h+
a,d*j+b],["A",d,d,0,g,1,d*k+a,d*l+b],["L",a,b],["Z"]]:""};Raphael.fn.gg_polar_rect=function(a){Oa++;var b=a._offsetX,c=a._offsetY,d=a._flip,e=this.path().attr("preProcess",function(a){var e,i,h,j;e=a.x1;i=a.x2;h=a.y1;j=a.y2;delete a.x1;delete a.x2;delete a.y1;delete a.y2;a.path=Od(d,b,c,e,i,h,j);return a}),e=k.addMouseover(a,e);Na(e);return e};Raphael.fn.gg_cart_vline=function(a){Oa++;var b=a._offsetX,c=a._offsetY,d=this.path().attr("postProcess",function(d){var f,g,i,h;i=c+a.transY(d.x,d.y1);h=c+
a.transY(d.x,d.y2);f=b+a.transX(d.x,d.y1);g=b+a.transX(d.x,d.y2);d.path=[["M",f,i],["L",g,h]];delete d.x;delete d.y1;delete d.y2;return d}),d=k.addMouseover(a,d);Na(d);return d};Raphael.fn.gg_polar_vline=function(a){Oa++;var b=a._offsetX,c=a._offsetY,d=a._flip,e=this.path().attr("preProcess",function(a){var e,i,h,j;e=i=a.x;h=a.y1;j=a.y2;delete a.x;delete a.y1;delete a.y2;a.path=Od(d,b,c,e,i,h,j);return a}),e=k.addMouseover(a,e);Na(e);return e};Raphael.fn.gg_cart_hline=function(a){Oa++;var b=a._offsetX,
c=a._offsetY,d=this.path().attr("postProcess",function(d){var f,g,h,j;h=c+a.transY(d.x1,d.y);j=c+a.transY(d.x2,d.y);f=b+a.transX(d.x1,d.y);g=b+a.transX(d.x2,d.y);d.path=[["M",f,h],["L",g,j]];delete d.x1;delete d.x2;delete d.y;return d}),d=k.addMouseover(a,d);Na(d);return d};Raphael.fn.gg_polar_hline=function(a){Oa++;var b=a._offsetX,c=a._offsetY,d=a._flip,e=this.path().attr("preProcess",function(a){var e,h,j,k;e=a.x1;h=a.x2;j=k=a.y;delete a.x1;delete a.x2;delete a.y;a.path=Od(d,b,c,e,h,j,k);return a}),
e=k.addMouseover(a,e);Na(e);return e};k._path_function=function(a,b,c,d,e,f,g){var i=a._offsetX,j=a._offsetY,g=g.getObjects();f&&(g=h.sortBy(g,f));b=h.map(g,b);c=h.map(g,c);d&&d(b,c);if(e){c=e(b,c);b=c.x;c=c.y}d=[];e=true;f=b.length;for(g=0;g<f;g++){var k=b[g],l=c[g];if(h.isNumber(k)&&h.isNumber(l)){var n=a.transX(k,l),k=a.transY(k,l);if(h.isNumber(n)&&h.isNumber(k))if(e){d.push(["M",n+i,k+j]);e=false}else d.push(["L",n+i,k+j])}}return d};k._ensureFunction=function(a){for(var b in a){var c=a[b];typeof c!==
"function"&&(a[b]=k.constfunc(c))}};Raphael.fn.gg_path=function(a,b){Oa++;var c=this.path().attr("preProcess",function(c){var e=c._sort;delete c._sort;var f=c.x;delete c.x;var g=c.y;delete c.y;var i=c._pointModifier;delete c._pointModifier;c.path=h.bind(k._path_function,null,a,f,g,i,b,e);return c}),c=k.addMouseover(a,c);Na(c);return c};k.configRaphaelAttributes=function(a){var b=function(a,b){var e=this.attr("preProcess"),f=this.attr("postProcess");if(!a||!b)return{};if(b._style){var b=h.clone(b),
g=b._style;b.stroke=g.stroke;b.fill=g.color;b["stroke-width"]=g.strokewidth;b["fill-opacity"]=g.opacity;delete b._style}k._ensureFunction(b);e&&(b=e(h.clone(b)));var e={},i;for(i in b)e[i]=(0,b[i])(a);return f?f(e):e};a.ca.func=function(a){return b.call(this,this.attr("data"),a)};a.ca.data=function(a){return b.call(this,a,this.attr("func"))};a.ca.postProcess=function(){};a.ca.preProcess=function(){}};k.Raphael=Raphael;k.addMouseover=function(a,b){if(!a.opts("mouseover_highlight"))return b;b.mouseover(function(){var a=
b.attr("fill"),d=b.attr("stroke");if(a!="none"){b.data("_old_fill",a);b.attr("fill",j.rgb(a).darker().toString())}else if(b.attr("stroke-width")>0){b.data("_old_stroke",d);b.attr("stroke",j.rgb(d).darker().toString())}b.attr("cursor","hand")});b.mouseout(function(){b.attr("fill");b.attr("fill")!="none"?b.attr("fill",b.data("_old_fill")):b.attr("stroke-width")>0&&b.attr("stroke",b.data("_old_stroke"));b.attr("cursor","normal")});return b};var ph=function(a){var b=this.tooltipFn;(b=b(this.element.attr("data")))&&
$(a.originalTarget||a.srcElement).tooltip({title:b,helper:$("#polychart-helper"),trigger:"manual",placement:"left"}).tooltip("show")},qh=function(a){$(a.originalTarget||a.srcElement).tooltip("hide")};k.addTooltip=function(a,b){if(b){var c={tooltipFn:b,element:a};a.hover(ph,qh,c,c)}return a};k.unbindAll=function(a){if(a.events)for(var b=a.events,c=0;c<b.length;c++)b[c].unbind();a.removeData();for(var d in a)delete a[d]};var Oa=0;k.raphael_mark=function(){};var Pd=o,sf=function(a,b){this.code=a;this.msg=
b;this.toString=function(){return"Error Code #"+a+": "+b}};Pd.error=function(a,b){throw new sf(a,b);};Pd.warn=function(a,b){gc&&gc.log(new sf(a,b))};Pd.info=function(a){gc&&gc.log(a)};var M=o;M.opts={};M.opts.pivot={width:300,height:300,stat:"sum",columnFormatter:null,rowFormatter:null};M.opts.graph={width:300,height:300,"padding-left":null,"padding-right":null,"padding-top":null,"padding-bottom":null,"legend-position":"right","legend-width":60,"legend-height":30,"spacing-x":20,"spacing-y":40,"facet-x":20,
title:"","title-size":15,"title-bold":!0,"label-size":12,"label-bold":!1,"axis-y":"left","axis-y-line":null,"axis-y-label":null,"axis-y-ticks":null,"axis-y-ticklength":null,"axis-y-color":null,"axis-y-strokewidth":null,"axis-y-":null,"axis-x":"bottom","axis-x-line":null,"axis-x-label":null,"axis-x-ticks":null,"axis-x-ticklength":null,"axis-x-color":null,"axis-x-strokewidth":null,"grid-render-vertical":null,"grid-render-horizontal":null,"grid-stroke":null,"grid-strokewidth":null,"grid-dasharray":null,
branding:!0,dom:null,filter:null,"render-make-default-scale":!0,"render-compute":!0,"render-impute-mapping":!0,tooltip:null,"callback-warn":null};M.opts.aes="color fill font fontsize group opacity radius size stats stroke strokewidth symbol text tooltip x y".split(" ");M.opts.aes.sort();M.opts.mainFill="steelblue";M.opts.mainColor="black";M.opts.layer={x:"",y:1,color:M.opts.mainFill,opacity:0.9,stroke:"#FFFFFF",strokewidth:0,facet:!0,radius:3,visible:!0,"render-max":400};M.opts.point={stroke:M.opts.mainColor,
strokewidth:1,radius:6,padding:0};M.opts.box={stroke:M.opts.mainColor,strokewidth:1,padding:0.1,width:1,align:"center"};M.opts.bar={stroke:M.opts.mainColor,strokewidth:1,width:1,align:"center"};M.opts.line={color:M.opts.mainColor,strokewidth:2,padding:0.5};M.opts.text={opacity:1,color:"#000000",font:"Verdana",text:"text label"};M.opts.gradient={low:"#cccccc",high:"steelblue"};M.opts.grid={dasharray:"- ",dashoffset:5,stroke:"#CCC",strokewidth:1,"render-vertical":!1,"render-horizontal":!0};M.opts.axis=
{color:"#000",fontsize:11,labels:!0,strokewidth:1,"ticklength-x":3,"ticklength-y":7,ticks:!0};M.opts.axis_x={line:!0};M.opts.axis_y={line:!1};M.opts.coord={mouseover_highlight:!0};M.opts.epsilon=Math.pow(10,-7);M.opts.theme_bw=function(){};var z=o;z.graph=k.makeClass("gg.graph");z.graph.prototype.init=function(a){this._filteredData=this._paper=this._data=null;this._layers=[];this._scales={};this._facet=this._coord=null;this._attr=k.cloneobj(z.opts.graph);this._legend={};this._doms={};this._dimCache=
null;this._rendered=false;a&&this.data(a)};z.graph.prototype.data=k.dataGetter({onChange:function(){this._filterData()}});z.graph.prototype.getFilteredData=function(){return this._filteredData};z.graph.prototype.getAttr=function(){var a={};h.each(this._attr,function(b,c){if(!h.isNull(b)&&!h.isUndefined(b)&&!(b===-Infinity||b===Infinity||h.isFunction(b)))if(k.isNode(b)){var d=b.getAttribute("id");d!==null&&(a[c]=d)}else a[c]=b});return a};z.graph.prototype._varlabel=function(a){var b=this.opts("label-"+
a);if(!k.undef(b))return b;b=h.chain(this._layers).map(function(b){return b.map(a)}).filter(k.identity).value();return b.length>0?b[0]:""};z.graph.prototype.getLayer=function(a){return this._layers[a]};z.graph.prototype.getLayerIndex=function(a){for(var b=0;b<this._layers.length;b++)if(a==this._layers[b])return b;return-1};z.graph.prototype.removeLayer=function(a){var b=this._layers.length;this._layers=h.without(this._layers,a);return b!==this._layers.length};z.graph.prototype.addLayer=function(a,
b){(a=k.instantiate(a))||z.error(201,"Attempting to add an undefined or malformed layer: "+a);var c=k.cloneobj(a);c.attach(this);b===null?this._layers.push(c):this._layers.splice(b,0,c);return this};z.graph.prototype.numLayers=function(){return this._layers.length};z.graph.prototype.getMapKeys=function(){return h.chain(this._layers).map(function(a){return h.keys(a.getMap())}).flatten().uniq().value()};z.graph.prototype.isMapped=function(a,b){if(b){a=k.getBaseAes(a);return h.any(this._layers,function(b){return h.any(h.keys(b.getMap()),
function(b){return k.getBaseAes(b)===a})})}return h.any(h.invoke(this._layers,"map",a))};z.graph.prototype.defaultMin=function(a,b){if(this._layers.length===0)return null;var c=h.chain(this._layers).invoke("defaultMin",a,b).filter(h.isNumber).min().value();return c!=Infinity?c:null};z.graph.prototype.defaultMax=function(a,b){if(this._layers.length===0)return null;var c=h.chain(this._layers).invoke("defaultMax",a,b).filter(h.isNumber).max().value();return c!=-Infinity?c:null};z.graph.prototype.opts=
k.opts();z.graph.prototype.warn=function(a,b){var c=this.opts("callback-warn");c?c({code:a,message:b}):z.warn(a,b)};z.graph.prototype._optsUpdate=function(a,b){this._rendered&&(a=="title"?this._update_label("_debug_title",b):a=="label-x"?this._update_label("_debug_x_label",b):a=="label-y"&&this._update_label("_debug_y_label",b));a==="dom"&&this._clearCache();this._clearDimCache()};z.graph.prototype.layer=function(a){return this.addLayer(a,null)};z.graph.prototype.coord=function(a){if(arguments.length===
0)return this._coord;var a=k.instantiate(a),b=null,b=k.cloneobj(a);b.attach(this);this._coord=b;return this};z.graph.prototype.facet=function(a){if(arguments.length===0)return this._facet;if(a===null)this._facet=null;else{(a=k.instantiate(a))||z.error(201,"Attempting to add an undefined or malformed facet: "+a);var b=k.cloneobj(a);b.attach(this);this._facet=b}this._clearCanvas();return this};z.graph.prototype._update_label=function(a,b){var c=this._doms[a];c&&c.attr("text",b)};z.graph.prototype.dimensions=
function(a){if(!this._dimCache||a===true)this._dimCache=this._calculateDims();return this._dimCache};z.graph.prototype._calculateDims=function(){var a=0,b=0,c,d=this.opts("padding-top")||50,e=this.opts("padding-left")||50,f=this.opts("padding-right")||50,g=this.opts("padding-bottom")||50;this._legend&&this._legend._aes&&(b=this._legend.width());this._axes&&this._axes.y&&(a=this._axes.y.width());var h=this.opts("axis-y"),j=this.opts("axis-x"),l=this.opts("legend-position"),d=Math.max(d,30+(j=="top")*
20),g=Math.max(g,30+(j=="bottom")*20);c=Math.min(30+(h=="left")*a+(l=="left")*b,this.opts("width")*0.25);e=Math.max(c,e);c=Math.min(15+(h=="right")*a+(l=="right")*b,this.opts("width")*0.25);f=Math.max(c,f);a=this.opts("width")-e-f;b=this.opts("height")-d-g;k.assertNumber(a);k.assertNumber(b);c=this._facet?this._facet.ncol():1;var l=this._facet?this._facet.nrow():1,o=c==1?0:this.opts("spacing-x"),n=l==1?0:this.opts("spacing-y");return{ncol:c,nrow:l,paddingLeft:e,paddingRight:f,paddingTop:d,paddingBottom:g,
chartWidth:a,chartHeight:b,eachWidth:(a-(c-1)*o)/c,eachHeight:(b-l*n)/l,spacingX:o,spacingY:n,xLabelY:j=="bottom"?d+b+g-20:30,yLabelX:h=="left"?15:e+a+f-5,additionalScales:!!this._legend._aes}};z.graph.prototype.getAxisOffset=function(a,b,c){var d=this.dimensions(),b=this.xposition(b),a=this.yposition(a),e=d.eachWidth,d=d.eachHeight,f=this.coord()._cls_name==="gg.coord.polar",g=this.coord()._flip!==f?"x":"y";if(c=="right")b=b+e;else if(c=="bottom")a=a+d;else if(c=="center"){b=b+e/2;a=a+d/2}else if(c==
"left"&&f){b=b-9;a=a+(d/2-this._scales[g].range()[1])}return{x:b-0.5,y:a-0.5}};z.graph.prototype.createOffsetCoord=function(a,b){var c=new z.coord.cart;c.attach(this);c.opts("mouseover_highlight",false);return c.differentOffset(a,b)};z.graph.prototype.makeplot=function(a){var b=this.opts("width"),c=this.opts("height"),d;if(a)if(h.isString(a)){d=a[0]=="#"?a.substring(1):a;(d=document.getElementById(d))||z.error(212,"Invalid dom for .opts('dom') - "+a)}else d=a;else z.error(212,"Invalid dom for .opts('dom') - "+
a);a=k.Raphael(d,b,c);k.configRaphaelAttributes(a);return a};z.graph.prototype.setDefaultCoord=function(){this._coord||this.coord(z.coord.cart());return this};z.graph.prototype.filter=function(a){if(arguments.length===0)return this.opts("filter");this.opts("filter",a);this._filterData();return this};z.graph.prototype._filterData=function(){this._filteredData=this.opts("filter")?this.data().filter(this.opts("filter")):this.data()};var tf=function(a){if(a){a.forEach(function(a){k.unbindAll(a)});a.clear()}};
z.graph.prototype._clearCache=function(){tf(this._paper);this._paper=null;this._doms={};this._dimCache=null;this._rendered=false};z.graph.prototype._clearCanvas=function(){tf(this._paper);this._doms={};this._dimCache=null;this._rendered=false};z.graph.prototype._clearDimCache=function(){this._dimCache=null};z.graph.prototype._preRender=function(a){this._debugStartTime=new Date;a&&this.opts("dom",a);if(this._paper){var a=this.opts("width"),b=this.opts("height");this._paper.setSize(a,b);this._clearCanvas()}else this._paper=
this.makeplot(this.opts("dom"))};z.graph.prototype._postRender=function(){var a=new Date-this._debugStartTime;this._rendered=true;z.info("render() took "+a+" ms.");this._renderingTime=a};z.graph.prototype.xposition=function(a){var b=this.dimensions();return b.paddingLeft+a*(b.eachWidth+b.spacingX)};z.graph.prototype.yposition=function(a){var b=this.dimensions();return b.paddingTop+a*(b.eachHeight+b.spacingY)+b.spacingY};z.graph.prototype._defaultComputeOptions=function(){return{defaultScale:this.opts("render-make-default-scale"),
imputeMapping:this.opts("render-impute-mapping")}};z.graph.prototype.compute=function(a){var a=a||this._defaultComputeOptions(),b=this;this._facet&&this._facet.prepare();a.imputeMapping&&h.invoke(this._layers,"attachDerivedMappings");h.invoke(this._layers,"resetCalculate");h.invoke(this._layers,"calculate");a.defaultScale&&h.each(this.makeDefaultScales(),function(a,d){b.scale(d,a)});this.setDefaultCoord();this._axes=this._setupAxes();a=this.opts("legend-position");this._legend=a!="none"?z.guide.legend(this,
this._layers,this._scales,a):null;this.dimensions(true);this.computeScale()};z.graph.prototype.render=function(a){this._preRender(a);a=k.timer();k.raphael_mark();this.compute();a.mark("compute()");k.raphael_mark("compute()");this.bindDerivedScales();a.mark("bindDerivedScales()");k.raphael_mark("bindDeriveScales()");var b=this.checkLayerError();this.renderPrimary(b);a.mark("renderPrimary()");k.raphael_mark("renderPrimary()");this.renderAllFacetLabel();a.mark("renderAllFacetLabel()");k.raphael_mark("renderAllFacetLabel()");
this.renderOtherLabel();a.mark("renderOtherLabel()");k.raphael_mark("renderOtherLabel()");this.renderLegend();a.mark("renderLegend()");k.raphael_mark("renderOtherLabel()");this.opts("branding")&&this.render_branding();this._postRender();return this};z.graph.prototype.checkLayerError=function(){return h.invoke(this._layers,"checkErrors",{rawScales:this._scales,coord:this._coord})};z.graph.prototype.toCode=function(a,b,c){var d=[];a||(a=0);var e=a+this._cls_name.length+3;c?d=[c]:this._data&&(d=[this._data.toCode(a,
e)]);var f={cls:this._cls_name,params:d,funcs:[]};h.each(this._layers,function(b){f.funcs.push(["layer",b.toCode(a,e)])});h.each(this._scales,function(b,c){if(b){var d=k.qt(c);f.funcs.push(["scale",[d,b.toCode(a,e+d.length+2)]])}});this._coord&&f.funcs.push(["coord",this._coord.toCode(a,e)]);this._facet&&f.funcs.push(["facet",this._facet.toCode(a,e)]);var g=this.getAttr();h.each(g,function(a,b){b.split("-")[0]=="render"&&delete g[b]});f.funcs.push(["opts",ea.stringify(g)]);return k.toCode(a,b,f)};
var I=o;I.coord=I.coord||{};I.coord.base=k.makeClass("gg.coord.base");I.coord.base.prototype.init=function(){this._graph=null;this._detached=true;this._offsetY=this._offsetX=0;this._attr=h.clone(I.opts.coord)};I.coord.base.prototype.opts=k.opts();I.coord.base.prototype.differentOffset=function(a,b){var c=k.cloneobj(this);c._offsetX=c._offsetX+a;c._offsetY=c._offsetY+b;c._attr=k.cloneobj(this._attr);return c};I.coord.base.prototype.attach=function(a){this._detached||I.error(600,"This coordinate is already attached to a graph. Unexpected behaviour may occur.");
this._detached=false;this._graph=a;return this};I.coord.base.prototype.getPaper=function(){return this._graph._paper};I.coord.base.prototype.set=function(a,b){this.attr[a]=b;return this};I.coord.base.prototype.configScale=function(){I.error(10,"Not implemented.")};I.coord.base.prototype.transX=function(){I.error(10,"Not implemented.")};I.coord.base.prototype.transY=function(){I.error(10,"Not implemented.")};I.coord.base.prototype.drawAxis=function(){I.error(10,"Not implemented.")};I.coord.base.prototype.line=
function(){I.error(10,"Not implemented.")};I.coord.base.prototype.vline=function(){I.error(10,"Not implemented.")};I.coord.base.prototype.hline=function(){I.error(10,"Not implemented.")};I.coord.base.prototype.rect=function(){I.error(10,"Not implemented.")};I.coord.base.prototype.point=function(){return this.getPaper().gg_point(this)};I.coord.base.prototype.poly=function(){return this.getPaper().gg_path(this)};I.coord.base.prototype.text=function(){return this.getPaper().gg_text(this)};I.coord.base.prototype.toCode=
k.toCodeBasic;var ca=o;ca.facet=ca.facet||{};ca.facet.base=k.makeClass("gg.facet.base");ca.facet.base.prototype.init=function(){this._graph=null;this._detached=true;this._attr={free_x:false,free_y:false}};ca.facet.base.prototype.attach=function(a){this._detached||this.warn(700,"This facet is already attached to a graph. Unexpected behaviour may occur.");this._graph=a;this._detached=false};ca.facet.base.prototype.opts=k.opts();ca.facet.base.prototype.warn=function(a,b){this._detached?ca.warn(a,b):
this._graph.warn(a,b)};ca.facet.base.prototype.getAttr=k.getAttr;ca.facet.base.bin=function(){ca.error(10,"Not implemented.")};ca.facet.base.prototype.ncol=function(){ca.error(10,"Not implemented.")};ca.facet.base.prototype.nrow=function(){ca.error(10,"Not implemented.")};ca.facet.base.prototype.isValidIndex=function(){return true};ca.facet.base.prototype.renderLabel=function(){ca.error(10,"Not implemented.")};ca.facet.base.prototype.toCode=k.toCodeBasic;var hc=o;hc.guide=hc.guide||{};hc.guide.base=
k.makeClass("gg.guide.base");hc.guide.base.prototype.init=function(){this._attr={num_ticks:5}};hc.guide.base.prototype.opts=k.opts();var y=o,Lc={};y.layer=y.layer||{};y.layer.base=k.makeClass("gg.layer.base");var ra=function(a,b){if(h.isFunction(a)){this.val=a._name?a._name:h.uniqueId("$func:");this.code=a;this.functionMapping=true}else this.val=a;this.defaultMapping=k.bool(b)};ra.prototype.val=null;ra.prototype.code=null;ra.prototype.defaultMapping=!1;ra.prototype.functionMapping=!1;y.layer.base.prototype.init=
function(a){this._attr=k.cloneobj(y.opts.layer);this._statData=this._facetedData=this._data=this._graph=null;this._stats=void 0;this._detached=true;this._default_stats=y.stats.id;this._calculated=false;a&&this.data(a)};y.layer.base.prototype.warn=function(a,b){this._detached?y.warn(a,b):this._graph.warn(a,b)};y.layer.base.prototype.opts=k.opts();y.layer.base.prototype.data=function(a){if(arguments.length===0)return this._data===Lc?this._graph.getFilteredData():this._data;if(a!==Lc&&(!a||a._cls_name!=
"gg.data"))a=y.data(a);this._data=a;return this};y.layer.base.prototype.stats=function(a){if(arguments.length===1){(a=k.instantiate(a))||y.error(304,"Attempting to add an undefined or malformed statistic: "+a);this._stats=a;this.resetCalculate();return this}if(h.isUndefined(this._stats))this._stats=this._default_stats();return this._stats};y.layer.base.prototype.attach=function(a){this._detached||this.warn(300,"This layer is already attached to a graph. Unexpected behaviour may occur.");this.data()||
this.data(Lc);this._detached=false;this._graph=a;return this};y.layer.base.prototype.resetCalculate=function(){this._calculated=false};y.layer.base.prototype.defaultMin=function(){};y.layer.base.prototype.defaultMax=function(){};y.layer.base.prototype.requiredMap=function(){return null};y.layer.base.prototype.needDefined=function(){return["x","y"]};y.layer.base.prototype.calculateStats=function(a){var b=this.getMap(),c=this.getAttr(),d=h.chain(this.needDefined()).map(function(a){return b[a]}).filter(function(a){return a}).value();
!this.hasGroup()&&b.group&&delete b.group;c={mapping:b,attr:c,need:d};return this.stats().calculateStats(a,c)};y.layer.base.prototype.hasGroup=function(){return true};y.layer.base.prototype.calculate=function(){this._detached&&this.warn(301,"Calculating statistics on a detached layer.");if(!this._calculated){this.checkStatsRequiredMapping();this.checkLayerRequiredMapping();this.checkInvalidMapping();this._facetedData=k.calculateFacet(this.data(),this._getFacet());var a=h.bind(this.calculateStats,
this);this._statData=h.map(this._facetedData,a);var b=h.bind(this._bindFunctionMapping,this);h.each(this._statData,function(a){h.each(a,b)});this._calculated=true;return this}};y.layer.base.prototype._map=function(a,b){this._attr[a]=new ra(b)};y.layer.base.prototype.map=function(a,b){var c=this;arguments.length===0&&y.error(12,"Function map() called with less than 1 parameter.");if(arguments.length===1){if(!h.isString(a)&&h.keys(a).length>0){h.each(h.keys(a),function(a){k.assertAes(a)});h.each(a,
function(a,b){c._map(b,a)});this.resetCalculate();return this}k.assertAes(a);var d=this._attr[a];return d instanceof ra?d.val:null}k.assertAes(a);h.isUndefined(b)||b===null?this.unset(a):this._map(a,b);this.resetCalculate();return this};y.layer.base.prototype.isDefaultMap=function(a){a=this._attr[a];return a instanceof ra?a.defaultMapping:false};y.layer.base.prototype.getAttr=function(){var a={};h.each(this._attr,function(b,c){b instanceof ra||(a[c]=b)});return a};y.layer.base.prototype.getMap=function(){var a=
{};h.each(this._attr,function(b,c){if(b instanceof ra)a[c]=b.val});return a};y.layer.base.prototype.unset=function(a){h.has(this._attr,a)&&delete this._attr[a];h.has(y.opts.layer,a)&&(this._attr[a]=y.opts.layer[a]);return this};y.layer.base.prototype.getAestheticsGroup=function(a){var b=a+"_",c=this.getMap(),d={};h.chain(c).keys().filter(function(c){return c==a||k.startswith(c,b)}).map(function(a){d[a]=c[a]});return d};y.layer.base.prototype.getData=function(a,b){if(!this.data())return null;var c=
this.map(a);return!c?null:this.data().get(c,b)};y.layer.base.prototype.getScales=function(a){var b=a.rawScales,c,d={};h.each(this._attr,function(e,f){if(e instanceof ra){var g=b[f];g&&(d[f]=h.bind(g.apply,g,e.val))}else if(f=="x"||f=="y"){c=b[f];a["free_"+f]&&c._type=="category"&&c.make(this._levels(f,null,a.facetId));d[f]=k.constfunc(c.apply(e))}else d[f]=k.constfunc(e)});return d};y.layer.base.prototype.renderEntry=function(a){this.calculate();a.computedData=this.hasGroup()?this._statData[a.facetIndex]:
this._statData[a.facetIndex][0];a.scales=this.getScales(a);var b=null,b=a.rawScales.x.width();a.align="center";a.width=b;a.computedData&&this.opts("visible")&&this.render(a)};y.layer.base.prototype.checkErrors=function(){if(h.keys(this.getMap()).length===0){this.warn(320,"No mapping has been set in layer "+this._cls_name);return true}return false};y.layer.base.prototype.render=function(){y.error(10,"Not implemented.")};y.layer.base.prototype.queryData=function(a,b,c,d,e){if(b==="data")return c(a,
this.data());this.calculate();b=b||"aes_group";e=h.isNumber(e)?e:-1;e>this._statData.length&&y.error(-1,"Attempting to access facet id "+e+" when there are only "+this._statData.length);var f=e==-1?k.doubleMap:h.map,g=e==-1?this._statData:this._statData[e],i;if(b==="aes_group"){a=h.values(this.getAestheticsGroup(a));a=h.map(a,function(a){return f(g,h.bind(c,null,a))});a=k.concat(a)}else{b==="key"?i=a:b==="aes"?i=this.map(a):this.warn(-1,"Should not reach here.");a=f(g,h.bind(c,null,i))}a=k.concat(a);
return d(a)};y.layer.base.prototype.min=function(a,b,c){var d=this.type(a,b),d=y.type.fromString(d).min;return this.queryData(a,b,function(a,b){return b.min(a)},d,c)};y.layer.base.prototype.max=function(a,b,c){var d=this.type(a,b),d=y.type.fromString(d).max;return this.queryData(a,b,function(a,b){return b.max(a)},d,c)};y.layer.base.prototype.levels=function(a,b,c){var d=this.type(a,b),e=y.type.fromString(d);return this.queryData(a,b,function(a,b){return b.levels(a)},function(a){return k.mergeArrays(a,
e.represent)},c)};y.layer.base.prototype.type=function(a,b,c){return this.queryData(a,b,function(a,b){return b.type(a)},k.unionType,c)};y.layer.base.prototype.checkStatsRequiredMapping=function(){var a=this.stats().requiredMap()||[],a=h.difference(a,h.keys(this.getMap()));a.length>0&&y.error(302,"Variable need to be mapped to the following aesthetics: "+a.join(", "))};y.layer.base.prototype.checkLayerRequiredMapping=function(){var a=this.stats().requiredMap()||[],a=h.difference(a,h.keys(this.getMap()));
a.length>0&&y.error(302,"Variable need to be mapped to the following aesthetics: "+a.join(", "))};y.layer.base.prototype._bindFunctionMapping=function(a){var b=this._getFunctionMappings();h.each(b,function(b){var d=b.val;a.hasKey(d)||a.derive(b.code,d)})};y.layer.base.prototype._getFunctionMappings=function(){var a=[];h.each(this._attr,function(b){b instanceof ra&&b.functionMapping&&a.push(b)});return a};y.layer.base.prototype.getInvalidMapping=function(){var a=this,b=this.data().keys(),c=this.stats().keys(),
d=h.union(b,c),e={};h.each(this.getMap(),function(b,c){h.include(d,b)||a.opts(c).functionMapping||(e[c]=b)});return e};y.layer.base.prototype.checkInvalidMapping=function(){var a=this.getInvalidMapping();if(h.size(a)>0){a=h.map(a,function(a,c){return"Mapping of aesthetics "+c+" to variable "+a+" is invalid."});y.error(303,a.join("\n"))}};y.layer.base.prototype.checkAllMapping=function(){this.checkStatsRequiredMapping();this.checkInvalidMapping()};y.layer.base.prototype.imputeMapping=function(a,b){var c=
{};if(!a||!b)return c;h.each(b,function(b,e){if(!a[e])if(h.isArray(b))for(var f=0;f<b.length;f++){var g=b[f];if(a[g]){f=e;g=a[g];a[f]=g;c[f]=g;break}}else if(a[b]){g=a[b];a[e]=g;c[e]=g}});return c};y.layer.base.prototype._removePreviousDefaults=function(){var a=this;h.each(this._attr,function(b,c){b instanceof ra&&b.defaultMapping&&delete a._attr[c]})};y.layer.base.prototype._getFacet=function(){return this._graph?this._graph.facet():null};y.layer.base.prototype.bin=function(a,b,c){return y.group.binMaker(this,
a,b,c)};y.layer.base.prototype.allBin=function(){if(this.stats()&&this.stats().number){var a=this,b={},c=this.stats().number();h.each(this.data().keys(),function(d){b[d]=a.bin(d,c,false)});return b}return{}};y.layer.base.prototype._attachImputed=function(a,b){var c=this._attr[a];if(h.isUndefined(c)||!(c instanceof ra))this._attr[a]=new ra(b,true);else if(c instanceof ra&&c.defaultMapping)this._attr[a].value=b};y.layer.base.prototype.attachDerivedMappings=function(){this._removePreviousDefaults();
var a=this,b=this.stats(),c=this.getMap(),d=this.imputeMapping(c),b=b?b.imputeMapping(c):{},d=h.defaults({},d,b);h.each(d,function(b,c){a._attachImputed(c,b)});return d};y.layer.base.prototype.toCode=function(a,b){var c={cls:this._cls_name};if(this._data&&this._data!==Lc)c.params=[this._data.toCode(a,a+this._cls_name.length+3)];c.funcs=[["opts",ea.stringify(this.getAttr())]];var d=this.getMap();h.each(d,function(a,b){h.include(y.opts.aes,b.split("_")[0])||delete d[b];b=="tooltip"&&delete d[b]});h.keys(d).length>
0&&c.funcs.push(["map",ea.stringify(d)]);this._stats&&c.funcs.push(["stats",this._stats.toCode()]);return k.toCode(a,b,c)};var E=o,rh=function(a,b,c){this.data=a;this.label=c;this.pos=b};E.scale=E.scale||{};E.scale.base=k.makeClass("gg.scale.base");E.scale.base.prototype.init=function(){this._graph=this._aes=null;this._detached=true;this._type=null;this._attr={pixel_per_tick_x:60,pixel_per_tick_y:30,ticks:null,numticks:null,min:null,max:null,absolute_min:-Infinity,absolute_max:Infinity,domain_low:null,
domain_high:null,range_low:null,range_high:null};this._facetIndex=-1};E.scale.base.prototype.opts=k.opts();E.scale.base.prototype.warn=function(a,b){this._detached?E.warn(a,b):this._graph.warn(a,b)};E.scale.base.prototype.CONTINUOUS=!1;E.scale.base.prototype.DISCRETE=!1;E.scale.base.prototype.getAttr=k.getAttr;E.scale.base.prototype.attach=function(a,b){this._detached||this.warn(400,"This scale is already attached to a graph. Unexpected behaviour may occur.");a||E.error(401,"Attempting to attach a scale to an empty graph.");
b||E.error(402,"Scale type "+this._cls_name+" cannot to be attached to aesthetics "+b+".");this._aes=b;this._graph=a;this._detached=false};E.scale.base.prototype.min=function(a){var b=this._attr.absolute_min;if(arguments.length===1){if(h.isNumber(b)&&a<b){this.warn(403,"Minimum cannot be set below "+b+". Using "+b+" instead of "+a+".");a=b}this._attr.min=a;return this}return this._attr.min};E.scale.base.prototype.max=function(a){var b=this._attr.absolute_max;if(arguments.length===1){if(h.isNumber(b)&&
a>b){this.warn(403,"Maximum cannot be set above "+b+". Using "+b+" instead of "+a+".");a=b}this._attr.max=a;return this}return this._attr.max};E.scale.base.prototype.rangeSize=function(){return Math.abs(this._attr.range_low-this._attr.range_high)};E.scale.base.prototype.type=function(){return this._type};E.scale.base.prototype._saneNumber=function(a){return h.isNumber(a)&&!isNaN(a)&&a!=Infinity&&a!=-Infinity};E.scale.base.prototype._makeDomain=function(){var a=this._aes,b=this._graph.min(a),c=this._graph.defaultMin(a,
b),d=this._graph.max(a),a=this._graph.defaultMax(a,d);this._attr.domain_low=h.chain([b,this._attr.min,c]).filter(h.isNumber).min().value();this._attr.domain_high=h.chain([d,this._attr.max,a]).filter(h.isNumber).max().value();return[this._attr.domain_low,this._attr.domain_high]};E.scale.base.prototype.domain=function(a){if(arguments.length===1){this._attr.min=a[0];this._attr.max=a[1];return this}return[this._attr.min,this._attr.max]};E.scale.base.prototype.range=function(a){if(arguments.length===1){this._attr.range_low=
a[0];this._attr.range_high=a[1];return this}return!h.isUndefined(this._attr.range_low)&&!h.isUndefined(this._attr.range_high)?[this._attr.range_low,this._attr.range_high]:null};E.scale.base.prototype.make=function(){E.error(10,"Not implemented.")};E.scale.base.prototype._apply=function(){E.error(10,"Not implemented.")};E.scale.base.prototype.apply=function(a,b){if(arguments.length==1){b=a;a=void 0}b&&b._cls_name==="gg.data"&&(b=b.getObject(0));var c=h.isUndefined(a)||h.isUndefined(b[a])?b:b[a];return this._apply(c)};
E.scale.base.prototype._tickObject=function(a,b,c){return new rh(a,b,c)};E.scale.base.prototype._suggestNumticks=function(a,b,c){h.isNumber(a)||(a=null);if(a===null){a=this.opts("numticks");if(h.isNull(a)){a=this.rangeSize();if(a==2*Math.PI)a=6;else{h.isNumber(c)&&c>0||(c=this._aes=="x"==Boolean(b)?this.opts("pixel_per_tick_y"):this.opts("pixel_per_tick_x"));a=a/c}}}return Math.ceil(a)};E.scale.base.prototype.ticks=function(){E.error(10,"Not implemented.")};E.scale.base.prototype.maxLabelWidth=function(){E.error(10,
"Not implemented.")};E.scale.base.prototype.toCode=k.toCodeBasic;var Ea=o;Ea.stats=Ea.stats||{};Ea.stats.base=k.makeClass("gg.stats.base");Ea.stats.base.prototype.init=function(){this._attr={}};Ea.stats.base.prototype.imputeMapping=function(a,b){var c={};if(!a||!b)return c;h.each(b,function(b,e){if(!a[e])if(h.isArray(b))for(var f=0;f<b.length;f++){var g=b[f];if(a[g]){f=e;g=a[g];a[f]=g;c[f]=g;break}}else if(a[b]){g=a[b];a[e]=g;c[e]=g}});return c};Ea.stats.base.prototype.requiredMap=function(){return null};
Ea.stats.base.prototype.compute=function(a){return a};Ea.stats.base.prototype.postProcess=function(a){return a};Ea.stats.base.prototype.calculateStats=function(a,b){return this.group(a,b)};Ea.stats.base.prototype.group=function(a,b){var c=this,d=b.mapping,e={},f=b.groupFunctions||{};if(!b.need)b.need=[];h.each(d,function(a,b){k.getBaseAes(b)=="group"&&(e[a]=f[b]||k.identity)});var g=a.group(e),g=h.map(g,function(a){return c.compute(a,b)}),i={};h.each(b.layer_group_aes||["group"],function(a){(a=d[a])&&
(i[a]=e[a])});g=Ea.data.group(g,i,function(a){for(var c=0;c<b.need.length;c++)if(h.isNull(a[b.need[c]]))return false;return true});return this.postProcess(g,b)};Ea.stats.base.prototype.keys=function(){return[]};Ea.stats.base.prototype.toCode=k.toCodeBasic;var O=o;O.type={};var Qd=null;O.type.fromString=function(a){Qd===null&&(Qd={number:new O.type.number,category:new O.type.category,unknown:new O.type.unknown,date:new O.type.date});a||(a="unknown");var b=Qd[a];b||O.error(800,"No such type "+a+".");
return b};O.type.base=k.makeClass("gg.type.base");O.type.base.prototype.init=function(){h.bindAll(this,"min","max")};O.type.base.prototype.min=function(){O.error(10,"Not implemented.")};O.type.base.prototype.max=function(){O.error(10,"Not implemented.")};O.type.base.prototype.ticks=function(){O.error(10,"Not implemented.")};O.type.base.prototype.coerce=function(){O.error(10,"Not implemented.")};O.type.base.prototype.validate=function(){O.error(10,"Not implemented.")};O.type.base.prototype.defaultScale=
function(){O.error(10,"Not implemented.")};O.type.base.prototype.represent=function(){O.error(10,"Not implemented.")};O.type.base.prototype._postProcess=function(a,b){if(a=="opacity")b.range([0.2,0.9]);else if(a=="strokewidth")b.range([0,5]);else if(a=="radius"){b.opts("transform","sqrt");b.range([0.5,10]);b.min(0)}};var Ga=o;Ga.coord.cart=k.makeClass("gg.coord.cart",Ga.coord.base);Ga.coord.cart.prototype.init=function(a){Ga.coord.base.prototype.init.call(this);this._flip=k.bool(a)};Ga.coord.cart.prototype.configScale=
function(a,b){if(this._flip){b.x.range([a.y,a.height]);b.y.range([a.x,a.width])}else{b.x.range([a.x,a.width]);b.y.range([a.height,a.y])}};Ga.coord.cart.prototype.transX=function(a,b){return this._flip?b:a};Ga.coord.cart.prototype.transY=function(a,b){return this._flip?a:b};Ga.coord.cart.prototype.vline=function(){return this.getPaper().gg_cart_vline(this)};Ga.coord.cart.prototype.hline=function(){return this.getPaper().gg_cart_hline(this)};Ga.coord.cart.prototype.line=function(){return this.getPaper().gg_cart_line(this)};
Ga.coord.cart.prototype.rect=function(){return this.getPaper().gg_cart_rect(this)};Ga.coord.cart.prototype.toCode=function(a,b){return k.toCode(a,b,{cls:this._cls_name,params:[this._flip.toString()]})};var ja=o;ja.coord.polar=k.makeClass("gg.coord.polar",ja.coord.base);ja.coord.polar.prototype.init=function(a){ja.coord.base.prototype.init.call(this);this._flip=k.bool(a);this._configured=false};ja.coord.polar.prototype.configScale=function(a,b){this._offsetX=a.x+a.width/2;this._offsetY=a.y+a.height/
2;var c=Math.min(a.width,a.height)/2*1;if(this._flip){b.y.range([0,c]);b.x.range([0,2*Math.PI]);b.x.opts("expand",0)}else{b.x.range([0,c]);b.y.range([0,2*Math.PI]);b.y.opts("expand",0)}this._configured=true};ja.coord.polar.prototype.transX=function(a,b){this._configured||ja.error(605,"Attempting to use a coordinate that has not been configured.");return!this._flip?a*Math.cos(b-Math.PI/2):b*Math.cos(a-Math.PI/2)};ja.coord.polar.prototype.transY=function(a,b){this._configured||ja.error(605,"Attempting to use a coordinate that has not been configured.");
return!this._flip?a*Math.sin(b-Math.PI/2):b*Math.sin(a-Math.PI/2)};ja.coord.polar.prototype.vline=function(){return this.getPaper().gg_polar_vline(this)};ja.coord.polar.prototype.hline=function(){return this.getPaper().gg_polar_hline(this)};ja.coord.polar.prototype.rect=function(){return this.getPaper().gg_polar_rect(this)};ja.coord.polar.prototype.toCode=function(a,b){return k.toCode(a,b,{cls:this._cls_name,params:[this._flip.toString()]})};ja.coord.polar.prototype.poly=function(){var a=this.getPaper(),
b=h.bind(this._smoother,this);return a.gg_path(this,b)};ja.coord.polar.prototype._getRange=function(){return Math.PI*2};ja.coord.polar.prototype._getTickSize=function(){return 0.01};ja.coord.polar.prototype._smoother=function(a,b){for(var c=this._flip,d=a.length,e=0,f=true,g,i,j,k,l=[],n=[],o=this._getRange(),p=this._getTickSize(),e=0;e<d;e++){g=a[e];i=b[e];if(h.isNumber(g)&&h.isNumber(i))if(f){j=g;k=i;l.push(g);n.push(i);f=false}else{var r,s,t,v,w;s=g-j;t=i-k;r=c?Math.floor(s/o/p):Math.floor(t/o/
p);for(var u=1;u<r;u++){v=u/r;w=v*t;v=v*s;l.push(j+v);n.push(k+w)}j=g;k=i;l.push(g);n.push(i)}}return{x:l,y:n}};var t=o,sh=["min","max","levels"],Rd={hit:0,miss:0};t.data=k.makeClass("gg.data");t.data._CACHE_STATS=Rd;var uf=["type","parser","format"];t.data.fetch=function(a,b,c){j.text(a,function(d){var e=null;a.substr(-4)!=".csv"&&(d=ea.parse(d));e=t.data(d,c);b(e)})};t.data.group=function(a,b,c){c||(c=function(){return true});var d;d=h.size(b)===0?function(){return""}:function(a){var c="";h.each(b,
function(b,d){c=c+(d+":"+b(a[d])+";")});return c};if(a.length===0)return[];var e={};h.each(a,function(a){for(var b=0;b<a.len();b++){var h=a._internal[b];if(c(h)){var j=d(h);e[j]||(e[j]=[]);e[j].push(h)}}});e=h.values(e);return h.map(e,function(b){return a[0].clone(b)})};t.data.prototype.fromObject=function(a,b){for(var b=b?b:h.keys(a),c=h.map(b,function(b){return a[b].length}),d=h.max(c),e=[],f=0;f<d;f++){for(var g={},i=0;i<b.length;i++){var j=b[i],k=a[j][f];typeof k==="undefined"&&(k=null);g[j]=
f<c[i]?k:null}e.push(g)}this._unparsed=e;this._keys=b};t.data.prototype.fromArray=function(a,b){if(a.length===0){this._unparsed=[];b=b?b:[]}else{for(var c=h.keys(a[0]),b=b?h.union(b,c):c,c=1;c<a.length;c++)for(var d=0;d<b.length;d++)h.isUndefined(a[c][b[d]])&&(a[c][b[d]]=null);this._unparsed=a}this._keys=b};t.data.prototype.fromGrid=function(a,b){if(a.length===0){this._unparsed=[];b=b?b:[]}else{var b=b?b:h.keys(a[0]),c=b.length;this._unparsed=h.map(a,function(a){for(var e={},f=0;f<c;f++)e[b[f]]=h.isUndefined(a[f])?
null:a[f];return e})}this._keys=b};t.data.prototype.fromCSV=function(a){this._unparsed=j.csv.parse(a);this._keys=h.keys(this._unparsed[0]);for(a=0;a<this._unparsed.length;a++){var b=this._unparsed[a];h.each(this._keys,function(a){var d=parseFloat(b[a]);d==b[a]&&(b[a]=d)})}};t.data.prototype.constructData=function(a,b){var c=false,d;if(h.isArray(b)){d=h.clone(b);b={}}else if(b){d=h.keys(b);var e={};h.each(b,function(a,b){var c;if(h.isString(a))c={type:a,format:null,parser:null};else{c={};for(var d=
0;d<uf.length;d++){var j=uf[d],k=a[j];k&&(c[j]=k)}}e[b]=c});b=e;c=true}else{d=null;b={}}h.isArray(a)?a.length>0&&h.isArray(a[0])?this.fromGrid(a,d,b):this.fromArray(a,d,b):h.isString(a)?this.fromCSV(a,d,b):this.fromObject(a,d,b);this._meta=c?b:{};this.guessMeta()};t.data.prototype.guessMeta=function(){var a=this._meta,b=this;h.each(this._keys,function(c){if(!a[c]){var d=b._guessType(c),e={};if(d)e.type=d;a[c]=e}});return a};t.data.prototype.init=function(a,b){this._cache=this._meta=this._keys=this._internal=
this._unparsed=null;if(a){this.constructData(a,b);this._guessParsers();this._applyParsers()}else{this._unparsed=[];this._internal=[];this._keys=[];this._meta={}}this._clearCache()};t.data.prototype.clone=function(a){var a=a||[],b=new t.data;b._keys=h.keys(this._meta);b._meta=h.clone(this._meta);b._internal=a;return b};t.data.prototype.copy=function(){return this.clone(this._internal)};t.data.prototype.transform=function(a,b){var c=h.map(this._internal,function(c){c=h.clone(c);c[a]=b(c[a]);return c});
return this.clone(c)};t.data.prototype.niceNumber=function(a,b){return this.transform(a,function(a){return Math.floor(a/b)*b})};t.data.prototype.niceDate=function(a,b){h.isArray(b)||(b=[b]);return this.transform(a,function(a){var d=new Date(0);h.isNumber(a)&&(a=new Date(a));h.each(b,function(b){var f=a["get"+b]();d["set"+b](f)});return d-0})};t.data.prototype.get=function(a,b){return arguments.length>=2?this._internal[b][a]:h.pluck(this._internal,a)};t.data.prototype.getObject=function(a){var b,c,
d={};for(b=0;b<this._keys.length;b++){c=this._keys[b];d[c]=this.get(c,a)}return d};t.data.prototype.getObjects=function(){for(var a=[],b=0;b<this.len();b++)a.push(this.getObject(b));return a};t.data.prototype.getRaw=function(){return this._internal};t.data.prototype.getBlock=function(){var a=[],b=this._internal,c,d=this._meta,e=function(a){return d[a].type!=="date"?b[c][a]:+b[c][a]};for(c=0;c<this._internal.length;c++)a[c]=h.map(this._keys,e);return a};t.data.prototype.getTypeObj=function(a){return t.type.fromString(this.type(a))};
t.data.prototype.toCode=function(a,b){return k.toCode(a,b,{cls:this._cls_name,params:[ea.stringify(this.getBlock(),null," "),ea.stringify(this._meta)]})};t.data.prototype.len=function(){return this._internal.length};t.data.prototype.indices=function(){return h.range(this.len())};t.data.prototype.keys=function(){return this._keys};t.data.prototype.hasKey=function(a){return h.indexOf(this._keys,a)>-1};t.data.prototype.metas=function(){return h.clone(this._meta)};t.data.prototype.getMeta=function(a){return this._meta[a]};
var th=function(a){return a===null||typeof a==="undefined"||a===""},uh=function(a){return h.isNumber(a)||!h.isNaN(Number(a))};t.data.guessType=function(a){a=h.reject(a,th);return a.length===0?"unknown":h.all(a,uh)?"number":h.all(a,h.isDate)?"date":"category"};t.data.prototype._guessType=function(a){a=h.pluck(this._unparsed,a);return t.data.guessType(a)};t.data.prototype.type=function(a){return(a=this._meta[a])?a.type:"unknown"};t.data.prototype.levels=function(a){return this._cached("levels",a,function(a){var c=
this.getTypeObj(a);return h.chain(this._internal).pluck(a).reject(h.isUndefined).reject(h.isNull).sortBy(c.represent).uniq(true,c.represent).value()},[])};t.data.prototype.min=function(a){return this._cached("min",a,function(a){var c=this.getTypeObj(a);return this.query(a,c.min,c.validate)},void 0)};t.data.prototype.max=function(a){return this._cached("max",a,function(a){var c=this.getTypeObj(a);return this.query(a,c.max,c.validate)},void 0)};t.data.prototype.query=function(a,b,c){return b(h.filter(this.get(a),
c))};t.data.prototype.remove=function(a){var b=h.indexOf(this._keys,a);if(b===-1)return false;this._keys.splice(b,1);delete this._meta[a];for(var c=this._internal.length,b=0;b<c;b++)delete this._internal[b][a];return true};t.data.prototype.derive=function(a,b,c){var c=c||{},d=c.dryrun,e=c.context;arguments.length===1&&(b=h.uniqueId("var_"));if(!e)e=t.derive;try{var f,g;if(h.isFunction(a)){f=a;g=false}else{var i=a;a===""&&(i='""');f=new Function("d","with(this) { with(d) { return "+i+";}}");g=true}for(var j=
this.len(),i=[],k=0;k<j;k++){var l=this._internal[k],n=f.call(e,l);h.isFunction(n)&&t.error(121,"invalud return value");i.push(n);if(d){if(k>10)break}else l[b]=f.call(e,l)}if(d)return{success:true,values:i};h.include(this._keys,b)||this._keys.push(b);e=null;e=c.type?c.type:t.data.guessType(i);this._meta[b]={type:e,derived:true};if(g)this._meta[b].formula=a;return b}catch(o){if(d)return{success:false,error:o};t.warn(121,"Error while generating derived variable "+b+": "+o.toString());return false}};
t.data.prototype.checkRename=function(a,b){var c=h.indexOf(this._keys,a),d=h.indexOf(this._keys,b);if(b){if(c===-1||d!==-1)return false}else return false;return true};t.data.prototype.rename=function(a,b){a=a.toString();b=b.toString();if(!this.checkRename(a,b))return false;var c=h.indexOf(this._keys,a);h.each(this._internal,function(c){c[b]=c[a];delete c[a]});this._keys[c]=b;this._meta[b]=this._meta[a];delete this._meta[a];return true};t.data.prototype.renameMany=function(a){var b=this,c={},d=false;
h.each(a,function(a,f){var g=a.toString();g!=f&&(b.checkRename(f,a)?c[f]=g:d=true)});if(d)return false;a=h.values(c);if(h.uniq(a).length!=a.length)return false;h.each(this._internal,function(a){h.each(c,function(b,c){a[b]=a[c];delete a[c]})});h.each(c,function(a,c){var d=h.indexOf(b._keys,c);b._keys[d]=a;b._meta[a]=b._meta[c];delete b._meta[c]});return true};t.data.prototype.copyColumnDefinition=function(a,b){if(h.indexOf(this._keys,a)===-1&&h.indexOf(this._keys,b)!==-1)return false;data._keys.push(x_end);
data._meta[x_end]=h.clone(data._meta[x]);return true};t.data.prototype.push=function(a){var b,c;for(b=0;b<this._keys.length;b++){c=this._keys[b];h.has(a,c)||t.warn(101,"Data is missing key "+c+".")}this._internal.push(a);return this};t.data.prototype.iterator=function(a){var b=this,c={i:0,next:function(){for(var d=b.len();c.i<d&&!a(b._internal[c.i]);)c.i++;return c.i==d?false:b._internal[c.i++]}};return c};t.data.prototype.filter=function(a){var b=[],a=t.data.makeFilterFunction(a);try{h.each(this._internal,
function(c){a(c)&&b.push(c)})}catch(c){t.error(122,"Error while filtering data: "+c.toString())}return this.clone(b)};t.data.prototype.sort=function(a,b){var c=this.getTypeObj(a),d;d=c.sort?h.clone(this._internal).sort(function(b,d){var g=c.represent(b[a]),h=c.represent(d[a]);return c.sort(g,h)}):h.sortBy(this._internal,function(b){return c.represent(b[a])});b&&d.reverse();return this.clone(d)};t.data.prototype.group=function(a){return t.data.group([this],a)};t.data.prototype.merge=function(a){h.isEqual(this.keys(),
a.keys())||t.error(110,"Cannot merge two datasets with unequal keys.");this._internal=this._internal.concat(a._internal);return this};t.data.prototype.each=function(a,b){if(!b||b>this.len())return h.each(this._internal,a);var c=h.shuffle(this._internal);return h.each(c.slice(0,b),a)};t.data.prototype._cached=function(a,b,c,d){if(h.isFunction(b)){if(!b._data_key){b._data_key=h.uniqueId("var_");this.derive(b,b._data_key)}b=b._data_key}if(h.indexOf(this._keys,b)===-1)return d;if(h.has(this._cache[a],
b)){a=this._cache[a][b];Rd.hit++;return a}Rd.miss++;c=c.call(this,b);return this._cache[a][b]=c};t.data.prototype._clearCache=function(){var a=this._cache={};h.each(sh,function(b){a[b]={}})};t.data.prototype.parser=function(a,b){if(arguments.length===1)return this._meta[a].parser;this._meta[a].parser=b;return this};var vf=function(a){var b=Number(a);return a===null||typeof a=="undefined"||a===""||h.isNaN(b)?null:b};t.data.prototype._guessParsers=function(){var a=this;h.each(this._keys,function(b){var c=
a._meta[b];if(!a.parser(b))if(c.type=="number")if(c.format){var d=RegExp(c.format);c.parser=function(a){a=d.exec(a)[1];return vf(a)}}else c.parser=vf;else if(c.type=="date"&&c.format){b=a._meta[b].format;c.parser=t.data.makeDateParser(b)}else if(c.type=="category"&&c.format===null)c.parser=null;else{b=h.pluck(a._unparsed,b);if(b=t.data.guessDateFormat(b)){c.type="date";c.parser=t.data.makeDateParser(b);c.format=b}}})};t.data.prototype._applyParsers=function(){var a=this,b=this.keys();this._internal=
h.map(this._unparsed,function(c){for(var d={},e=0,e=0;e<b.length;e++){var f=b[e],g=a._meta[f].parser,h=c[f],j;if(g)try{j=g(h)}catch(k){j=null}else j=h;d[f]=j}return d})};var vh="%Y-%m-%d %H:%M:%S;%c;%m-%d-%Y;%Y-%m-%d;%m/%d/%Y;%Y/%m/%d;%m/%d/%Y %I:%M %p".split(";");t.data.guessDateFormat=function(a){return h.find(vh,function(b){for(var c=true,d=true,e=0;e<a.length;e++){var f=a[e];if(f){if(f&&!h.isString(f))return false;if(t.date.parseDate(b,f)!==null)d=false;else{c=false;break}}}return c&&!d})};t.data.makeDateParser=
function(a){var b=j.time.format.utc(a);return function(a){return h.isNumber(a)?a:b.parse(a)-0}};t.data.makeFilterFunction=function(a){return h.isFunction(a)?a:h.isString(a)?new Function("d","with(d) { return "+a+";}"):function(){return true}};t.data.prettify=k.prettify;t.data.numberRounder=function(a){return function(b){return Math.floor(b/a)*a}};t.data.dateRounder=function(a){h.isArray(a)||(a=[a]);return function(b){var c=new Date(0),b=new Date(b);h.each(a,function(a){if(h.isString(a)){var e=b["get"+
a]();c["set"+a](e)}else a(c,b)});return c-0}};t.data.parseCSV=j.csv.parseRows;o.date={};o.date.parseDate=function(a,b){return!b?null:j.time.format.utc(a).parse(b)};o.date.formatDate=function(a,b){if(!b)return"";h.isNumber(b)&&(b=new Date(b));return j.time.format.utc(a)(b)};var zb=o;zb.derive={};zb.derive.year=function(a){a=new Date(a);return a.getUTCFullYear()};zb.derive.month=function(a){a=new Date(a);return a.getUTCMonth()+1};zb.derive.day=function(a){a=new Date(a);return a.getUTCDate()};zb.derive.has=
function(a,b){return h.indexOf(""+a,""+b)>-1};zb.derive.len=function(a){return h.isString(a)?a.length:0};zb.derive.count=function(a,b){if(!h.isString(a))return 0;for(var c=0,d=0;d<a.length;d++)a[d]==b&&c++;return c};var Pa=o;Pa.facet.grid=k.makeClass("gg.facet.grid",Pa.facet.base);Pa.facet.grid.prototype.init=function(a,b){Pa.facet.base.prototype.init.call(this);this.opts("x",a);this.opts("y",b);this.opts("auto",true)};Pa.facet.grid.prototype.x=k.singleOpts("x");Pa.facet.grid.prototype.y=k.singleOpts("y");
Pa.facet.grid.prototype.ncol=function(a){if(arguments.length===0)return this.opts("col");k.assertNumber(a);this.opts("col",a);this.opts("auto",false);return this};Pa.facet.grid.prototype.nrow=function(a){if(arguments.length===0)return this.opts("row");k.assertNumber(a);this.opts("row",a);this.opts("auto",false);return this};Pa.facet.grid.prototype.bin=function(a){var b=this._func_x.index(a[this._key_x]);return this._func_y.index(a[this._key_y])*this._ncol+b};Pa.facet.grid.prototype.prepare=function(){var a=
this.x(),b=this.y(),c,d,e=this._graph;c=function(a){var b=e.type(a,"data");if(b=="category")return Math.min(10,e.levels(a,"data").length);if(b=="number")return 3};if(this.opts("auto")){d=c(a);c=c(b);this.nrow(c);this.ncol(d)}else{d=this.ncol();c=this.nrow()}this._ncol=d;this._nrow=c;this._key_x=a;this._key_y=b;this._func_x=this._graph.bin(a,d,true);this._func_y=this._graph.bin(b,c,true);return this};Pa.facet.grid.prototype.renderLabel=function(a,b){var c="FOOZLE";if(this.x()&&b.row===0){c=this._func_x.label(b.col);
a.text().attr("font-size",12).attr("font-weight","bold").attr("text-anchor","center").attr("text",c).attr("x",b.xpos+b.eachWidth/2).attr("y",b.ypos-10)}if(this.y()&&b.col===this.opts("col")-1){c=this._func_y.label(b.row);a.text().attr("font-size",12).attr("font-weight","bold").attr("text-anchor","center").attr("text",c).attr("x",b.width+10).attr("y",b.ypos+b.eachHeight/2).transform("r90")}};var Ha=o;Ha.facet.wrap=k.makeClass("gg.facet.wrap",Ha.facet.base);Ha.facet.wrap.prototype.init=function(a){Ha.facet.base.prototype.init.call(this);
this.opts("x",a);this.opts("col",null);this.opts("row",null);this.opts("formatter",null);this._key=this._func=null};Ha.facet.wrap.prototype.x=k.singleOpts("x");Ha.facet.wrap.prototype.ncol=function(a){if(arguments.length===0)return this.opts("col");k.assertNumber(a);this.opts("col",a);return this};Ha.facet.wrap.prototype.nrow=function(a){if(arguments.length===0)return this.opts("row");k.assertNumber(a);this.opts("row",a);return this};Ha.facet.wrap.prototype.sanity=function(){var a=this.levels();a.length>
0&&a.length<this.opts("col")?this.ncol(a.length):this.ncol(this.opts("col"));return this};Ha.facet.wrap.prototype.isValidIndex=function(a){return a<this._graph.levels(this.x(),"data").length};Ha.facet.wrap.prototype.bin=function(a){return h.indexOf(this._levels,a[this._key])};Ha.facet.wrap.prototype.prepare=function(){var a=this.x();this._graph.type(a,"data");var b=this._graph.levels(a,"data"),c=b.length,d,e;if(this.opts("col")){d=this.opts("col")||3;e=this.opts("row")||Math.ceil(c/d)}else{e=this.opts("row")||
2;d=this.opts("col")||Math.ceil(c/e)}this.opts("col",d);this.opts("row",e);this._levels=b;this._key=a;return this};Ha.facet.wrap.prototype.renderLabel=function(a,b){var c=b.row*this.ncol()+b.col,c=this._levels[c];if(c===null||h.isUndefined(c))return this;var d=this.opts("formatter");d||(d=function(a){return a+""});var e=a.text();e.attr("font-size",12);e.attr("font-weight","bold");e.attr("text",d(c));this.opts("col")==1?e.attr("x",b.width+10).attr("y",b.ypos+b.eachHeight/2).transform("r90"):e.attr("x",
b.xpos+b.eachWidth/2).attr("y",b.ypos-10);return this};o.graph.prototype.bin=function(a,b,c){return o.group.binMaker(this,a,b,c)};var Ab=o;Ab.graph.prototype.type=function(a,b,c){if(this._layers.length===0&&b=="data")return this.data().type(a);a=h.invoke(this._layers,"type",a,b,c);return k.unionType(a)};Ab.graph.prototype.min=function(a,b,c){if(this._layers.length===0&&b=="data")return this.data().min(a);c=h.invoke(this._layers,"min",a,b,c);a=this.type(a,b);return Ab.type.fromString(a).min(c)};Ab.graph.prototype.max=
function(a,b,c){if(this._layers.length===0&&b=="data")return this.data().max(a);c=h.invoke(this._layers,"max",a,b,c);a=this.type(a,b);return Ab.type.fromString(a).max(c)};Ab.graph.prototype.levels=function(a,b,c){if(this._layers.length===0&&b=="data")return this.data().levels(a);c=h.invoke(this._layers,"levels",a,b,c);a=this.type(a,b);a=Ab.type.fromString(a);return k.mergeArrays(c,a.represent)};var ka=o;ka.graph.prototype._setupGrid=function(){var a=this.coord(),b=this._scales,c=ka.guide.grid(b.x,
b.y);a._cls_name==="gg.coord.polar"&&c.opts("render-vertical",true);h.each(this._attr,function(a,b){b.substr(0,5)=="grid-"&&!h.isNull(a)&&c.opts(b.substr(5),a)});return c};ka.graph.prototype._setupAxes=function(){var a=this.coord(),b=a._flip!==(a._cls_name==="gg.coord.polar"),c=b?"x":"y",d=ka.guide.axis(this._scales[b?"y":"x"],"x",a),e=ka.guide.axis(this._scales[c],"y",a);a._cls_name==="gg.coord.polar"&&e.opts("line",true);h.each(this._attr,function(a,b){var c=b.substr(0,7);if(c=="axis-x-"&&!h.isNull(a))d.opts(b.substr(7),
a);else if(c=="axis-y-"&&!h.isNull(a))e.opts(b.substr(7),a);else if(c.substr(0,5)=="axis-"){d.opts(b.substr(5),a);e.opts(b.substr(5),a)}});return{x:d,y:e,flip:b}};ka.graph.prototype._renderAxis=function(a,b){var c=this.coord(),d,e=a.flip?"x":"y",f=this.opts("axis-y");if(f=="left"&&b.col===0||f=="right"&&b.col===b.ncol-1||b.free_y){d=this.getAxisOffset(b.row,b.col,f);d={position:f,coord:c,canvas:this.createOffsetCoord(d.x,d.y)};a.y.renderLinear(d)}f=this.opts("axis-x");if(f!="none")if(c._cls_name===
"gg.coord.polar"){d=this.getAxisOffset(b.row,b.col,"circular");d={position:"circular",coord:c.differentOffset(b.xpos,b.ypos),radius:this._scales[e].range()[1],canvas:this.createOffsetCoord(d.x,d.y)};a.x.renderCircular(d)}else{d=this.getAxisOffset(b.row,b.col,f);d={position:f,coord:c,canvas:this.createOffsetCoord(d.x,d.y)};f=="bottom"&&b.row==b.nrow-1||f=="top"&&b.row===0||b.free_x?a.x.renderLinear(d):a.x.renderLinear(d,{labels:false})}};ka.graph.prototype.renderPrimary=function(a){for(var b=this.dimensions(),
c=this._facet,d=b.ncol,b=b.nrow,e=0,f,g,h=this.coord(),j=this._setupGrid(),k=this._axes,l=this._scales,n=c?c.opts("free_x"):false,o=c?c.opts("free_y"):false,p=function(a,b){l[a].make(b);j.opts(a+"scale",l[a]);k[k.flip==(a=="x")?"y":"x"].scale(l[a])},r=0;r<b;r++)for(var s=0;s<d;s++){if(c&&!c.isValidIndex(e))break;f=this.xposition(s);g=this.yposition(r);n&&p("x",e);o&&p("y",e);var t=h.differentOffset(f,g).opts("mouseover_highlight",false);j.render(t);for(t=0;t<this._layers.length;t++)(!a||!a[t])&&this.renderLayer(this.getLayer(t),
f,g,l,e);this._renderAxis(k,{col:s,row:r,ncol:d,nrow:b,xpos:f,ypos:g,free_x:n,free_y:o});e++}};ka.graph.prototype.renderLayer=function(a,b,c,d,e){b={rawScales:d,coord:this._coord.differentOffset(b,c),facetIndex:e};a.renderEntry(b)};ka.graph.prototype.renderAllFacetLabel=function(){var a=this.dimensions(),b=a.ncol,c=a.nrow;if(c>1||b>1)for(var a={eachWidth:a.eachWidth,width:a.chartWidth+a.paddingLeft,eachHeight:a.eachHeight},d=0;d<c;d++)for(var e=0;e<b;e++){a.row=d;a.col=e;a.ypos=this.yposition(d)+
10;a.xpos=this.xposition(e);this._facet.renderLabel(this._paper,a)}};ka.graph.prototype.renderLegend=function(){var a=this.opts("legend-position");if(a!="none"){var b=this.dimensions(),c=b.chartWidth,d=b.chartHeight,e,f;if(a=="left"||a=="right"){f=b.paddingTop;e=10;a=="right"&&(e=e+(b.paddingLeft+c+10))}else if(a=="bottom"){f=d+b.paddingTop+45;e=b.paddingLeft}else ka.error(1E3,"Leged position should be left, right, bottom or none. Got "+a+" instead.");a={canvas:this.createOffsetCoord(e,f),chartWidth:c,
chartHeight:d};this._legend.render(a)}};ka.graph.prototype.renderOtherLabel=function(){this.dimensions();if(this._coord._name!=="polar"){this.render_y_label();this.render_x_label()}this.render_title()};ka.graph.prototype.render_label=function(a,b,c,d){a=this._paper.text(b,c,a).attr("class",d);return this._doms[d]=a};ka.graph.prototype.render_title=function(){this.dimensions();var a=this.opts("width")/2;this.render_label(this.opts("title"),a,15,"_debug_title").attr("font-weight",this.opts("title-bold")?
"bold":"normal").attr("font-size",this.opts("title-size"))};ka.graph.prototype.render_x_label=function(){var a=this.dimensions(),b=a.paddingLeft+a.chartWidth/2,a=a.xLabelY,c=this.coord()._cls_name==="gg.coord.polar"?this._coord._flip?"x":"y":this._coord._flip?"y":"x";this.render_label(this._varlabel(c),b,a,"_debug_x_label").attr("font-weight",this.opts("label-bold")?"bold":"normal").attr("font-size",this.opts("label-size"))};ka.graph.prototype.render_y_label=function(){var a=this.dimensions(),b=a.yLabelX,
a=a.paddingTop+a.chartHeight/2,c=this.coord()._cls_name==="gg.coord.polar"?this._coord._flip?"y":"x":this._coord._flip?"x":"y";this.render_label(this._varlabel(c),b,a,"_debug_y_label").transform("r270").attr("font-weight",this.opts("label-bold")?"bold":"normal").attr("font-size",this.opts("label-size"))};ka.graph.prototype.render_branding=function(){var a=this._paper,b=this.opts("height")-6;a.path(k.d3_arc(82,b+1,0,4,-Math.PI/2,Math.PI*1/6)).attr("fill","#F89E34").attr("stroke","#F89E34");a.path(k.d3_arc(82,
b+1,0,5,Math.PI*1/6,Math.PI*5/6)).attr("fill","#FFF425").attr("stroke","#FFF425");a.path(k.d3_arc(82,b+1,0,6.5,Math.PI*5/6,Math.PI*9/6)).attr("fill","#6DBB58").attr("stroke","#6DBB58");a.text(65,b,"Made With P o lychart").attr({"font-size":12,"font-weight":"bold","font-family":"Arial, sans-serif"}).attr("fill","#AAA").toBack()};"use strict";o.graph.prototype.getScaleKeys=function(){return h.keys(this._scales)};o.graph.prototype.removeScale=function(a){if(h.has(this._scales,a)){delete this._scales[a];
return true}return false};o.graph.prototype.removeAllScales=function(){this._scales={}};o.graph.prototype.getScale=function(a){return this._scales[a]};o.graph.prototype.scale=function(a,b){k.assertAes(a);(b=k.instantiate(b))||o.error(201,"Attempting to add an undefined or malformed scale: "+b);var c=k.cloneobj(b);c.attach(this,a);this._scales[a]=c;return this};o.graph.prototype.resetScale=function(a){var b=this.makeDefaultScales([a])[a];if(b){this.scale(a,b);this.computeScale();return true}return false};
o.graph.prototype.makeDefaultScales=function(a){var b=this,c=this._scales;a||(a=h.chain(this._layers).map(function(a){return h.keys(a.getMap())}).flatten().push("x").push("y").uniq().filter(function(a){return k.isDerivedAes(a)||k.getBaseAes(a)=="group"?false:true}).reject(function(a){return h.has(c,a)}).value());var d={};h.each(a,function(a){var c=b.type(a),g=o.type.fromString(c);if(c){c=g.defaultScale(a);d[a]=c}});if(!this._scales.x&&!d.x&&h.contains(a,"x"))d.x=o.scale.discrete();if(!this._scales.y&&
!d.y&&h.contains(a,"y"))d.y=o.scale.continuous();return d};o.graph.prototype.bindDerivedScales=function(){var a=this._scales,b=this.getMapKeys();h.each(b,function(b){k.isDerivedAes(b)&&(a[b]=a[k.getBaseAes(b)])})};o.graph.prototype.computeScale=function(){var a=this._scales,b=this.dimensions();this._coord.configScale({x:0,y:0,width:b.eachWidth,height:b.eachHeight},a);h.each(a,function(a,b){k.isDerivedAes(b)||a.make()})};o.group={};o.group.niceBinFunction=function(a,b,c){var b=b-a,d=Math.pow(10,Math.floor(Math.log(b/
c)/Math.LN10)),c=c/b*d;c<=0.15?d=d*10:c<=0.35?d=d*5:c<=0.75&&(d=d*2);var e=Math.ceil(a/d)*d;return function(a){return e+Math.floor((a-e)/d)*d}};o.group.rawBinFunction=function(a,b,c){var d=b-a,e=function(b){b=Math.floor((b-a)/d*c);b>=c&&(b=c-1);b<0&&(b=0);return b},f=function(b){return a+e(b)*d/c};f.index=e;f.label=function(b){var e=a+(b+1)*d/c;return Math.round((a+b*d/c)*100)/100+" ~ "+Math.round(e*100)/100};f.width=d/c;f.low=a;f.high=b;f.number=c;return f};o.group.dateBinFunction=function(a,b,c){var d=
a.getTime(),a=b.getTime();d>=a&&o.error(900,"Cannot create a grouping function where min is "+d+" and max is "+a);c<=0&&o.error(901,"Cannot create a grouping function where number of bins is less than 1.");var e=a-d,a=function(a){a=(a.getTime()-d)/e;a=Math.floor(a*c);a==c&&(a=c-1);return new Date(d+a*e/c)};a.width=e/c;return a};o.group.binMaker=function(a,b,c,d){var d=d||true,c=c||10,e;e=a.type(b,"data");if(e==="number"){e=a.min(b,"data");a=a.max(b,"data");if(e==a)return o.group.rawBinFunction(e-
1,a+1,c);if(d){if(!isNaN(parseInt(e*1))&&!isNaN(parseInt(a*1))){d=Math.ceil((a-e)/c);return o.group.rawBinFunction(e,e+d*c,c)}return o.group.rawBinFunction(e,a,c)}}else{if(e=="category"){var f=a.levels(b,"data"),d=function(a){return a};d.index=function(a){return h.indexOf(f,a)%c};d.label=function(a){return a>=f.length?null:f[a%c]};return d}if(e=="date"){e=a.min(b,"data");a=a.max(b,"data");return e==a?null:o.group.dateBinFunction(e,a,c)}}return null};var sa=o;sa.guide.axis=k.makeClass("gg.guide.axis",
sa.guide.base);sa.guide.axis.prototype.init=function(a,b,c){sa.guide.base.prototype.init.call(this);this._type=b||a._aes;this._type!="x"&&this._type!="y"&&sa.error(500,"Axis can only be created from x- or y- aesthetics, got "+this._type+" instead.");this._scale=a;this._coord=c;this._flip=b=="y"&&c._cls_name=="gg.coord.polar";this._attr=k.cloneobj(sa.opts.axis);this._type=="x"?h.extend(this._attr,sa.opts.axis_x):this._type=="y"&&h.extend(this._attr,sa.opts.axis_y)};sa.guide.axis.prototype.width=function(){return this._scale.maxLabelWidth()};
sa.guide.axis.prototype.scale=function(a){this._scale=a;return this};sa.guide.axis.prototype.renderLinear=function(a,b){var c=a.canvas,d=a.position,e=d=="top"||d=="bottom",f=d=="left"||d=="right",g=e?"middle":d=="left"?"end":"start",i=e?0:d=="left"?-10:10,j=f?0:d=="top"?-10:15,k=e?this.opts("ticklength-x"):this.opts("ticklength-y"),l=this.opts("fontsize"),n=this.opts("color"),o=this.opts("strokewidth");b||(b={line:true,ticks:true,labels:true});!e&&!f&&sa.error(501,"Position should be 'top', 'bottom', 'left', or 'right'. Got "+
d+" instead.");e&&this._type!="x"&&sa.error(501,"Position should be 'top' or 'bottom'. Got "+d+" instead.");f&&this._type!="y"&&sa.error(501,"Position should be 'left', or 'right'. Got "+d+" instead.");var p=[0,0],r=[0,0];e?p=this._scale.range():r=this._scale.range();this.opts("line")&&b.line!==false&&c.line().attr("func",{x1:p[0],x2:p[1],y1:r[0],y2:r[1],stroke:n,"stroke-width":o}).attr("data",{});p=this._scale.ticks(null,this._flip);if(this._flip){var s=h.max(this._scale.range());h.each(p,function(a){a.pos=
s-a.pos})}this.opts("ticks")&&b.ticks!==false&&h.each(p,function(a){c.line().attr("func",{x1:function(a){return e?a.pos:0},x2:function(a){return e?a.pos:d=="left"?-k:k},y1:function(a){return f?a.pos:0},y2:function(a){return f?a.pos:d=="top"?-k:k},stroke:n,"stroke-width":o}).attr("data",a)});this.opts("labels")&&b.labels!==false&&h.each(p,function(a){c.text().attr("func",{x:function(a){return e?a.pos:i},y:function(a){return f?a.pos:j},text:function(a){return String(a.label)},"font-size":l,"font-color":n,
"text-anchor":g}).attr("data",a)})};sa.guide.axis.prototype.renderCircular=function(a,b){var c=a.coord,d=a.radius,e=this.opts("ticklength-y"),f=this.opts("fontsize"),g=this.opts("color"),i=this.opts("strokewidth"),b=b||{line:true,ticks:true,labels:true},j,l,o,n,r,p,t,s;if(c._flip){j=h.bind(c.vline,c);l=h.bind(c.hline,c);o="y";r="y1";p="y2";n="x";t="x1";s="x2"}else{j=h.bind(c.hline,c);l=h.bind(c.vline,c);o="x";r="x1";p="x2";n="y";t="y1";s="y2"}if(this.opts("line")&&b.line!==false){var u={stroke:g,
"stroke-width":i};u[o]=k.constfunc(d);u[t]=k.constfunc(0);u[s]=k.constfunc(360);l().attr("func",u).attr("data",{})}l=this._scale.ticks(null);if(this.opts("ticks")&&b.ticks!==false){u={"class":"labeltick",stroke:g,"stroke-width":i};u[r]=k.constfunc(d);u[p]=k.constfunc(d+e);u[n]=function(a){return a.pos};h.each(l,function(a){j().attr("func",u).attr("data",a)})}if(this.opts("labels")&&b.labels!==false){u={text:function(a){return a.label},"font-size":k.constfunc(f),"text-anchor":k.constfunc("middle"),
"font-color":k.constfunc(g)};u[o]=k.constfunc(d+e+2);u[n]=function(a){return a.pos};h.each(l,function(a){c.text().attr("func",u).attr("data",a)})}};var Pb=o;Pb.guide.grid=k.makeClass("gg.guide.grid",Pb.guide.base);Pb.guide.grid.prototype.init=function(a,b){Pb.guide.base.prototype.init.call(this);this._attr=k.cloneobj(Pb.opts.grid);this.opts("xscale",a);this.opts("yscale",b)};Pb.guide.grid.prototype.render=function(a){var b=this,c=a._flip!==(a._cls_name==="gg.coord.polar"),d=this.opts("xscale"),e=
d.range(),f=h.min(e),g=h.max(e),e=d.ticks(null,c),i=this.opts("yscale"),j=i.range(),l=h.min(j),o=h.max(j),c=i.ticks(null,c);this.opts("render-vertical")&&h.each(e,function(c){a.vline().attr("func",{x:function(a){return d.apply(a.data)},y1:k.constfunc(l),y2:k.constfunc(o),stroke:b.opts("stroke"),"stroke-width":b.opts("strokewidth"),"stroke-dasharray":b.opts("dasharray"),"stroke-dashoffset":b.opts("dashoffset")}).attr("data",c)});this.opts("render-horizontal")&&h.each(c,function(c){a.hline().attr("func",
{y:function(a){return i.apply(a.data)},x1:k.constfunc(f),x2:k.constfunc(g),stroke:b.opts("stroke"),"stroke-width":b.opts("strokewidth"),"stroke-dasharray":b.opts("dasharray"),"stroke-dashoffset":b.opts("dashoffset")}).attr("data",c)})};var ya=o,wh="x y text group group2 grp tooltip".split(" ");ya.guide.legend=k.makeClass("gg.guide.legend",ya.guide.base);ya.guide.legend.prototype.init=function(a,b,c,d){ya.guide.base.prototype.init.call(this);this._graph=a;this._layers=b;this._scales=c;this._aes=h.chain(c).keys().reject(function(a){return k.isDerivedAes(a)||
h.indexOf(wh,a)!=-1}).value();this._mappings=h.map(b,function(a){return a.getMap()});this._legends=null;this._position=d};ya.guide.legend.prototype.width=function(){this.group();var a=this;if(this._position!="bottom"){var b=h.chain(this._legends).map(function(a){return a.sample_scale.maxLabelWidth()}).max().value()+30,c=h.chain(this._legends).map(function(b){return k.strlenToPixel(a._graph._varlabel(b.sample_aes).length,"bold")}).max().value()+30;return Math.max(b,c,0)}return 0};ya.guide.legend.prototype.group=
function(){var a=this;this._legends=[];for(var b=h.clone(this._aes),c="",d=function(b,d){b.aes.push(d);if(!b.sample_scale_categorical){c=a._scales[d];b.sample_aes=d;b.sample_scale=c;b.sample_scale_categorical=c.DISCRETE}};b.length>0;){var e=b.pop(),f=h.pluck(this._mappings,e),g=null,i={aes:[],mapping:f,sample_aes:null,sample_scale:null,sample_scale_categorical:false};d(i,e);for(e=0;e<b.length;){g=h.pluck(this._mappings,b[e]);h.isEqual(g,f)?d(i,b.splice(e,1)[0]):e++}this._legends.push(i)}return this};
ya.guide.legend.prototype.render=function(a){h.isNull(this._legends)&&this.group();var b=this,c,d=0,e=this._position=="bottom"?"h":"v";h.each(this._legends,function(f){f={legend:f,canvas:a.canvas.differentOffset(0,d),orientation:e,chartWidth:a.chartWidth,chartHeight:a.chartHeight};c=b._renderEach(f);d=e=="h"?d+(c.y+15):d+(c.y+10)})};ya.guide.legend.prototype._renderEach=function(a){for(var b=this,c=a.legend,d=a.canvas,e=c.sample_aes,f=c.sample_scale,g=[],i=[],j=0;j<this._layers.length;j++)if(this._mappings[j][e]){i.push(this._layers[j]);
g.push(this._layers[j]._cls_name.split(".")[2])}var g=h.uniq(g),l={color:k.constfunc("#000000"),stroke:k.constfunc("#000000"),strokewidth:k.constfunc(0),symbol:k.constfunc(ya.symbol.DIAMOND),radius:k.constfunc(5),opacity:k.constfunc(1)};if(h.any(h.map(g,function(a){return a=="line"||a=="path"}))){l.symbol=k.constfunc(ya.symbol.CROSS);l.strokewidth=k.constfunc(1)}else l.symbol=k.constfunc(ya.symbol.CIRCLE);h.each(h.keys(l),function(a){if(a!="radius"){var b=i[0].opts(a);if(h.isString(b)||h.isNumber(b))l[a]=
k.constfunc(b)}});h.each(c.aes,function(a){l[a]=h.bind(b._scales[a].apply,b._scales[a],"data")});var c=f.type()=="category"?this._graph.levels(e).length:5,f=f.ticks(c),o=g[0]=="line"||g[0]=="path"?this._render_line_tick:this._render_point_tick,n=0,r=0,e=d.text().attr("func",{x:0,y:0,"font-size":"13px","font-weight":"bold","text-anchor":"start",text:k.constfunc(b._graph._varlabel(e))}).attr("data",{}),r=r+e.getBBox().height,p,t,s=0,u=0;h.each(f,function(c){p=o(c,d,l,n,r);t=b._render_label(c,d,n+20,
r);if(a.orientation=="v"){r=r+Math.max(t.getBBox().height,p.getBBox().height);u=Math.max(u,r)}else{n=n+(t.getBBox().width+40);s=Math.max(s,n);if(n>a.chartWidth-t.getBBox().width){r=r+Math.max(t.getBBox().height,p.getBBox().height);u=Math.max(u,r);n=0}}});a.orientation=="h"&&(u=u+Math.max(t.getBBox().height,p.getBBox().height));return{y:u,x:s}};ya.guide.legend.prototype._render_line_tick=function(a,b,c,d,e){return b.line().attr("func",{x1:k.constfunc(d),x2:k.constfunc(d+14),y1:k.constfunc(e),y2:k.constfunc(e),
stroke:c.color,"fill-opacity":c.opacity,"stroke-width":c.strokewidth}).attr("data",a)};ya.guide.legend.prototype._render_point_tick=function(a,b,c,d,e){return b.point().attr("func",{cx:k.constfunc(d+7),cy:k.constfunc(e),r:c.radius,symbol:c.symbol,fill:c.color,stroke:c.stroke,"fill-opacity":c.opacity,"stroke-width":c.strokewidth}).attr("data",a)};ya.guide.legend.prototype._render_label=function(a,b,c,d){return b.text().attr("func",{x:k.constfunc(c),y:k.constfunc(d),"font-size":"12px","text-anchor":"start",
text:function(a){return String(a.label)}}).attr("data",a)};var Bb=o;Bb.layer.area=k.makeClass("gg.layer.area",Bb.layer.base);Bb.layer.area.prototype.init=function(){Bb.layer.base.prototype.init.call(this);this.opts("stroke","none").opts("opacity",0.4).opts("color","steelblue").opts("strokewidth",0).opts("padding",0.5)};Bb.layer.area.prototype.render=function(a){var b=a.coord,c=a.scales,d=a.rawScales.y.opts("domain_low"),e=c.y(d),f=function(a,b){a.push(a[a.length-1]);a.push(a[0]);b.push(e);b.push(e)},
g,i;g=c.x;i=c.y_stack||c.y_override||c.y;h.each(a.computedData,function(a){b.poly().attr("func",{x:g,y:i,_sort:g,_pointModifier:f,_style:c}).attr("data",a)})};Bb.layer.area.prototype.imputeMapping=function(a){return Bb.layer.base.prototype.imputeMapping.call(this,a,{group:["stroke","color"]})};var ta=o;ta.layer.bar=k.makeClass("gg.layer.bar",ta.layer.base);ta.layer.bar.prototype.init=function(){ta.layer.base.prototype.init.call(this);var a=this;h.each(ta.opts.bar,function(b,c){a.opts(c,b)});this.opts("padding",
0)};ta.layer.bar.prototype.defaultMin=function(a,b){h.isDate(b)&&(b=b.getTime());if(a=="y")return 0;if(a=="x"){var c=this.opts("align"),d=this.opts("width");if(c=="center")return b-d/2;if(c=="right")return b-d}return ta.layer.base.prototype.defaultMin.call(this,a,b)};ta.layer.bar.prototype.defaultMax=function(a,b){if(a=="x"){var c=this.opts("align"),d=this.opts("width");if(c=="center")return b- -d/2;if(c=="left")return b- -d}return ta.layer.base.prototype.defaultMax.call(this,a,b)};ta.layer.bar.prototype.defaultScales=
function(){return{x:ta.scale.discrete("x")}};ta.layer.bar.prototype.checkErrors=function(a){if(a.rawScales.y.type()!=="number"){ta.error(311,"y scale must be numeric.");return true}return false};ta.layer.bar.prototype.render=function(a){var b=a.coord,c=a.scales,d=this.opts("width"),e;e=a.rawScales.x.DISCRETE?a.width:a.rawScales.x.apply(d)-a.rawScales.x.apply(0);var d=e/2*(1-this.opts("padding")*2),f=a.rawScales.y.opts("domain_low");h.isNumber(f)||this.warn(-2,"originLocation is numeric.");var g=null,
i=null,j,l,o=this.opts("align");if(o=="left"||o=="right"){e=e/2-d;if(o=="right"){j=k.sub(c.x,e);l=k.sub(c.x,e+d*2)}else{j=k.add(c.x,e);l=k.add(c.x,e+d*2)}}else if(o=="center"){j=k.sub(c.x,d);l=k.add(c.x,d)}if(c.y_1&&c.y_2){i=c.y_1;g=c.y_2}else{i=c.y_override?c.y_override:c.y;g=d=i(f)}var n=this,r=this.opts("onDoubleclick");a.computedData.each(function(a){b.rect().ggTooltip(c).ggDoubleClick(r,n).attr("func",{x1:j,x2:l,y1:i,y2:g,_style:c}).attr("data",a)})};ta.layer.bar.prototype.hasGroup=function(){return false};
var na=o;na.layer.box=k.makeClass("gg.layer.box",na.layer.base);na.layer.box.prototype.init=function(){na.layer.base.prototype.init.call(this);var a=this;h.each(na.opts.box,function(b,c){a.opts(c,b)});this._default_stats=na.stats.box};na.layer.box.prototype.defaultMin=function(a,b){h.isDate(b)&&(b=b.getTime());if(a=="y")return 0;if(a=="x"){var c=this.opts("align"),d=this.opts("width");if(c=="center")return b-d/2;if(c=="right")return b-d}};na.layer.box.prototype.defaultMax=function(a,b){if(a=="x"){var c=
this.opts("align"),d=this.opts("width");if(c=="center")return b- -d/2;if(c=="left")return b- -d}return na.layer.base.prototype.defaultMax.call(this,a,b)};na.layer.box.prototype.checkErrors=function(){var a=h.keys(this.getMap());if(h.include(a,"y"))return false;this.warn(320,"No mapping has been set in layer "+this._cls_name);return true};na.layer.box.prototype.render=function(a){var b=a.coord,c=a.scales,d=this.opts("width"),d=a.rawScales.x.DISCRETE?a.width:a.rawScales.x.apply(d)-a.rawScales.x.apply(0),
e=d/2*(1-this.opts("padding")*2),f,g,i,j=this.opts("align");if(j=="left"||j=="right"){var l=d/2-e;if(j=="right"){i=k.sub(c.x,e);f=k.sub(c.x,d/2);g=k.sub(c.x,l+e*2)}else{i=k.add(c.x,d/2);f=k.add(c.x,l);g=k.add(c.x,l+e*2)}}else if(j=="center"){f=k.sub(c.x,e);i=c.x;g=k.add(c.x,e)}if(!c.y_q0)c.y_q0=c.y;if(!c.y_q1)c.y_q1=c.y;if(!c.y_q2)c.y_q2=c.y;if(!c.y_q3)c.y_q3=c.y;if(!c.y_q4)c.y_q4=c.y;var o=this.opts("onDoubleclick");a.computedData.each(function(a){if(!h.isNull(a.$q0)&&!h.isNull(a.$q3)){b.vline().attr("func",
{y1:c.y_q0,y2:c.y_q1,x:i,_style:c}).attr("data",a);b.vline().attr("func",{y1:c.y_q3,y2:c.y_q4,x:i,_style:c}).attr("data",a);b.rect().ggDoubleClick(o).attr("func",{x1:f,x2:g,y1:c.y_q1,y2:c.y_q3,_style:c}).attr("data",a);b.hline().attr("func",{x1:f,x2:g,y:c.y_q4,_style:c}).attr("data",a);b.hline().attr("func",{x1:f,x2:g,y:c.y_q2,_style:c}).attr("data",a);b.hline().attr("func",{x1:f,x2:g,y:c.y_q0,_style:c}).attr("data",a)}else b.point().ggTooltip(c).attr("func",{cx:i,cy:c.y,r:c.radius,symbol:c.symbol,
_style:c}).attr("data",a)})};na.layer.box.prototype.imputeMapping=function(a){return na.layer.base.prototype.imputeMapping.call(this,a,{group:"x"})};na.layer.box.prototype.hasGroup=function(){return false};na.layer.box.prototype.checkErrors=function(a){if(a.rawScales.y.type()!=="number"){na.error(311,"y scale must be numeric.");return true}return false};var ic=o;ic.layer.histo=k.makeClass("gg.layer.histo",ic.layer.bar);ic.layer.histo.prototype.init=function(){ic.layer.bar.prototype.init.call(this);
this._default_stats=ic.stats.bin};var Cb=o;Cb.layer.jitter=k.makeClass("gg.layer.jitter",Cb.layer.base);Cb.layer.jitter.prototype.init=function(){Cb.layer.base.prototype.init.call(this);this.opts("radius",3);this.opts("symbol",Cb.symbol.CIRCLE)};Cb.layer.jitter.prototype.render=function(a){var b=a.coord,c=a.scales,d={cx:function(a){return c.x(a)+20*(Math.random()-0.5)},cy:function(a){return c.y(a)+20*(Math.random()-0.5)},r:c.radius,symbol:c.symbol,stroke:c.stroke,"stroke-width":c.strokewidth,"fill-opacity":c.opacity,
fill:c.color};a.computedData.each(function(a){b.point().attr("func",d).attr("data",a)})};Cb.layer.jitter.prototype.hasGroup=function(){return false};var Za=o;Za.layer.line=k.makeClass("gg.layer.line",Za.layer.base);Za.layer.line.prototype.init=function(){Za.layer.base.prototype.init.call(this);var a=this;h.each(Za.opts.line,function(b,c){a.opts(c,b)})};Za.layer.line.prototype.render=function(a){var b=a.coord,c=a.scales,d=c.y_override||c.y;h.each(a.computedData,function(a){b.poly().attr("func",{x:c.x,
y:d,_sort:c.x,stroke:c.color,fill:"none","stroke-width":c.strokewidth}).attr("data",a)})};Za.layer.line.prototype.imputeMapping=function(a){return Za.layer.base.prototype.imputeMapping.call(this,a,{group:["stroke","color"]})};Za.layer.line.prototype.defaultMin=function(a){if(a=="y")return 0};var ib=o;ib.layer.path=k.makeClass("gg.layer.path",ib.layer.base);ib.layer.path.prototype.init=function(){ib.layer.base.prototype.init.call(this);var a=this;h.each(ib.opts.line,function(b,c){a.opts(c,b)})};ib.layer.path.prototype.render=
function(a){var b=a.coord,c=a.scales,d=c.y_override||c.y;h.each(a.computedData,function(a){b.poly().attr("func",{x:c.x,y:d,stroke:c.color,fill:"none","stroke-width":c.strokewidth}).attr("data",a)})};ib.layer.line.prototype.imputeMapping=function(a){return ib.layer.base.prototype.imputeMapping.call(this,a,{group:["stroke","color"]})};var Qa=o;Qa.layer.point=k.makeClass("gg.layer.point",Qa.layer.base);Qa.layer.point.prototype.init=function(){Qa.layer.base.prototype.init.call(this);var a=this;h.each(Qa.opts.point,
function(b,c){a.opts(c,b)});this.opts("symbol",Qa.symbol.CIRCLE)};Qa.layer.point.prototype.render=function(a){var b=a.coord,c=a.scales,d={cx:c.x,cy:c.y_override||c.y,r:c.radius,symbol:c.symbol,_style:c};a.computedData.each(function(a){b.point().ggTooltip(c).attr("func",d).attr("data",a)},this.opts("render-max"))};Qa.layer.point.prototype.imputeMapping=function(a){return Qa.layer.base.prototype.imputeMapping.call(this,a,{color:"stroke"})};Qa.layer.point.prototype.hasGroup=function(){return false};
Qa.layer.base.prototype.requiredMap=function(){return["x","y"]};var Db=o;Db.layer.text=k.makeClass("gg.layer.text",Db.layer.base);Db.layer.text.prototype.init=function(){Db.layer.base.prototype.init.call(this);var a=this;h.each(Db.opts.text,function(b,c){a.opts(c,b)})};Db.layer.text.prototype.render=function(a){var b=a.coord,c=a.scales,d=c.y_override||c.y;a.computedData.each(function(a){b.text().attr("func",{x:c.x,y:d,text:c.text,fill:c.color,"fill-opacity":c.opacity,"font-size":c.fontsize,"font-family":c.font}).attr("data",
a)})};Db.layer.text.prototype.hasGroup=function(){return false};var Qb=o;Qb.layer.tile=k.makeClass("gg.layer.tile",Qb.layer.base);Qb.layer.tile.prototype.init=function(){Qb.layer.base.prototype.init.call(this);this.opts("stroke","none").opts("padding",0.5)};Qb.layer.tile.prototype.render=function(a){var b=a.scales,c=a.rawScales.x.width(),d=a.rawScales.y.width(),e=c/2,f=d/2,g=a.coord;a.computedData.each(function(a){g.rect().attr("func",{x1:k.sub(b.x,e),y1:k.sub(b.y,f),x2:k.add(b.x,e),y2:k.add(b.y,
f),_style:b}).attr("data",a)})};Qb.layer.tile.prototype.hasGroup=function(){return false};var H=o;H.pivot=k.makeClass("gg.pivot");H.pivot.prototype.init=function(a){this._data=a;this._statData={};this._attr=k.cloneobj(H.opts.pivot);this._mapping={};this._levels={};this._stats=null;this._calculated=false;this._scales={}};H.pivot.prototype.data=k.dataGetter();H.pivot.prototype.map=function(a,b){if(arguments.length===1)return this._mapping[a];b?this._mapping[a]=b:delete this._mapping[a];this.resetCalculate();
return this};H.pivot.prototype.levels=function(a,b){if(arguments.length===1)return this._levels[a]?this._levels[a]:this.callData("levels",a);b?this._levels[a]=b:delete this._levels[a];return this};H.pivot.prototype.getMap=function(){var a={};if(this._mapping.column)a.group_c=this._mapping.column;if(this._mapping.row)a.group_r=this._mapping.row;if(this._mapping.value)a.y=this._mapping.value;return a};H.pivot.prototype.getScale=function(a){return this._scales[a]};H.pivot.prototype.scale=function(a,
b){if(!(a!="column"&&a!="row")){(b=k.instantiate(b))||H.error(201,"Attempting to add an undefined or malformed scale: "+b);var c=k.cloneobj(b);c.attach(this,a);this._scales[a]=c;return this}};H.pivot.prototype.opts=k.opts();H.pivot.prototype.stats=function(a){if(arguments.length===1){(a=k.instantiate(a))||H.error(304,"Attempting to add an undefined or malformed statistic: "+a);this._stats=a;this.resetCalculate();return this}if(this._stats)return this._stats;var b=this._mapping.value,c=b?this._data.type(b):
"";return c=="category"||!b?H.stats.count():c=="date"?H.stats.mean():H.stats.sum()};H.pivot.prototype.callData=function(a,b,c){if(!c||c=="data")return this._data[a](b);if(c=="aes")return this._data[a](this.map(b));H.error(-1,"not supported "+c)};H.pivot.prototype.type=function(a,b){return this.callData("type",a,b)};H.pivot.prototype.min=function(a,b){return this.callData("min",a,b)};H.pivot.prototype.max=function(a,b){return this.callData("max",a,b)};H.pivot.prototype.calculateStats=function(a,b){return a.calculateStats(this._data,
b)[0]};H.pivot.prototype.calculate=function(){if(!this._calculated){var a=this.stats(),b={};if(this._scales.column)b.group_c=this._scales.column;if(this._scales.row)b.group_r=this._scales.row;var c=this.getMap(),b={scales:b,mapping:c,group_aes:[],attr:{y:this.opts("y"),x:this.opts("x")}};this._statData={};if(c.group_c&&c.group_r){b.group_aes=["group_c","group_r"];this._statData.cr=this.calculateStats(a,b)}if(c.group_c){var d=b.mapping.group_r;delete b.mapping.group_r;b.group_aes=["group_c"];this._statData.c=
this.calculateStats(a,b);b.mapping.group_r=d;delete b.mapping.group_c}if(c.group_r){b.group_aes=["group_r"];this._statData.r=this.calculateStats(a,b);delete b.mapping.group_r}this._statData.none=this.calculateStats(a,b);return this}};H.pivot.prototype.resetCalculate=function(){this._calculated=false;this._default_stats=H.stats.sum;return this};H.pivot.prototype._getPrettifyFunction=function(a,b){var c=-Infinity,d=Infinity,e=true;h.each(a,function(a){h.each(a.get(b),function(a){a>c&&(c=a);a<d&&(d=
a);e&&a%1!==0&&(e=false)})});var f=Math.log(Math.abs(c))/Math.LN10;return e||f>=3?function(a){return k.prettify(a,0)}:function(a){return k.prettify(a,-Math.floor(f-3))}};var wf=function(a){return a.toString()};H.pivot.prototype._getColumnFormatter=function(){return!this.opts("colFormatter")?wf:this.opts("colFormatter")};H.pivot.prototype._getRowFormatter=function(){return!this.opts("rowFormatter")?wf:this.opts("rowFormatter")};H.pivot.prototype._makeTableArray=function(){var a=this.map("column"),
b=this.map("row"),c=this.stats().imputeMapping({}),d=c.y||c.y_override,e=a?this.levels(a):[],f=b?this.levels(b):[],g=this._getRowFormatter(),i=this._getColumnFormatter(),e=h.map(e,i),f=h.map(f,g),j=e.length,k=f.length,l=this._getPrettifyFunction(this._statData,d),n=Array(k+2);n[0]=[""].concat(e).concat(["all"]);var o,p;for(p=1;p<k+2;p++){n[p]=Array(j+2);n[p][0]=p==k+1?"all":f[p-1]}this._statData.cr&&h.each(this._statData.cr.getRaw(),function(c){p=a?h.indexOf(e,i(c[a])):-1;o=b?h.indexOf(f,g(c[b])):
-1;o!==-1&&p!==-1&&(n[o+1][p+1]=l(c[d]))});this._statData.c&&h.each(this._statData.c.getRaw(),function(b){p=a?h.indexOf(e,i(b[a])):0;p!==-1&&(n[k+1][p+1]=l(b[d]))});this._statData.r&&h.each(this._statData.r.getRaw(),function(a){o=b?h.indexOf(f,g(a[b])):0;o!==-1&&(n[o+1][j+1]=l(a[d]))});this._statData.none&&h.each(this._statData.none.getRaw(),function(a){n[k+1][j+1]=l(a[d])});return n};H.pivot.prototype.makeTableDom=function(a){a||H.error(212,"Invalid dom for .opts('dom') - "+a);var b=jQuery,c=b(a);
c||H.error(212,"Invalid dom for .opts('dom') - "+a);var d=this.opts("padding-left"),e=this.opts("padding-right"),f=this.opts("padding-top"),g=this.opts("padding-bottom"),h=this.opts("width");c.empty();a=b("<table></table>");a.css("color","black");a.css("width",h);a.css("margin-top",f);a.css("margin-bottom",g);a.css("margin-right",e);a.css("margin-left",d);b=b("<tbo></tbo>");b.width(this.opts("width"));b.height(this.opts("height"));a.append(b);c.append(a);return b};H.pivot.prototype.render=function(a){this.calculate();
var b=this._makeTableArray(),a=a||this.opts("dom"),a=this.makeTableDom(a),c,d,e,f;e=b[0]?b[0].length+2:2;d=b[0]?b[0].length:1;var g=b[0]?b.length:1,i=this.opts("title");c=$("<tr></tr>");e=$("<th></th>").attr("colspan",e);e.text(h.isUndefined(i)?" ":i);e.css("textAlign","center");e.css("paddingBottom","5px");c.append(e);a.append(c);i=this.opts("title-column")||this.map("column");c=$("<tr></tr>");c.append($("<th></th>"));c.append($("<th></th>"));e=$("<th></th>").attr("colspan",d);e.text(i);e.css("textAlign",
"center");e.css("paddingBottom","5px");e.css("font-weight","normal");i&&e.css("border","1px solid black");c.append(e);a.append(c);for(var j,i=0;i<b.length;i++){d=b[i];c=$("<tr></tr>");if(i===0)c.append($("<th></th>"));else if(i==1){f=this.opts("title-row")||this.map("row");e=$("<th></th>").attr("rowspan",g);j=$("<div></div>");j.text(f);j.css("-webkit-transform","rotate(270deg)");j.css("-moz-transform","rotate(270deg)");j.css("-ms-transform","rotate(270deg)");j.css("-o-transform","rotate(270deg)");
e.css("paddingBottom","5px");e.css("font-weight","normal");f&&e.css("border","1px solid black");e.css("textAlign","center");e.css("verticalAlign","middle");e.append(j);c.append(e)}for(j=0;j<d.length;j++){f=d[j];e=$(i*j===0?"<th></th>":"<td></td>");e.text(h.isUndefined(f)?" ":f);c.append(e);e.css("minWidth","50px");e.css("width",100/d.length+"%");e.css("minHeight","22px");e.css("height",100/b.length+"%");e.css("padding","2px");if(!(i==0&&j==0))if(i==0||j==0)e.css("border","1px solid black");else{e.css("border",
"1px solid gray");e.css("textAlign","right")}}a.append(c)}return this};var Y=o;Y.scale.continuous=k.makeClass("gg.scale.continuous",Y.scale.base);Y.scale.continuous.prototype.init=function(a,b,c){Y.scale.base.prototype.init.call(this);this._type="number";this._d3scale=null;this._attr.min=h.isNumber(b)?b:null;this._attr.max=h.isNumber(c)?c:null;this._useDefault=false;this._defaultMax=this._defaultMin=null;this.opts("transform",a||"linear");this.opts("expand",0);this.opts("transform")==="log"&&this.opts("absolute_min",
1)};Y.scale.continuous.prototype.domain=function(a){if(arguments.length===1){this.min(a[0]);this.max(a[1]);return this}return[this._attr.domain_low,this._attr.domain_high]};Y.scale.continuous.prototype.width=function(){if(!this._attr.width)this._attr.width=this._makeWidth();return this._attr.width};Y.scale.continuous.prototype.maxLabelWidth=function(){var a=this._graph.max(this._aes),b=this._graph.min(this._aes),b=Math.floor(Math.log((a-b)/10)/Math.LN10);return a?k.strlenToPixel(k.prettify(a,-b).length):
15};Y.scale.continuous.prototype.distance=function(a,b){return Math.abs(this._d3scale(a)-this._d3scale(b))};Y.scale.continuous.prototype._makeDefaultMinMax=function(){if(this._graph){var a=this._aes,b=this._graph.min(a),c=this._graph.max(a);this._defaultMin=this._graph.defaultMin(a,b);this._defaultMax=this._graph.defaultMax(a,c);if(h.isNumber(this._defaultMin)&&this._defaultMin<this._attr.absolute_min)this._defaultMin=this._attr.absolute_min;if(h.isNumber(this._defaultMax)&&this._defaultMax>this._attr.absolute_max)this._defaultMax=
this._attr.absolute_max}};Y.scale.continuous.prototype._makeWidth=function(){var a=this._graph.levels(this._aes,null,this._facetIndex);if(a.length<=1)a=this.rangeSize();else var b=h.bind(this._apply,this),a=k.minimumDelta(h.map(a,b));return Math.max(a,1)};Y.scale.continuous.prototype._makeDomain=function(){this._makeDefaultMinMax();var a=this._aes,b=this._attr.min,c=this._attr.max,d;d=0;var e=2;if(h.isNumber(b)&&h.isNumber(c)){d=b;e=c}else if(this._graph._layers.length>0){if(this._graph.isMapped(a,
true)){d=this._graph.min(a,null,this._facetIndex);a=this._graph.max(a,null,this._facetIndex)}else{a=h.chain(this._graph._layers).invoke("opts",a).value();d=h.min(a)-1;a=h.max(a)+1}if(this.opts("expand")>0){e=(a-d)*this.opts("expand");d===0&&this._aes=="y"||(d=d-e);a=a+e}if(h.isNumber(this._defaultMin)&&d>this._defaultMin)d=this._defaultMin;if(h.isNumber(this._defaultMax)&&a<this._defaultMax)a=this._defaultMax;d=h.isNumber(b)?b:d;e=h.isNumber(c)?c:a}h.isNumber(this._attr.absolute_min)&&(d=Math.max(d,
this._attr.absolute_min));h.isNumber(this._attr.absolute_max)&&(e=Math.min(e,this._attr.absolute_max));this._saneNumber(d)||Y.error(406,"min() calculation returned an invalid number.");this._saneNumber(e)||Y.error(406,"max() calculation returned an invalid number.");d>e&&Y.error(408,"min is set to be bigger than max in a continuous scale.");this.opts("domain_low",d);this.opts("domain_high",e);return[d,e]};Y.scale.continuous.prototype.make=function(a){this.range()||Y.error(407,"Continuous scale's range is not set.");
var b=this.opts("transform");this._d3scale=b=="log"?j.scale.log():b=="sqrt"?j.scale.sqrt():j.scale.linear();this._facetIndex=h.isNumber(a)?a:-1;a=this._makeDomain();this._d3scale.domain(a).range(this.range());return this};Y.scale.continuous.prototype._apply=function(a){this._d3scale||this.make();if(a===null)return null;if(a===0&&this.opts("transform")=="log")a=this._attr.domain_low;return this._d3scale(a)};Y.scale.base.prototype.ticks=function(a,b){var c=0,d=this._attr.domain_low,e=this._attr.domain_high,
f=this.opts("transform")=="log",g=this._suggestNumticks(a,b);if(f){d=Math.max(Math.log(d)/Math.LN10,0);e=Math.log(e)/Math.LN10;c=Y.opts.epsilon}var h=e-d,j=Math.pow(10,Math.floor(Math.log(h/g)/Math.LN10)),g=g/h*j;g<=0.15?j=j*10:g<=0.35?j=j*5:g<=0.75&&(j=j*2);g=[];d=Math.ceil(d/j)*j;f&&(d=d-1);for(h=-Math.floor(Math.log(j)/Math.LN10);d<=e+c;){var l=d,o=l;if(f){if(l%1!==0&&l%1<=0.1){d=d+j;continue}if(l%1>c){l=Math.floor(l)+Math.log(10*(l%1))/Math.LN10;if(l%1==0){d=d+j;continue}}l=Math.exp(l*Math.LN10);
if(l>this._attr.domain_high+c)break;if(l<this._attr.domain_low-c){d=d+j;continue}o=k.prettify(l)}else o=k.prettify(l,h);g.push(this._tickObject(l,this.apply(l),o));d=d+j}return g};Y.scale.continuous.prototype.CONTINUOUS=!0;var za=o;za.scale.discrete=k.makeClass("gg.scale.discrete",za.scale.base);za.scale.discrete.prototype.init=function(){za.scale.base.prototype.init.call(this);this._type="category";this._eachWidth=this._levels=null;this._padding=0.02;this._rangeMin=null};za.scale.discrete.prototype.domain=
function(a){if(arguments.length===0)return this._levels;this._levels=a;return this};za.scale.discrete.prototype.padding=function(a){if(arguments.length===0)return this._padding;k.assertNumber(a);this._padding=a;return this};za.scale.discrete.prototype.width=function(){this._eachWidth||this.make();return this._eachWidth};za.scale.discrete.prototype.maxLabelWidth=function(){var a=this._graph.levels(this._aes);return!a?0:k.strlenToPixel(h.chain(a).map(function(a){return String(a).length}).max().value())};
za.scale.discrete.prototype.make=function(a){this.range()||za.error(407,"Discrete scale's range is not set.");this._facetIndex=h.isNumber(a)?a:-1;var b=this.range(),c=Math.abs(b[1]-b[0]);this._rangeMin=h.min(b);if(!this._levels){this._levels=this._graph.levels(this._aes,null,a);if(this._levels.length==0)this._levels=[""]}this._eachWidth=c/this._levels.length;this._eachWidth=Math.abs(this._eachWidth);a=this._padding>=1?this._padding:this._eachWidth*this._padding;this._eachWidth=this._eachWidth-a;this._padding=
a;return this};za.scale.discrete.prototype._apply=function(a){this._levels||this.make();var b=h.indexOf(this._levels,a);b===-1&&this.warn(404,"Discrete scale got value "+a+" that is not in the domain.");return this._rangeMin+b*(this._eachWidth+this._padding)+this._padding/2+this._eachWidth/2};za.scale.discrete.prototype.ticks=function(a,b){for(var c=this._suggestNumticks(a,b),c=Math.max(1,Math.round(this._levels.length/c)),d=[],e=Math.floor(c/2);e<this._levels.length;e=e+c)d.push(this._tickObject(this._levels[e],
this.apply(this._levels[e]),this._levels[e]));return d};za.scale.discrete.prototype.toCode=function(a,b){var c={cls:this._cls_name,funcs:[["padding",this._padding],["opts",ea.stringify(this.getAttr())]]};this._levels&&c.funcs.push(["domain",ea.stringify(this._levels)]);return k.toCode(a,b,c)};za.scale.discrete.prototype.DISCRETE=!0;var $a=o;$a.scale.gradient=k.makeClass("gg.scale.gradient",$a.scale.continuous);$a.scale.gradient.prototype.init=function(a,b){$a.scale.continuous.prototype.init.call(this);
this._attr.range_low=a||$a.opts.gradient.low;this._attr.range_high=b||$a.opts.gradient.high;this._d3scale=null};$a.scale.gradient.prototype.make=function(){this.range()||$a.error(407,"Gradient scale's range is not set.");if(!h.isNumber(this._attr.domain_low))this._attr.domain_low=this._graph.min(this._aes);if(!h.isNumber(this._attr.domain_high))this._attr.domain_high=this._graph.max(this._aes);this._d3scale=j.scale.linear().domain([this._attr.domain_low,this._attr.domain_high]).range(this.range());
return this};$a.scale.gradient.prototype._apply=function(a){this._d3scale||this.make();return this._d3scale(a)};var Ta=o;Ta.scale.id=k.makeClass("gg.scale.id",Ta.scale.base);Ta.scale.id.prototype.init=function(){Ta.scale.base.prototype.init.call(this);this._type=null};Ta.scale.id.prototype.type=function(){if(!this._type)this._type=this._graph.type(this._aes);return this._type};Ta.scale.id.prototype.domain=function(){return this._type=="number"?[this._graph.min(this._aes),this._graph.max(this._aes)]:
this._graph.levels(this._aes)};Ta.scale.id.prototype.range=function(){return this.domain()};Ta.scale.id.prototype.make=function(){if(this._type=="number"){this._attr.domain_low=this._graph.min(this._aes);this._attr.domain_high=this._graph.max(this._aes)}};Ta.scale.id.prototype._apply=function(a){return a};Ta.scale.id.prototype.maxLabelWidth=function(){var a=this._graph.levels(this._aes);return!a?0:k.strlenToPixel(h.chain(a).map(function(a){return String(a).length}).max().value())};var Eb=o;Eb.scale.palette=
k.makeClass("gg.scale.palette",Eb.scale.discrete);Eb.scale.palette.prototype.init=function(a){Eb.scale.discrete.prototype.init.call(this);this._paletteName=a;this._d3scale=null;this._colorTable={};this._made=false};Eb.scale.palette.prototype.make=function(a){if(a)this._levels=a;else if(!this._levels)this._levels=this._graph.levels(this._aes);a=this._levels.length;if(a<=10)this._d3scale=j.scale.category10();else if(a<=20)this._d3scale=j.scale.category20();else{this._colorTable={};var b;for(b=0;b<a;b++)this._colorTable[this._levels[b]]=
k.getRandomColor()}this._made=true;return this};Eb.scale.palette.prototype._apply=function(a){this._made||this.make();if(this._d3scale)return this._d3scale(a);if(this._colorTable[a])return this._colorTable[a];this.warn(404,"Palette scale got value "+a+" that is not in the domain.");return null};Eb.scale.palette.prototype.toCode=function(a,b){var c={cls:this._cls_name,funcs:[["opts",ea.stringify(this.getAttr())]]};if(this._paletteName)c.params=[k.qt(this._paletteName)];this._levels&&c.funcs.push(["domain",
ea.stringify(this._levels)]);return k.toCode(a,b,c)};var Rb=o;Rb.scale.symbol=k.makeClass("gg.scale.symbol",Rb.scale.discrete);Rb.scale.symbol.prototype.init=function(){Rb.scale.discrete.prototype.init.call(this);this._symbols=[1,2,3,4,5,6,7,8,9];this._numSymbols=this._symbols.length};Rb.scale.symbol.prototype.make=function(a){if(a)this._levels=a;else if(!this._levels)this._levels=this._graph.levels(this._aes);this._numLevels=this._levels.length;return this};Rb.scale.symbol.prototype._apply=function(a){this._d3scale||
this.make();return this._symbols[h.indexOf(this._levels,a)%this._numSymbols]};var Fb=o;Fb.scale.time=k.makeClass("gg.scale.time",Fb.scale.continuous);Fb.scale.time.prototype.init=function(){Fb.scale.continuous.prototype.init.call(this);this.opts("pixel_per_tick_x",90);this._d3scale=j.time.scale()};Fb.scale.time.prototype.make=function(a){this._facetIndex=h.isNumber(a)?a:-1;a=this._makeDomain();this._d3scale.domain(a).range(this.range())};Fb.scale.time.prototype.ticks=function(a){var a=this._suggestNumticks(a),
b=this,c=this._d3scale.ticks(a),d=this._d3scale.tickFormat(a);return h.map(c,function(a){return b._tickObject(a,b.apply(a),d(a))})};Fb.scale.time.prototype.maxLabelWidth=function(){var a;try{var b=this._makeDomain();a=b[1]-b[0]}catch(c){a=this._graph.min(this._aes);a=this._graph.max(this._aes)-a}a=a/20;return a<=36E5||a<=864E5?k.strlenToPixel(15):a<=1296E6||a<=10368E6?k.strlenToPixel(9):k.strlenToPixel(4)};var jb=o;jb.scale.time_gradient=k.makeClass("gg.scale.time_gradient",jb.scale.time);jb.scale.time_gradient.prototype.init=
function(a,b){jb.scale.time.prototype.init.call(this);this._attr.range_low=a||jb.opts.gradient.low;this._attr.range_high=b||jb.opts.gradient.high;this._d3scale=null};jb.scale.time.prototype.make=function(){this._d3scale=j.time.scale();var a=this._makeDomain();this._d3scale.domain(a).range(this.range())};jb.scale.time_gradient.prototype._apply=function(a){this._d3scale||this.make();return this._d3scale(a)};var Ua=o;Ua.stats.aggregate=k.makeClass("gg.stats.aggregate",Ua.stats.base);Ua.stats.aggregate.prototype.init=
function(){Ua.stats.base.prototype.init.call(this)};Ua.stats.aggregate.prototype.number=function(a){return arguments.length===0?0:this};Ua.stats.aggregate.prototype.calculateStats=function(a,b){return this.group(a,b)};Ua.stats.aggregate.prototype.imputeMapping=function(a,b){return Ua.stats.base.prototype.imputeMapping.call(this,a,b)};Ua.stats.aggregate.prototype.keys=function(){return[]};Ua.stats.aggregate.prototype.makeMeta=function(a){var b=a.metas(),a=this.keys();h.each(a,function(a){h.contains(b,
a)||(b[a]={type:"number"})});return b};var kb=o;kb.stats.bin=k.makeClass("gg.stats.bin",kb.stats.aggregate);kb.stats.bin.prototype.compute=function(a){var b=a.getObject(0),c=this.makeMeta(a);b.$count=a.len();return kb.data([b],c)};kb.stats.bin.prototype.imputeMapping=function(a){a=kb.stats.aggregate.prototype.imputeMapping.call(this,a,{group_stats:["x","group"]});return h.extend(a,{y:"$count"})};kb.stats.bin.prototype.keys=function(){return kb.stats.aggregate.prototype.keys.call(this).concat(["$count"])};
var lb=o;lb.stats.box=k.makeClass("gg.stats.box",lb.stats.aggregate);lb.stats.box.prototype.imputeMapping=function(a){a=lb.stats.aggregate.prototype.imputeMapping.call(this,a,{group_stats:["group","x"]});return h.extend(a,{y_q0:"$q0",y_q1:"$q1",y_q2:"$q2",y_q3:"$q3",y_q4:"$q4"})};lb.stats.box.prototype.compute=function(a,b){for(var c=b.mapping,d=a.getObject(0),c=a.get(c.y),e=c.length-1,f=h.sortBy(c,k.identity),g=e/4,i=e/2,j=e/4*3,g=(f[Math.ceil(g)]+f[Math.floor(g)])/2,i=(f[Math.ceil(i)]+f[Math.floor(i)])/
2,j=(f[Math.ceil(j)]+f[Math.floor(j)])/2,l=j-g,o=0;f[o]<i-1.5*l;)o++;for(o=f[o];f[e]>i+1.5*l;)e--;f=f[e];d.$q0=o;d.$q1=g;d.$q2=i;d.$q3=j;d.$q4=f;k.assertNumber(o);k.assertNumber(g);k.assertNumber(i);k.assertNumber(j);k.assertNumber(f);d=[d];for(g=0;g<c.length;g++)(c[g]>f||c[g]<o)&&d.push(a.getObject(g));c=this.makeMeta(a);return lb.data(d,c)};lb.stats.box.prototype.keys=function(){return lb.stats.aggregate.prototype.keys.call(this).concat(["$q0","$q1","$q2","$q3","$q4"])};o.stats.count=o.stats.bin;
o.stats.id=k.makeClass("gg.stats.id",o.stats.base);var mb=o;mb.stats.mean=k.makeClass("gg.stats.mean",mb.stats.aggregate);mb.stats.mean.prototype.compute=function(a,b){var c=b.mapping,d=b.attr,e=a.getObject(0);if(c=c.y){d=k.sum.apply(a.get(c))/a.len();e.$mean=d}else e.$mean=d.y;d=this.makeMeta(a);return mb.data([e],d)};mb.stats.mean.prototype.imputeMapping=function(a){a=mb.stats.aggregate.prototype.imputeMapping.call(this,a,{group_stats:"x"});return h.extend(a,{y_override:"$mean"})};mb.stats.mean.prototype.keys=
function(){return mb.stats.aggregate.prototype.keys.call(this).concat(["$mean"])};var nb=o;nb.stats.stack=k.makeClass("gg.stats.stack",nb.stats.aggregate);nb.stats.stack.prototype.compute=function(a,b){var c=b.mapping,d=c.y,e=[],f=a.len(),g=0;if(d)for(var i=a.getTypeObj(d).represent,j=c.group_stats||d,c=h.sortBy(a.getObjects(),function(a){return i(a[j])}),k=0;k<f;k++){var l=c[f-k-1];l.$partial_1=g;g=g+l[d];l.$partial_2=g;e.push(l)}else for(k=0;k<f;k++){l=a.getObject(k);l.$partial_1=g;g=g+1;l.$partial_2=
g;e.push(l)}d=this.makeMeta(a);return nb.data(e,d)};nb.stats.stack.prototype.imputeMapping=function(a){a=nb.stats.aggregate.prototype.imputeMapping.call(this,a,{group_stats:"x"});return h.extend(a,{y_1:"$partial_1",y_2:"$partial_2"})};nb.stats.stack.prototype.keys=function(){return nb.stats.aggregate.prototype.keys.call(this).concat(["$partial_1","$partial_2"])};var ob=o;ob.stats.sum=k.makeClass("gg.stats.sum",ob.stats.aggregate);ob.stats.sum.prototype.compute=function(a,b){var c=b.mapping,d=a.getObject(0);
if(c=c.y){c=k.sum.apply(a.get(c));d.$sum=c}else d.$sum=b.attr.y*a.len();c=this.makeMeta(a);return ob.data([d],c)};ob.stats.sum.prototype.imputeMapping=function(a){a=ob.stats.aggregate.prototype.imputeMapping.call(this,a,{group_stats:"x"});return h.extend(a,{y_override:"$sum"})};ob.stats.sum.prototype.keys=function(){return ob.stats.aggregate.prototype.keys.call(this).concat(["$sum"])};var Gb=o;Gb.stats.tilestat=k.makeClass("gg.stats.tilestat",Gb.stats.base);Gb.stats.tilestat.prototype.entry=function(a,
b,c){var d={};if(b.x){var e=b.x;d.group=Sd(a.min(e),a.max(e),10);b.group=e}if(b.y){e=b.y;d.group2=Sd(a.min(e),a.may(e),10);b.group2=e}return this.group(a,b,c,d)};var Sd=function(a,b,c){a>=b&&Gb.error(900,"Cannot create a grouping function where min is "+a+" and max is "+b);c<=0&&Gb.error(901,"Cannot create a grouping function where number of bins is less than 1.");var d=b-a,b=function(b){b=Math.floor((b-a)/d*c);b==c&&(b=c-1);return a+b*d/c};b.width=d/c;return b};Gb.stats.tilestat.prototype.imputeMapping=
function(a){a=Gb.stats.base.prototype.imputeMapping.call(this,a,{group_stats_1:"x",group_stats_2:"y"});return h.extend(a,{y:"$count"})};for(var xf={createGroupFunction:Sd},yf,zf=["gg","stats","tilestat"],jc=qf,Td=0;Td<zf.length;Td++){var Ud=zf[Td];jc[Ud]||(jc[Ud]={});jc=jc[Ud]}yf=jc;for(key in xf){var Af="gg.stats.tilestat."+key;value=xf[key];yf[key]=value;"[object Function]"==Object.prototype.toString.call(value)&&(/^[A-Z]/.test(key)&&value.prototype)&&(value.prototype._name=Af);rf.push(Af)}var pb=
o;pb.stats.unique=k.makeClass("gg.stats.unique",pb.stats.aggregate);pb.stats.unique.prototype.compute=function(a,b){var c=b.mapping,d=a.getObject(0),c=c.y;d.$unique=c?a.levels(c).length:0;c=this.makeMeta(a);return pb.data([d],c)};pb.stats.unique.prototype.imputeMapping=function(a){a=pb.stats.aggregate.prototype.imputeMapping.call(this,a,{group_stats:"x"});return h.extend(a,{y_override:"$unique"})};pb.stats.unique.prototype.keys=function(){return pb.stats.aggregate.prototype.keys.call(this).concat(["$unique"])};
var Ia=o;Ia.symbol=Ia.symbol||{};var xh=Math.sqrt(2),Bf=Math.sqrt(3)/2,Cf=Math.sqrt(3)/2,Df=-Math.sqrt(3)/2,Ef=-Math.sqrt(3)/2,yh=(Math.sqrt(5)-1)/4,ab=function(a){return Math.cos(Math.PI/180*36*a)},bb=function(a){return Math.sin(Math.PI/180*36*a)},zh=ab(1),Ah=ab(2),Bh=ab(3),Ch=ab(4),Dh=ab(5),Eh=ab(6),Fh=ab(7),Gh=ab(8),Hh=ab(9),Ih=bb(1),Jh=bb(2),Kh=bb(3),Lh=bb(4),Mh=bb(5),Nh=bb(6),Oh=bb(7),Ph=bb(8),Qh=bb(9);Ia.symbol.CIRCLE=1;Ia.symbol.BOX=2;Ia.symbol.DIAMOND=3;Ia.symbol.HEX=4;Ia.symbol.TRIANGLE=
5;Ia.symbol.TRIANGLE_REVERSE=6;Ia.symbol.STAR=7;Ia.symbol.CROSS=8;Ia.symbol.X=9;Ia.symbol.makePath=function(a,b,c,d){if(a==1)return[["M",b,c+d],["A",d,d,0,1,1,b,c-d],["A",d,d,0,1,1,b,c+d],["Z"]];if(a==2)return[["M",b+d,c+d],["L",b-d,c+d],["L",b-d,c-d],["L",b+d,c-d],["Z"]];if(a==3)return[["M",b+d,c],["L",b,c+d],["L",b-d,c],["L",b,c-d],["Z"]];if(a==4)return[["M",b+d*0,c+d*1],["L",b+d*Bf,c+d*0.5],["L",b+d*Cf,c+d*-0.5],["L",b+d*0,c+d*-1],["L",b+d*Df,c+d*-0.5],["L",b+d*Ef,c+d*0.5],["Z"]];if(a==6)return[["M",
b+d*0,c+d*1],["L",b+d*Cf,c+d*-0.5],["L",b+d*Df,c+d*-0.5],["Z"]];if(a==5)return[["M",b+d*Bf,c+d*0.5],["L",b+d*0,c+d*-1],["L",b+d*Ef,c+d*0.5],["Z"]];if(a==7){a=d*yh;return[["M",b+a*0,c+a*1],["L",b+d*Ih,c+d*zh],["L",b+a*Jh,c+a*Ah],["L",b+d*Kh,c+d*Bh],["L",b+a*Lh,c+a*Ch],["L",b+d*Mh,c+d*Dh],["L",b+a*Nh,c+a*Eh],["L",b+d*Oh,c+d*Fh],["L",b+a*Ph,c+a*Gh],["L",b+d*Qh,c+d*Hh],["Z"]]}if(a==8)return[["M",b+d,c],["L",b,c],["L",b,c+d],["L",b,c],["L",b-d,c],["L",b,c],["L",b,c-d],["L",b,c],["Z"]];if(a==9){a=d*xh/
2;return[["M",b+a,c+a],["L",b,c],["L",b+a,c-a],["L",b,c],["L",b-a,c+a],["L",b,c],["L",b-a,c-a],["L",b,c],["Z"]]}};var Z=o;Z.type.category=k.makeClass("gg.type.category",Z.type.base);Z.type.category.prototype.min=function(){Z.error(802,"Invalid operation min() on categorical variable.")};Z.type.category.prototype.max=function(){Z.error(802,"Invalid operation max() on categorical variable.")};Z.type.category.prototype.coerce=function(a){return a};Z.type.category.prototype.represent=function(a){return a};
Z.type.category.prototype.sort=function(a,b){if(a===b)return 0;h.isString(a)||(a=""+a);h.isString(b)||(b=""+b);var c=a.toLowerCase(),d=b.toLowerCase();return c===d?a<b?-1:a>b?1:0:c<d?-1:c>d?1:0};Z.type.category.prototype.validate=function(){return true};Z.type.category.prototype.defaultScale=function(a){k.assertAes(a);var b=null,b=(b={color:Z.scale.palette,opacity:Z.scale.discrete,radius:Z.scale.discrete,stroke:Z.scale.palette,strokewidth:Z.scale.discrete,symbol:Z.scale.symbol,x:Z.scale.discrete,
y:Z.scale.discrete}[a])?b():Z.scale.id();this._postProcess(a,b);return b};var la=o;la.type.date=k.makeClass("gg.type.date",la.type.base);var Ff=function(a){return h.isNumber(a)?a:a.getTime()};la.type.date.prototype.min=function(a){return this.coerce(h.min(h.reject(a,h.isNull),Ff))};la.type.date.prototype.max=function(a){return this.coerce(h.max(h.reject(a,h.isNull),Ff))};la.type.date.prototype.coerce=function(a){return h.isDate(a)?a.getTime():h.isNumber(a)?a:Number(a)};la.type.date.prototype.represent=
function(a){return h.isNumber(a)?a:h.isDate(a)?a.getTime():null};la.type.date.prototype.validate=function(a){return h.isNumber(a)};la.type.date.prototype.defaultScale=function(a){k.assertAes(a);var b=null,b=(b={color:la.scale.time_gradient,opacity:la.scale.time,radius:la.scale.time,stroke:la.scale.time_gradient,strokewidth:la.scale.time,symbol:la.scale.symbol,x:la.scale.time,y:la.scale.time}[a])?b():la.scale.id();this._postProcess(a,b);return b};var R=o;R.type.number=k.makeClass("gg.type.number",
R.type.base);R.type.number.prototype.min=R.type.date.prototype.min;R.type.number.prototype.max=R.type.date.prototype.max;R.type.number.prototype.coerce=function(a){return h.isDate(a)?a.getTime():h.isNumber(a)?a:Number(a)};R.type.number.prototype.represent=R.type.date.prototype.represent;R.type.number.prototype.validate=function(a){return h.isNumber(a)};R.type.number.prototype.sort=function(a,b){return a===b?0:a==null?-1:b==null?1:a<b?-1:a>b?1:0};R.type.number.prototype.defaultScale=function(a){k.assertAes(a);
var b=null,b=(b={color:R.scale.gradient,opacity:R.scale.continuous,radius:R.scale.continuous,stroke:R.scale.gradient,strokewidth:R.scale.continuous,symbol:R.scale.symbol,x:R.scale.continuous,y:R.scale.continuous}[a])?b():R.scale.id();this._postProcess(a,b);return b};var cb=o;cb.type.unknown=k.makeClass("gg.type.unknown",cb.type.base);cb.type.unknown.prototype.min=function(){return null};cb.type.unknown.prototype.max=function(){return null};cb.type.unknown.prototype.coerce=function(a){return a};cb.type.unknown.prototype.represent=
function(a){return a};cb.type.unknown.prototype.validate=function(){return true};cb.type.unknown.prototype.defaultScale=function(){cb.error(801,"Attempted to call defaultScale() on unknown type.")};var db=o,Mc=o,Mc=Mc||{},Sb=function(a,b){a||db.error(1,"Attempting to package an object that does not exist.");for(var c=b.length,d=0;d<c;d++){var e=b[d];if(Mc[e])db.error(3,"gg."+e+" is already set.");else{a[e]||db.error(2,"Failed while packing "+e+".");Mc[e]=a[e]}}};Sb(db.coord,["cart","polar"]);Sb(db.facet,
["grid","wrap"]);Sb(db.guide,["axis","legend"]);Sb(db.layer,"area bar box line path point text tile".split(" "));Sb(db.scale,"continuous discrete gradient id palette time".split(" "));Sb(db.stats,["bin","stack","count"]);var Nc=o;Nc.stats.ratio=k.makeClass("gg.stats.ratio",Nc.stats.stack);Nc.stats.ratio.prototype.compute=function(a,b){var c=b.mapping.y,d=[],e=a.len(),f=0;if(c)for(var g=k.sum.apply(a.get(c)),i=a.getTypeObj(c).represent,j=h.sortBy(a.getObjects(),function(a){return i(a[c])}),l=0;l<e;l++){var o=
j[e-l-1],n;n=g==0?1/e:o[c]/g;o.$partial_1=f;f=f+n;o.$partial_2=f;o[c]=n;d.push(o)}else{n=1/e;for(l=0;l<e;l++){o=a.getObject(l);o.$partial_1=f;f=f+n;o.$partial_2=f;d.push(o)}}e=this.makeMeta(a);return Nc.data(d,e)};window.Raphael.ninja();window._.noConflict();delete window.d3;return o}();